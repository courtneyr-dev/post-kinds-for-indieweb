(()=>{"use strict";var e={n:t=>{var i=t&&t.__esModule?()=>t.default:()=>t;return e.d(i,{a:i}),i},d:(t,i)=>{for(var s in i)e.o(i,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,i=window.wp.primitives,s=window.ReactJSXRuntime,a=(0,s.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,s.jsx)(i.Path,{d:"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6zm-2 16c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"})}),n=(0,s.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,s.jsx)(i.Path,{d:"M18 4l2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4h-4z"})}),o=(0,s.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,s.jsx)(i.Path,{d:"M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z"})}),r=(0,s.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,s.jsx)(i.Path,{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})}),l=(0,s.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,s.jsx)(i.Path,{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"})}),d=(0,s.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,s.jsx)(i.Path,{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}),c=(0,s.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,s.jsx)(i.Path,{d:"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"})}),p=(0,s.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,s.jsx)(i.Path,{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})}),u=(0,s.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,s.jsx)(i.Path,{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),h=(i.SVG,i.Path,i.SVG,i.Path,i.SVG,i.Path,i.SVG,i.Path,i.SVG,i.Path,(0,s.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,s.jsx)(i.Path,{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"})})),_=(i.SVG,i.Circle,i.Path,i.SVG,i.Path,(0,s.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,s.jsx)(i.Path,{d:"M21.58 16.09l-1.09-7.66A3.996 3.996 0 0016.53 5H7.47c-1.88 0-3.5 1.32-3.89 3.16l-1.09 7.66A3.007 3.007 0 005.46 19c.9 0 1.75-.4 2.32-1.09l1.78-2.13c.39-.47.96-.73 1.56-.73h1.77c.6 0 1.17.26 1.56.73l1.78 2.13c.57.69 1.42 1.09 2.32 1.09a3.007 3.007 0 002.97-3.04zM11 11H9v2H8v-2H6v-1h2V8h1v2h2v1zm4-1c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm2 3c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z"})})),m=(0,s.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,s.jsx)(i.Path,{d:"M11 9H9V2H7v7H5V2H3v7c0 2.12 1.66 3.84 3.75 3.97V22h2.5v-9.03C11.34 12.84 13 11.12 13 9V2h-2v7zm5-3v8h2.5v8H21V2c-2.76 0-5 2.24-5 4z"})}),b=(0,s.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,s.jsx)(i.Path,{d:"M20 3H4v10c0 2.21 1.79 4 4 4h6c2.21 0 4-1.79 4-4v-3h2c1.11 0 2-.89 2-2V5c0-1.11-.89-2-2-2zm0 5h-2V5h2v3zM4 19h16v2H4z"})}),k=(0,s.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,s.jsx)(i.Path,{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}),g=(0,s.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,s.jsx)(i.Path,{d:"M12 3l.01 10.55c-.59-.34-1.27-.55-2.01-.55C7.79 13 6 14.79 6 17s1.79 4 4 4 4-1.79 4-4V7h4V3h-6zm-2 16c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"})}),x=(0,s.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,s.jsx)(i.Path,{d:"M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z"})}),v=(0,s.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,s.jsx)(i.Path,{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"})}),w=(0,s.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,s.jsx)(i.Path,{d:"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"})}),f=window.wp.i18n,j=window.wp.blockEditor,y=window.wp.components,N=window.wp.element;function C({value:e=0,onChange:t,max:i=5,readOnly:a=!1}){const[n,o]=(0,N.useState)(0),r=n||e;return(0,s.jsxs)("div",{className:"post-kinds-star-rating",onMouseLeave:()=>{o(0)},role:"group","aria-label":(0,f.__)("Rating","post-kinds-for-indieweb"),children:[Array.from({length:i},(e,t)=>t+1).map(i=>(0,s.jsx)("button",{type:"button",className:"star "+(i<=r?"filled":""),onClick:()=>(i=>{!a&&t&&t(i===e?0:i)})(i),onMouseEnter:()=>(e=>{a||o(e)})(i),disabled:a,"aria-label":`${i} ${1===i?(0,f.__)("star","post-kinds-for-indieweb"):(0,f.__)("stars","post-kinds-for-indieweb")}`,"aria-pressed":i<=e,children:i<=r?d:c},i)),e>0&&(0,s.jsxs)("span",{className:"rating-text","aria-hidden":"true",children:[e,"/",i]})]})}function S({src:e,alt:t="",size:i="medium",className:a=""}){const[n,o]=(0,N.useState)(!1),[r,l]=(0,N.useState)(!0);return!e||n?(0,s.jsx)("div",{className:`post-kinds-cover-placeholder ${i} ${a}`,children:h}):(0,s.jsxs)("div",{className:`post-kinds-cover-image ${i} ${a}`,children:[r&&(0,s.jsx)("div",{className:"cover-loading",children:(0,s.jsx)(y.Spinner,{})}),(0,s.jsx)("img",{src:e,alt:t,onLoad:()=>l(!1),onError:()=>{o(!0),l(!1)},style:{opacity:r?0:1}})]})}function T({type:e,placeholder:t,onSelect:i}){const[a,n]=(0,N.useState)(""),[o,r]=(0,N.useState)([]),[l,d]=(0,N.useState)(!1),[c,p]=(0,N.useState)(""),u=async()=>{if(a.trim()){d(!0),p(""),r([]);try{const t=(()=>{switch(e){case"movie":case"tv":default:return"/post-kinds-indieweb/v1/lookup/video";case"music":return"/post-kinds-indieweb/v1/lookup/music";case"book":return"/post-kinds-indieweb/v1/lookup/book";case"podcast":return"/post-kinds-indieweb/v1/lookup/podcast";case"venue":return"/post-kinds-indieweb/v1/lookup/venue";case"game":return"/post-kinds-indieweb/v1/lookup/game"}})(),i=(()=>{const t=new URLSearchParams;return t.append("q",a.trim()),"movie"!==e&&"tv"!==e||t.append("type",e),t.toString()})(),s=await wp.apiFetch({path:`${t}?${i}`}),n=Array.isArray(s)?s:s.results||[];n.length>0?r(n):p((0,f.__)("No results found.","post-kinds-for-indieweb"))}catch(e){let t=(0,f.__)("Search failed.","post-kinds-for-indieweb");e.message?t=e.message.includes("<")||e.message.includes("critical error")?(0,f.__)("Search service unavailable. Please try again.","post-kinds-for-indieweb"):e.message:e.code&&(t=`${(0,f.__)("Error","post-kinds-for-indieweb")}: ${e.code}`),p(t)}finally{d(!1)}}};return(0,s.jsxs)("div",{className:"post-kinds-media-search",children:[(0,s.jsxs)("div",{className:"search-input-group",children:[(0,s.jsx)(y.TextControl,{value:a,onChange:n,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),u())},placeholder:t,disabled:l}),(0,s.jsx)(y.Button,{variant:"secondary",onClick:u,disabled:l||!a.trim(),children:l?(0,s.jsx)(y.Spinner,{}):(0,f.__)("Search","post-kinds-for-indieweb")})]}),c&&(0,s.jsx)("p",{className:"search-error",children:c}),o.length>0&&(0,s.jsx)("ul",{className:"search-results",children:o.map((e,t)=>(0,s.jsx)("li",{children:(0,s.jsxs)("button",{type:"button",className:"search-result-item",onClick:()=>(e=>{i&&i(e),r([]),n("")})(e),children:[(e.image||e.cover)&&(0,s.jsx)("img",{src:e.image||e.cover,alt:"",className:"result-image"}),(0,s.jsxs)("div",{className:"result-info",children:[(0,s.jsx)("strong",{className:"result-title",children:e.track||e.title||e.name}),e.artist&&(0,s.jsx)("span",{className:"result-artist",children:e.artist}),e.author&&(0,s.jsx)("span",{className:"result-author",children:e.author}),e.year&&(0,s.jsxs)("span",{className:"result-year",children:["(",e.year,")"]})]})]})},t))})]})}function D({value:e=0,label:t="",showPercent:i=!0}){const a=Math.max(0,Math.min(100,e));return(0,s.jsxs)("div",{className:"post-kinds-progress-bar",role:"progressbar","aria-valuenow":a,"aria-valuemin":"0","aria-valuemax":"100",children:[t&&(0,s.jsx)("span",{className:"progress-label",children:t}),(0,s.jsx)("div",{className:"progress-track",children:(0,s.jsx)("div",{className:"progress-fill",style:{width:`${a}%`}})}),i&&(0,s.jsxs)("span",{className:"progress-percent",children:[a,"%"]})]})}function A({icon:e,label:t,instructions:i,children:a}){return(0,s.jsx)(y.Placeholder,{icon:e,label:t,instructions:i,className:"post-kinds-block-placeholder",children:a})}function P({name:e,address:t,city:i,country:a,latitude:n,longitude:o}){const r=n&&o,l=r?`https://www.openstreetmap.org/?mlat=${n}&mlon=${o}#map=16/${n}/${o}`:null;return(0,s.jsxs)("div",{className:"post-kinds-location h-adr",children:[e&&(0,s.jsx)("strong",{className:"p-name",children:e}),t&&(0,s.jsx)("span",{className:"p-street-address",children:t}),i&&(0,s.jsx)("span",{className:"p-locality",children:i}),a&&(0,s.jsx)("span",{className:"p-country-name",children:a}),r&&(0,s.jsxs)("span",{className:"coordinates",children:[(0,s.jsx)("data",{className:"p-latitude",value:n}),(0,s.jsx)("data",{className:"p-longitude",value:o}),l&&(0,s.jsx)("a",{href:l,target:"_blank",rel:"noopener noreferrer",className:"map-link",children:(0,f.__)("View on map","post-kinds-for-indieweb")})]})]})}const B=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"post-kinds-indieweb/listen-card","version":"1.0.0","title":"Listen Card","category":"post-kinds-indieweb","description":"Display a listen/scrobble with track, artist, and album information.","keywords":["listen","music","scrobble","track","song","album","artist"],"textdomain":"post-kinds-indieweb","attributes":{"trackTitle":{"type":"string","source":"html","selector":".track-title"},"artistName":{"type":"string","source":"html","selector":".artist-name"},"albumTitle":{"type":"string","source":"html","selector":".album-title"},"releaseDate":{"type":"string"},"coverImage":{"type":"string","source":"attribute","selector":".cover-image img","attribute":"src"},"coverImageAlt":{"type":"string","source":"attribute","selector":".cover-image img","attribute":"alt"},"listenUrl":{"type":"string"},"musicbrainzId":{"type":"string"},"rating":{"type":"number","default":0},"listenedAt":{"type":"string"},"layout":{"type":"string","default":"horizontal"}},"supports":{"html":false,"align":["wide","full"],"color":{"background":true,"text":true,"gradients":true,"link":true},"spacing":{"margin":true,"padding":true,"blockGap":true},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontFamily":true,"__experimentalFontWeight":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true},"__experimentalBorder":{"color":true,"radius":true,"width":true,"style":true,"__experimentalDefaultControls":{"color":true,"radius":true,"width":true,"style":true}},"shadow":true,"dimensions":{"minHeight":true}},"example":{"attributes":{"trackTitle":"Bohemian Rhapsody","artistName":"Queen","albumTitle":"A Night at the Opera","releaseDate":"1975-10-31","rating":5}},"editorStyle":"file:./editor.css"}');(0,t.registerBlockType)(B.name,{...B,icon:a,edit:function({attributes:e,setAttributes:t}){const{trackTitle:i,artistName:n,albumTitle:o,releaseDate:r,coverImage:l,coverImageAlt:d,listenUrl:c,musicbrainzId:p,rating:u,listenedAt:h,layout:_}=e,[m,b]=(0,N.useState)(!1),[k,g]=(0,N.useState)(!1),x=(0,j.useBlockProps)({className:`listen-card layout-${_}`}),v=e=>{const i=e.track||e.title||e.name||"";t({trackTitle:i,artistName:e.artist||"",albumTitle:e.album||"",releaseDate:e.releaseDate||e.date||"",coverImage:e.cover||e.image||"",coverImageAlt:`${i} by ${e.artist||""}`,musicbrainzId:e.mbid||e.id||""}),g(!1)};return i||n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(j.InspectorControls,{children:[(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Search Music","post-kinds-for-indieweb"),initialOpen:!1,children:[(0,s.jsx)(T,{type:"music",placeholder:(0,f.__)("Search for a song or album…","post-kinds-for-indieweb"),onSelect:v}),(0,s.jsx)("p",{className:"components-base-control__help",style:{marginTop:"8px"},children:(0,f.__)("Search MusicBrainz to auto-fill track details.","post-kinds-for-indieweb")})]}),(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Track Details","post-kinds-for-indieweb"),children:[(0,s.jsx)(y.TextControl,{label:(0,f.__)("Track Title","post-kinds-for-indieweb"),value:i||"",onChange:e=>t({trackTitle:e})}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Artist","post-kinds-for-indieweb"),value:n||"",onChange:e=>t({artistName:e})}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Album","post-kinds-for-indieweb"),value:o||"",onChange:e=>t({albumTitle:e})}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Release Date","post-kinds-for-indieweb"),value:r||"",onChange:e=>t({releaseDate:e}),type:"date"})]}),(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Listen Info","post-kinds-for-indieweb"),children:[(0,s.jsxs)("div",{className:"components-base-control",children:[(0,s.jsx)("span",{className:"components-base-control__label",children:(0,f.__)("Rating","post-kinds-for-indieweb")}),(0,s.jsx)(C,{value:u,onChange:e=>t({rating:e}),max:5})]}),(0,s.jsxs)("div",{className:"components-base-control",children:[(0,s.jsx)("span",{className:"components-base-control__label",children:(0,f.__)("Listened At","post-kinds-for-indieweb")}),(0,s.jsx)(y.Button,{variant:"secondary",onClick:()=>b(!0),"aria-label":(0,f.__)("Set listened date/time","post-kinds-for-indieweb"),children:h?new Date(h).toLocaleString():(0,f.__)("Set date/time","post-kinds-for-indieweb")}),m&&(0,s.jsx)(y.Popover,{onClose:()=>b(!1),children:(0,s.jsx)(y.DateTimePicker,{currentDate:h,onChange:e=>{t({listenedAt:e}),b(!1)},is12Hour:!0})})]}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Listen URL","post-kinds-for-indieweb"),value:c||"",onChange:e=>t({listenUrl:e}),type:"url",help:(0,f.__)("Link to the track on a streaming service.","post-kinds-for-indieweb")})]}),(0,s.jsx)(y.PanelBody,{title:(0,f.__)("Layout","post-kinds-for-indieweb"),children:(0,s.jsx)(y.SelectControl,{label:(0,f.__)("Layout Style","post-kinds-for-indieweb"),value:_,options:[{label:(0,f.__)("Horizontal","post-kinds-for-indieweb"),value:"horizontal"},{label:(0,f.__)("Vertical","post-kinds-for-indieweb"),value:"vertical"},{label:(0,f.__)("Compact","post-kinds-for-indieweb"),value:"compact"}],onChange:e=>t({layout:e})})}),(0,s.jsx)(y.PanelBody,{title:(0,f.__)("Metadata","post-kinds-for-indieweb"),initialOpen:!1,children:(0,s.jsx)(y.TextControl,{label:(0,f.__)("MusicBrainz ID","post-kinds-for-indieweb"),value:p||"",onChange:e=>t({musicbrainzId:e}),help:(0,f.__)("Used for linking to music databases.","post-kinds-for-indieweb")})})]}),(0,s.jsx)("div",{...x,children:(0,s.jsxs)("div",{className:"post-kinds-card h-cite",children:[(0,s.jsx)("div",{className:"cover-image",children:(0,s.jsx)(j.MediaUploadCheck,{children:(0,s.jsx)(j.MediaUpload,{onSelect:e=>{t({coverImage:e.url,coverImageAlt:e.alt||`${i} by ${n}`})},allowedTypes:["image"],render:({open:e})=>(0,s.jsx)("div",{onClick:e,onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),e())},role:"button",tabIndex:0,children:(0,s.jsx)(S,{src:l,alt:d,size:"medium"})})})})}),(0,s.jsxs)("div",{className:"listen-info",children:[(0,s.jsx)(j.RichText,{tagName:"h3",className:"track-title p-name",value:i,onChange:e=>t({trackTitle:e}),placeholder:(0,f.__)("Track title","post-kinds-for-indieweb")}),(0,s.jsx)(j.RichText,{tagName:"p",className:"artist-name p-author h-card",value:n,onChange:e=>t({artistName:e}),placeholder:(0,f.__)("Artist name","post-kinds-for-indieweb")}),(o||"compact"!==_)&&(0,s.jsx)(j.RichText,{tagName:"p",className:"album-title",value:o,onChange:e=>t({albumTitle:e}),placeholder:(0,f.__)("Album title","post-kinds-for-indieweb")}),u>0&&(0,s.jsx)("div",{className:"rating-display",children:(0,s.jsx)(C,{value:u,readonly:!0,max:5})})]})]})})]}):(0,s.jsx)("div",{...x,children:(0,s.jsx)(A,{icon:a,label:(0,f.__)("Listen Card","post-kinds-for-indieweb"),instructions:(0,f.__)("Add a track you listened to. Search for music or enter details manually.","post-kinds-for-indieweb"),children:k?(0,s.jsxs)("div",{className:"search-mode",children:[(0,s.jsx)(T,{type:"music",placeholder:(0,f.__)("Search for a song or album…","post-kinds-for-indieweb"),onSelect:v}),(0,s.jsx)(y.Button,{variant:"link",onClick:()=>g(!1),children:(0,f.__)("Enter manually","post-kinds-for-indieweb")})]}):(0,s.jsxs)("div",{className:"placeholder-actions",children:[(0,s.jsx)(y.Button,{variant:"primary",onClick:()=>g(!0),children:(0,f.__)("Search Music","post-kinds-for-indieweb")}),(0,s.jsx)(y.Button,{variant:"secondary",onClick:()=>t({trackTitle:""}),children:(0,f.__)("Enter Manually","post-kinds-for-indieweb")})]})})})},save:function({attributes:e}){const{trackTitle:t,artistName:i,albumTitle:a,releaseDate:n,coverImage:o,coverImageAlt:r,listenUrl:l,musicbrainzId:d,rating:c,listenedAt:p,layout:u}=e,h=j.useBlockProps.save({className:`listen-card layout-${u}`});return(0,s.jsx)("div",{...h,children:(0,s.jsxs)("div",{className:"post-kinds-card h-cite",children:[o&&(0,s.jsx)("div",{className:"post-kinds-card__media",children:(0,s.jsx)("img",{src:o,alt:r||`${t} by ${i}`,className:"post-kinds-card__image u-photo",loading:"lazy"})}),(0,s.jsxs)("div",{className:"post-kinds-card__content",children:[t&&(0,s.jsx)("h3",{className:"post-kinds-card__title p-name",children:l?(0,s.jsx)("a",{href:l,className:"u-url",target:"_blank",rel:"noopener noreferrer",children:t}):t}),i&&(0,s.jsx)("p",{className:"post-kinds-card__subtitle",children:(0,s.jsx)("span",{className:"p-author h-card",children:(0,s.jsx)("span",{className:"p-name",children:i})})}),a&&(0,s.jsxs)("p",{className:"post-kinds-card__meta",children:[a,n&&(0,s.jsxs)("span",{className:"post-kinds-card__meta-detail",children:[" ","(",new Date(n).getFullYear(),")"]})]}),!c||c<=0?null:(0,s.jsxs)("div",{className:"post-kinds-card__rating p-rating","aria-label":`Rating: ${c} out of 5 stars`,children:[Array.from({length:5},(e,t)=>(0,s.jsx)("span",{className:"star "+(t<c?"filled":""),"aria-hidden":"true",children:"★"},t)),(0,s.jsxs)("span",{className:"post-kinds-card__rating-value",children:[c,"/5"]})]}),p&&(0,s.jsx)("time",{className:"post-kinds-card__timestamp dt-published",dateTime:new Date(p).toISOString(),children:new Date(p).toLocaleString()})]}),(0,s.jsx)("data",{className:"u-listen-of",value:l||"",hidden:!0}),d&&(0,s.jsx)("data",{className:"u-uid",value:`https://musicbrainz.org/recording/${d}`,hidden:!0})]})})}});const L=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"post-kinds-indieweb/watch-card","version":"1.0.0","title":"Watch Card","category":"post-kinds-indieweb","description":"Display a movie or TV show you watched with poster, rating, and details.","keywords":["watch","movie","tv","film","show","episode","video"],"textdomain":"post-kinds-indieweb","attributes":{"mediaTitle":{"type":"string","source":"html","selector":".media-title"},"mediaType":{"type":"string","default":"movie"},"showTitle":{"type":"string"},"seasonNumber":{"type":"number"},"episodeNumber":{"type":"number"},"episodeTitle":{"type":"string"},"releaseYear":{"type":"number"},"director":{"type":"string"},"posterImage":{"type":"string","source":"attribute","selector":".poster-image img","attribute":"src"},"posterImageAlt":{"type":"string","source":"attribute","selector":".poster-image img","attribute":"alt"},"watchUrl":{"type":"string"},"tmdbId":{"type":"string"},"imdbId":{"type":"string"},"rating":{"type":"number","default":0},"isRewatch":{"type":"boolean","default":false},"watchedAt":{"type":"string"},"review":{"type":"string","source":"html","selector":".watch-review"},"layout":{"type":"string","default":"horizontal"}},"supports":{"html":false,"align":["wide","full"],"color":{"background":true,"text":true,"gradients":true,"link":true},"spacing":{"margin":true,"padding":true,"blockGap":true},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontFamily":true,"__experimentalFontWeight":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true},"__experimentalBorder":{"color":true,"radius":true,"width":true,"style":true,"__experimentalDefaultControls":{"color":true,"radius":true,"width":true,"style":true}},"shadow":true,"dimensions":{"minHeight":true}},"example":{"attributes":{"mediaTitle":"The Shawshank Redemption","mediaType":"movie","releaseYear":1994,"director":"Frank Darabont","rating":5}},"editorStyle":"file:./editor.css"}');(0,t.registerBlockType)(L.name,{...L,icon:n,edit:function({attributes:e,setAttributes:t}){const{mediaTitle:i,mediaType:a,showTitle:o,seasonNumber:r,episodeNumber:l,episodeTitle:d,releaseYear:c,director:p,posterImage:u,posterImageAlt:h,watchUrl:_,tmdbId:m,imdbId:b,rating:k,isRewatch:g,watchedAt:x,review:v,layout:w}=e,[D,P]=(0,N.useState)(!1),[B,L]=(0,N.useState)(!1),[I,$]=(0,N.useState)("movie"),R=(0,j.useBlockProps)({className:`watch-card layout-${w} type-${a}`}),M=e=>{t({mediaTitle:e.title||e.name||"",releaseYear:e.year||e.release_year||null,director:e.director||"",posterImage:e.poster||e.image||"",posterImageAlt:e.title||e.name||"",tmdbId:e.tmdb_id||e.id||"",imdbId:e.imdb_id||"",mediaType:I}),L(!1)};return i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(j.InspectorControls,{children:[(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Search","post-kinds-for-indieweb"),initialOpen:!1,children:[(0,s.jsxs)("div",{className:"search-type-toggle",style:{marginBottom:"12px",display:"flex",gap:"8px"},children:[(0,s.jsx)(y.Button,{variant:"movie"===I?"primary":"secondary",onClick:()=>$("movie"),size:"small",children:(0,f.__)("Movie","post-kinds-for-indieweb")}),(0,s.jsx)(y.Button,{variant:"tv"===I?"primary":"secondary",onClick:()=>$("tv"),size:"small",children:(0,f.__)("TV Show","post-kinds-for-indieweb")})]}),(0,s.jsx)(T,{type:I,placeholder:"movie"===I?(0,f.__)("Search for a movie…","post-kinds-for-indieweb"):(0,f.__)("Search for a TV show…","post-kinds-for-indieweb"),onSelect:M}),(0,s.jsx)("p",{className:"components-base-control__help",style:{marginTop:"8px"},children:(0,f.__)("Search to auto-fill details from TMDB.","post-kinds-for-indieweb")})]}),(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Media Details","post-kinds-for-indieweb"),children:[(0,s.jsx)(y.SelectControl,{label:(0,f.__)("Type","post-kinds-for-indieweb"),value:a,options:[{label:(0,f.__)("Movie","post-kinds-for-indieweb"),value:"movie"},{label:(0,f.__)("TV Show","post-kinds-for-indieweb"),value:"tv"},{label:(0,f.__)("TV Episode","post-kinds-for-indieweb"),value:"episode"}],onChange:e=>t({mediaType:e})}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Title","post-kinds-for-indieweb"),value:i||"",onChange:e=>t({mediaTitle:e})}),"episode"===a&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y.TextControl,{label:(0,f.__)("Show Title","post-kinds-for-indieweb"),value:o||"",onChange:e=>t({showTitle:e})}),(0,s.jsxs)("div",{className:"episode-numbers",children:[(0,s.jsx)(y.TextControl,{type:"number",label:(0,f.__)("Season","post-kinds-for-indieweb"),value:r,onChange:e=>t({seasonNumber:parseInt(e)||null}),min:1}),(0,s.jsx)(y.TextControl,{type:"number",label:(0,f.__)("Episode","post-kinds-for-indieweb"),value:l,onChange:e=>t({episodeNumber:parseInt(e)||null}),min:1})]})]}),(0,s.jsx)(y.TextControl,{type:"number",label:(0,f.__)("Year","post-kinds-for-indieweb"),value:c,onChange:e=>t({releaseYear:parseInt(e)||null}),min:1900,max:2100}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Director","post-kinds-for-indieweb"),value:p||"",onChange:e=>t({director:e})})]}),(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Watch Info","post-kinds-for-indieweb"),children:[(0,s.jsxs)("div",{className:"components-base-control",children:[(0,s.jsx)("span",{className:"components-base-control__label",children:(0,f.__)("Rating","post-kinds-for-indieweb")}),(0,s.jsx)(C,{value:k,onChange:e=>t({rating:e}),max:5})]}),(0,s.jsx)(y.ToggleControl,{label:(0,f.__)("Rewatch","post-kinds-for-indieweb"),checked:g,onChange:e=>t({isRewatch:e}),help:(0,f.__)("Check if this is a rewatch.","post-kinds-for-indieweb")}),(0,s.jsxs)("div",{className:"components-base-control",children:[(0,s.jsx)("span",{className:"components-base-control__label",children:(0,f.__)("Watched At","post-kinds-for-indieweb")}),(0,s.jsx)(y.Button,{variant:"secondary",onClick:()=>P(!0),"aria-label":(0,f.__)("Set watched date/time","post-kinds-for-indieweb"),children:x?new Date(x).toLocaleString():(0,f.__)("Set date/time","post-kinds-for-indieweb")}),D&&(0,s.jsx)(y.Popover,{onClose:()=>P(!1),children:(0,s.jsx)(y.DateTimePicker,{currentDate:x,onChange:e=>{t({watchedAt:e}),P(!1)},is12Hour:!0})})]}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Watch URL","post-kinds-for-indieweb"),value:_||"",onChange:e=>t({watchUrl:e}),type:"url",help:(0,f.__)("Link to the content on a streaming service.","post-kinds-for-indieweb")})]}),(0,s.jsx)(y.PanelBody,{title:(0,f.__)("Layout","post-kinds-for-indieweb"),children:(0,s.jsx)(y.SelectControl,{label:(0,f.__)("Layout Style","post-kinds-for-indieweb"),value:w,options:[{label:(0,f.__)("Horizontal","post-kinds-for-indieweb"),value:"horizontal"},{label:(0,f.__)("Vertical","post-kinds-for-indieweb"),value:"vertical"},{label:(0,f.__)("Poster Focus","post-kinds-for-indieweb"),value:"poster"},{label:(0,f.__)("Compact","post-kinds-for-indieweb"),value:"compact"}],onChange:e=>t({layout:e})})}),(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Metadata","post-kinds-for-indieweb"),initialOpen:!1,children:[(0,s.jsx)(y.TextControl,{label:(0,f.__)("TMDB ID","post-kinds-for-indieweb"),value:m||"",onChange:e=>t({tmdbId:e})}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("IMDb ID","post-kinds-for-indieweb"),value:b||"",onChange:e=>t({imdbId:e})})]})]}),(0,s.jsx)("div",{...R,children:(0,s.jsxs)("div",{className:"post-kinds-card h-cite",children:[(0,s.jsx)("div",{className:"poster-image",children:(0,s.jsx)(j.MediaUploadCheck,{children:(0,s.jsx)(j.MediaUpload,{onSelect:e=>{t({posterImage:e.url,posterImageAlt:e.alt||i})},allowedTypes:["image"],render:({open:e})=>(0,s.jsx)("div",{onClick:e,onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),e())},role:"button",tabIndex:0,children:(0,s.jsx)(S,{src:u,alt:h,size:"large"})})})})}),(0,s.jsxs)("div",{className:"watch-info",children:["episode"===a&&o&&(0,s.jsx)("p",{className:"show-title",children:o}),(0,s.jsx)(j.RichText,{tagName:"h3",className:"media-title p-name",value:i,onChange:e=>t({mediaTitle:e}),placeholder:(0,f.__)("Title","post-kinds-for-indieweb")}),"episode"===a&&(r||l)&&(0,s.jsxs)("p",{className:"episode-info",children:[r&&`S${String(r).padStart(2,"0")}`,l&&`E${String(l).padStart(2,"0")}`,d&&` - ${d}`]}),(0,s.jsxs)("div",{className:"meta-line",children:[c&&(0,s.jsxs)("span",{className:"year",children:["(",c,")"]}),p&&(0,s.jsxs)("span",{className:"director",children:[(0,f.__)("Dir.","post-kinds-for-indieweb")," ",p]}),g&&(0,s.jsx)("span",{className:"rewatch-badge",children:(0,f.__)("Rewatch","post-kinds-for-indieweb")})]}),k>0&&(0,s.jsx)("div",{className:"rating-display",children:(0,s.jsx)(C,{value:k,readonly:!0,max:5})}),(0,s.jsx)(j.RichText,{tagName:"p",className:"watch-review",value:v,onChange:e=>t({review:e}),placeholder:(0,f.__)("Write a review…","post-kinds-for-indieweb")})]})]})})]}):(0,s.jsx)("div",{...R,children:(0,s.jsx)(A,{icon:n,label:(0,f.__)("Watch Card","post-kinds-for-indieweb"),instructions:(0,f.__)("Add a movie or TV show you watched. Search or enter details manually.","post-kinds-for-indieweb"),children:B?(0,s.jsxs)("div",{className:"search-mode",children:[(0,s.jsxs)("div",{className:"search-type-toggle",children:[(0,s.jsx)(y.Button,{variant:"movie"===I?"primary":"secondary",onClick:()=>$("movie"),children:(0,f.__)("Movie","post-kinds-for-indieweb")}),(0,s.jsx)(y.Button,{variant:"tv"===I?"primary":"secondary",onClick:()=>$("tv"),children:(0,f.__)("TV Show","post-kinds-for-indieweb")})]}),(0,s.jsx)(T,{type:I,placeholder:"movie"===I?(0,f.__)("Search for a movie…","post-kinds-for-indieweb"):(0,f.__)("Search for a TV show…","post-kinds-for-indieweb"),onSelect:M}),(0,s.jsx)(y.Button,{variant:"link",onClick:()=>L(!1),children:(0,f.__)("Enter manually","post-kinds-for-indieweb")})]}):(0,s.jsxs)("div",{className:"placeholder-actions",children:[(0,s.jsx)(y.Button,{variant:"primary",onClick:()=>L(!0),children:(0,f.__)("Search Movies & TV","post-kinds-for-indieweb")}),(0,s.jsx)(y.Button,{variant:"secondary",onClick:()=>t({mediaTitle:""}),children:(0,f.__)("Enter Manually","post-kinds-for-indieweb")})]})})})},save:function({attributes:e}){const{mediaTitle:t,mediaType:i,showTitle:a,seasonNumber:n,episodeNumber:o,episodeTitle:r,releaseYear:l,director:d,posterImage:c,posterImageAlt:p,watchUrl:u,tmdbId:h,imdbId:_,rating:m,isRewatch:b,watchedAt:k,review:g,layout:x}=e,v=j.useBlockProps.save({className:`watch-card layout-${x} type-${i}`}),w=()=>{if("episode"!==i)return null;let e="";return n&&(e+=`S${String(n).padStart(2,"0")}`),o&&(e+=`E${String(o).padStart(2,"0")}`),r&&(e+=` - ${r}`),e||null},f=()=>h?`https://www.themoviedb.org/${"movie"===i?"movie":"tv"}/${h}`:null,y=()=>_?`https://www.imdb.com/title/${_}`:null;return(0,s.jsx)("div",{...v,children:(0,s.jsxs)("div",{className:"post-kinds-card h-cite",children:[c&&(0,s.jsx)("div",{className:"post-kinds-card__media post-kinds-card__media--portrait",children:(0,s.jsx)("img",{src:c,alt:p||t,className:"post-kinds-card__image u-photo",loading:"lazy"})}),(0,s.jsxs)("div",{className:"post-kinds-card__content",children:[(0,s.jsxs)("div",{className:"post-kinds-card__badges",children:[(0,s.jsx)("span",{className:`post-kinds-card__badge post-kinds-card__badge--${i}`,children:"movie"===i?"Movie":"tv"===i?"TV":"Episode"}),b&&(0,s.jsx)("span",{className:"post-kinds-card__badge post-kinds-card__badge--rewatch",children:"Rewatch"})]}),"episode"===i&&a&&(0,s.jsx)("p",{className:"post-kinds-card__meta",children:a}),t&&(0,s.jsx)("h3",{className:"post-kinds-card__title p-name",children:u?(0,s.jsx)("a",{href:u,className:"u-url",target:"_blank",rel:"noopener noreferrer",children:t}):t}),w()&&(0,s.jsx)("p",{className:"post-kinds-card__subtitle",children:w()}),(l||d)&&(0,s.jsxs)("p",{className:"post-kinds-card__meta",children:[l&&(0,s.jsxs)("span",{children:["(",l,")"]}),l&&d&&" • ",d&&(0,s.jsx)("span",{className:"p-author h-card",children:(0,s.jsx)("span",{className:"p-name",children:d})})]}),!m||m<=0?null:(0,s.jsxs)("div",{className:"post-kinds-card__rating p-rating","aria-label":`Rating: ${m} out of 5 stars`,children:[Array.from({length:5},(e,t)=>(0,s.jsx)("span",{className:"star "+(t<m?"filled":""),"aria-hidden":"true",children:"★"},t)),(0,s.jsxs)("span",{className:"post-kinds-card__rating-value",children:[m,"/5"]})]}),g&&(0,s.jsx)("div",{className:"post-kinds-card__notes p-content",children:(0,s.jsx)(j.RichText.Content,{tagName:"p",value:g})}),k&&(0,s.jsx)("time",{className:"post-kinds-card__timestamp dt-published",dateTime:new Date(k).toISOString(),children:new Date(k).toLocaleString()}),(y()||f())&&(0,s.jsxs)("div",{className:"post-kinds-card__links",children:[y()&&(0,s.jsx)("a",{href:y(),target:"_blank",rel:"noopener noreferrer",children:"IMDb"}),f()&&(0,s.jsx)("a",{href:f(),target:"_blank",rel:"noopener noreferrer",children:"TMDB"})]})]}),(0,s.jsx)("data",{className:"u-watch-of",value:u||"",hidden:!0}),h&&(0,s.jsx)("data",{className:"u-uid",value:f(),hidden:!0})]})})}});const I=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"post-kinds-indieweb/read-card","version":"1.0.0","title":"Read Card","category":"post-kinds-indieweb","description":"Display a book you\'re reading or have read with cover, author, and progress.","keywords":["read","book","reading","author","isbn","library"],"textdomain":"post-kinds-indieweb","attributes":{"bookTitle":{"type":"string","source":"html","selector":".book-title"},"authorName":{"type":"string","source":"html","selector":".author-name"},"isbn":{"type":"string"},"publisher":{"type":"string"},"publishDate":{"type":"string"},"pageCount":{"type":"number"},"currentPage":{"type":"number"},"coverImage":{"type":"string","source":"attribute","selector":".cover-image img","attribute":"src"},"coverImageAlt":{"type":"string","source":"attribute","selector":".cover-image img","attribute":"alt"},"bookUrl":{"type":"string"},"openlibraryId":{"type":"string"},"readStatus":{"type":"string","default":"reading"},"rating":{"type":"number","default":0},"startedAt":{"type":"string"},"finishedAt":{"type":"string"},"review":{"type":"string","source":"html","selector":".book-review"},"layout":{"type":"string","default":"horizontal"}},"supports":{"html":false,"align":["wide","full"],"color":{"background":true,"text":true,"gradients":true,"link":true},"spacing":{"margin":true,"padding":true,"blockGap":true},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontFamily":true,"__experimentalFontWeight":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true},"__experimentalBorder":{"color":true,"radius":true,"width":true,"style":true,"__experimentalDefaultControls":{"color":true,"radius":true,"width":true,"style":true}},"shadow":true,"dimensions":{"minHeight":true}},"example":{"attributes":{"bookTitle":"The Hitchhiker\'s Guide to the Galaxy","authorName":"Douglas Adams","readStatus":"finished","rating":5}},"editorStyle":"file:./editor.css"}');(0,t.registerBlockType)(I.name,{...I,icon:o,edit:function({attributes:e,setAttributes:t}){const{bookTitle:i,authorName:a,isbn:n,publisher:r,pageCount:l,currentPage:d,coverImage:c,coverImageAlt:p,bookUrl:u,openlibraryId:h,readStatus:_,rating:m,startedAt:b,finishedAt:k,review:g,layout:x}=e,[v,w]=(0,N.useState)(!1),[P,B]=(0,N.useState)(!1),[L,I]=(0,N.useState)(!1),$=(0,j.useBlockProps)({className:`read-card layout-${x} status-${_}`}),R=l&&d?Math.min(100,Math.round(d/l*100)):0,M=e=>{t({bookTitle:e.title||"",authorName:e.author||e.authors?.join(", ")||"",isbn:e.isbn||e.isbn_13?.[0]||e.isbn_10?.[0]||"",publisher:e.publisher||e.publishers?.[0]||"",publishDate:e.publish_date||e.first_publish_year?.toString()||"",pageCount:e.number_of_pages||e.pages||null,coverImage:e.cover||e.image||"",coverImageAlt:e.title||"",openlibraryId:e.key||e.olid||""}),I(!1)};return i||a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(j.InspectorControls,{children:[(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Search Books","post-kinds-for-indieweb"),initialOpen:!1,children:[(0,s.jsx)(T,{type:"book",placeholder:(0,f.__)("Search by title, author, or ISBN…","post-kinds-for-indieweb"),onSelect:M}),(0,s.jsx)("p",{className:"components-base-control__help",style:{marginTop:"8px"},children:(0,f.__)("Search Open Library to auto-fill book details.","post-kinds-for-indieweb")})]}),(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Book Details","post-kinds-for-indieweb"),children:[(0,s.jsx)(y.TextControl,{label:(0,f.__)("Title","post-kinds-for-indieweb"),value:i||"",onChange:e=>t({bookTitle:e})}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Author","post-kinds-for-indieweb"),value:a||"",onChange:e=>t({authorName:e})}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("ISBN","post-kinds-for-indieweb"),value:n||"",onChange:e=>t({isbn:e})}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Publisher","post-kinds-for-indieweb"),value:r||"",onChange:e=>t({publisher:e})}),(0,s.jsx)(y.TextControl,{type:"number",label:(0,f.__)("Total Pages","post-kinds-for-indieweb"),value:l,onChange:e=>t({pageCount:parseInt(e)||null}),min:1})]}),(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Reading Status","post-kinds-for-indieweb"),children:[(0,s.jsx)(y.SelectControl,{label:(0,f.__)("Status","post-kinds-for-indieweb"),value:_,options:[{label:(0,f.__)("To Read","post-kinds-for-indieweb"),value:"to-read"},{label:(0,f.__)("Currently Reading","post-kinds-for-indieweb"),value:"reading"},{label:(0,f.__)("Finished","post-kinds-for-indieweb"),value:"finished"},{label:(0,f.__)("Abandoned","post-kinds-for-indieweb"),value:"abandoned"}],onChange:e=>t({readStatus:e})}),"reading"===_&&l&&(0,s.jsx)(y.RangeControl,{label:(0,f.__)("Current Page","post-kinds-for-indieweb"),value:d||0,onChange:e=>t({currentPage:e}),min:0,max:l,help:`${R}% complete`}),(0,s.jsxs)("div",{className:"components-base-control",children:[(0,s.jsx)("span",{className:"components-base-control__label",children:(0,f.__)("Rating","post-kinds-for-indieweb")}),(0,s.jsx)(C,{value:m,onChange:e=>t({rating:e}),max:5})]}),(0,s.jsxs)("div",{className:"components-base-control",children:[(0,s.jsx)("span",{className:"components-base-control__label",children:(0,f.__)("Started","post-kinds-for-indieweb")}),(0,s.jsx)(y.Button,{variant:"secondary",onClick:()=>w(!0),"aria-label":(0,f.__)("Set start date","post-kinds-for-indieweb"),children:b?new Date(b).toLocaleDateString():(0,f.__)("Set date","post-kinds-for-indieweb")}),v&&(0,s.jsx)(y.Popover,{onClose:()=>w(!1),children:(0,s.jsx)(y.DateTimePicker,{currentDate:b,onChange:e=>{t({startedAt:e}),w(!1)}})})]}),("finished"===_||"abandoned"===_)&&(0,s.jsxs)("div",{className:"components-base-control",children:[(0,s.jsx)("span",{className:"components-base-control__label",children:(0,f.__)("Finished","post-kinds-for-indieweb")}),(0,s.jsx)(y.Button,{variant:"secondary",onClick:()=>B(!0),"aria-label":(0,f.__)("Set finish date","post-kinds-for-indieweb"),children:k?new Date(k).toLocaleDateString():(0,f.__)("Set date","post-kinds-for-indieweb")}),P&&(0,s.jsx)(y.Popover,{onClose:()=>B(!1),children:(0,s.jsx)(y.DateTimePicker,{currentDate:k,onChange:e=>{t({finishedAt:e}),B(!1)}})})]})]}),(0,s.jsx)(y.PanelBody,{title:(0,f.__)("Layout","post-kinds-for-indieweb"),children:(0,s.jsx)(y.SelectControl,{label:(0,f.__)("Layout Style","post-kinds-for-indieweb"),value:x,options:[{label:(0,f.__)("Horizontal","post-kinds-for-indieweb"),value:"horizontal"},{label:(0,f.__)("Vertical","post-kinds-for-indieweb"),value:"vertical"},{label:(0,f.__)("Cover Focus","post-kinds-for-indieweb"),value:"cover"},{label:(0,f.__)("Compact","post-kinds-for-indieweb"),value:"compact"}],onChange:e=>t({layout:e})})}),(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Links","post-kinds-for-indieweb"),initialOpen:!1,children:[(0,s.jsx)(y.TextControl,{label:(0,f.__)("Book URL","post-kinds-for-indieweb"),value:u||"",onChange:e=>t({bookUrl:e}),type:"url"}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Open Library ID","post-kinds-for-indieweb"),value:h||"",onChange:e=>t({openlibraryId:e})})]})]}),(0,s.jsx)("div",{...$,children:(0,s.jsxs)("div",{className:"post-kinds-card h-cite",children:[(0,s.jsx)("div",{className:"cover-image",children:(0,s.jsx)(j.MediaUploadCheck,{children:(0,s.jsx)(j.MediaUpload,{onSelect:e=>{t({coverImage:e.url,coverImageAlt:e.alt||i})},allowedTypes:["image"],render:({open:e})=>(0,s.jsx)("div",{onClick:e,onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),e())},role:"button",tabIndex:0,children:(0,s.jsx)(S,{src:c,alt:p,size:"large"})})})})}),(0,s.jsxs)("div",{className:"read-info",children:[(0,s.jsxs)("span",{className:`status-badge status-${_}`,children:["to-read"===_&&(0,f.__)("To Read","post-kinds-for-indieweb"),"reading"===_&&(0,f.__)("Reading","post-kinds-for-indieweb"),"finished"===_&&(0,f.__)("Finished","post-kinds-for-indieweb"),"abandoned"===_&&(0,f.__)("Abandoned","post-kinds-for-indieweb")]}),(0,s.jsx)(j.RichText,{tagName:"h3",className:"book-title p-name",value:i,onChange:e=>t({bookTitle:e}),placeholder:(0,f.__)("Book title","post-kinds-for-indieweb")}),(0,s.jsx)(j.RichText,{tagName:"p",className:"author-name p-author h-card",value:a,onChange:e=>t({authorName:e}),placeholder:(0,f.__)("Author name","post-kinds-for-indieweb")}),"reading"===_&&R>0&&(0,s.jsx)(D,{value:R,label:`${d} of ${l} pages`}),m>0&&(0,s.jsx)("div",{className:"rating-display",children:(0,s.jsx)(C,{value:m,readonly:!0,max:5})}),(0,s.jsx)(j.RichText,{tagName:"p",className:"book-review",value:g,onChange:e=>t({review:e}),placeholder:(0,f.__)("Write a review…","post-kinds-for-indieweb")})]})]})})]}):(0,s.jsx)("div",{...$,children:(0,s.jsx)(A,{icon:o,label:(0,f.__)("Read Card","post-kinds-for-indieweb"),instructions:(0,f.__)("Add a book you're reading or have read. Search or enter details manually.","post-kinds-for-indieweb"),children:L?(0,s.jsxs)("div",{className:"search-mode",children:[(0,s.jsx)(T,{type:"book",placeholder:(0,f.__)("Search by title, author, or ISBN…","post-kinds-for-indieweb"),onSelect:M}),(0,s.jsx)(y.Button,{variant:"link",onClick:()=>I(!1),children:(0,f.__)("Enter manually","post-kinds-for-indieweb")})]}):(0,s.jsxs)("div",{className:"placeholder-actions",children:[(0,s.jsx)(y.Button,{variant:"primary",onClick:()=>I(!0),children:(0,f.__)("Search Books","post-kinds-for-indieweb")}),(0,s.jsx)(y.Button,{variant:"secondary",onClick:()=>t({bookTitle:""}),children:(0,f.__)("Enter Manually","post-kinds-for-indieweb")})]})})})},save:function({attributes:e}){const{bookTitle:t,authorName:i,isbn:a,publisher:n,publishDate:o,pageCount:r,currentPage:l,coverImage:d,coverImageAlt:c,bookUrl:p,openlibraryId:u,readStatus:h,rating:_,startedAt:m,finishedAt:b,review:k,layout:g}=e,x=j.useBlockProps.save({className:`read-card layout-${g} status-${h}`}),v=r&&l?Math.min(100,Math.round(l/r*100)):0;return(0,s.jsx)("div",{...x,children:(0,s.jsxs)("div",{className:"post-kinds-card h-cite",children:[d&&(0,s.jsx)("div",{className:"post-kinds-card__media post-kinds-card__media--portrait",children:(0,s.jsx)("img",{src:d,alt:c||`Cover of ${t}`,className:"post-kinds-card__image u-photo",loading:"lazy"})}),(0,s.jsxs)("div",{className:"post-kinds-card__content",children:[(0,s.jsx)("span",{className:`post-kinds-card__badge post-kinds-card__badge--${h}`,children:(()=>{switch(h){case"to-read":return"To Read";case"reading":return"Currently Reading";case"finished":return"Finished";case"abandoned":return"Abandoned";default:return""}})()}),t&&(0,s.jsx)("h3",{className:"post-kinds-card__title p-name",children:p?(0,s.jsx)("a",{href:p,className:"u-url",target:"_blank",rel:"noopener noreferrer",children:t}):t}),i&&(0,s.jsx)("p",{className:"post-kinds-card__subtitle",children:(0,s.jsx)("span",{className:"p-author h-card",children:(0,s.jsx)("span",{className:"p-name",children:i})})}),(n||o)&&(0,s.jsxs)("p",{className:"post-kinds-card__meta",children:[n&&(0,s.jsx)("span",{children:n}),n&&o&&", ",o&&(0,s.jsx)("span",{children:o})]}),"reading"===h&&v>0&&(0,s.jsxs)("div",{className:"post-kinds-card__progress",children:[(0,s.jsx)("div",{className:"post-kinds-card__progress-bar",children:(0,s.jsx)("div",{className:"post-kinds-card__progress-fill",style:{width:`${v}%`},role:"progressbar","aria-valuenow":v,"aria-valuemin":"0","aria-valuemax":"100"})}),(0,s.jsxs)("span",{className:"post-kinds-card__progress-text",children:[l," of ",r," pages (",v,"%)"]})]}),!_||_<=0?null:(0,s.jsxs)("div",{className:"post-kinds-card__rating p-rating","aria-label":`Rating: ${_} out of 5 stars`,children:[Array.from({length:5},(e,t)=>(0,s.jsx)("span",{className:"star "+(t<_?"filled":""),"aria-hidden":"true",children:"★"},t)),(0,s.jsxs)("span",{className:"post-kinds-card__rating-value",children:[_,"/5"]})]}),k&&(0,s.jsx)("div",{className:"post-kinds-card__notes p-content",children:(0,s.jsx)(j.RichText.Content,{tagName:"p",value:k})}),(m||b)&&(0,s.jsxs)("div",{className:"post-kinds-card__dates",children:[m&&(0,s.jsxs)("time",{className:"post-kinds-card__timestamp",dateTime:new Date(m).toISOString(),children:["Started:"," ",new Date(m).toLocaleDateString()]}),b&&("finished"===h||"abandoned"===h)&&(0,s.jsxs)("time",{className:"post-kinds-card__timestamp dt-published",dateTime:new Date(b).toISOString(),children:["Finished:"," ",new Date(b).toLocaleDateString()]})]})]}),(0,s.jsx)("data",{className:"u-read-of",value:p||"",hidden:!0}),a&&(0,s.jsx)("data",{className:"p-isbn",value:a,hidden:!0}),u&&(0,s.jsx)("data",{className:"u-uid",value:`https://openlibrary.org${u}`,hidden:!0})]})})}});const $=window.wp.data,R=window.wp.apiFetch;var M=e.n(R);const z=window.wp.editor,F="post-kinds-indieweb/post-kinds",O="_postkind_",U={selectedKind:null,autoDetectedKind:null,isAutoDetectionEnabled:!0,apiLookup:{isLoading:!1,results:[],error:null,type:null},availableKinds:[],isInitialized:!1},V="SET_KIND",E="SET_AUTO_DETECTED_KIND",H="ENABLE_AUTO_DETECTION",G="DISABLE_AUTO_DETECTION",W="START_API_LOOKUP",q="RECEIVE_API_RESULTS",K="API_LOOKUP_ERROR",J="CLEAR_API_RESULTS",Y="SET_AVAILABLE_KINDS",X="SET_INITIALIZED",Q={setKind:e=>({type:V,kind:e}),setAutoDetectedKind:e=>({type:E,kind:e}),enableAutoDetection:()=>({type:H}),disableAutoDetection:()=>({type:G}),startApiLookup:e=>({type:W,lookupType:e}),receiveApiResults:e=>({type:q,results:e}),apiLookupError:e=>({type:K,error:e}),clearApiResults:()=>({type:J}),setAvailableKinds:e=>({type:Y,kinds:e}),setInitialized:()=>({type:X}),updatePostKind:e=>async({dispatch:t,registry:i})=>{const{editPost:s}=i.dispatch(z.store),a=i.select(F).getAvailableKinds().find(t=>t.slug===e);a&&await s({kind:[a.id]}),t.setKind(e)},updateKindMeta:(e,t)=>async({registry:i})=>{const{editPost:s}=i.dispatch(z.store),a=O+e;await s({meta:{[a]:t}})},performApiLookup:(e,t)=>async({dispatch:i})=>{i.startApiLookup(e);try{const s=await M()({path:`/post-kinds-indieweb/v1/lookup/${e}?q=${encodeURIComponent(t)}`});i.receiveApiResults(s)}catch(e){i.apiLookupError(e.message||"Lookup failed")}},initialize:()=>async({dispatch:e,registry:t})=>{try{const t=await M()({path:"/wp/v2/kind?per_page=100"});e.setAvailableKinds(t)}catch(e){console.error("Failed to fetch kinds:",e)}const i=t.select(z.store).getEditedPostAttribute("kind"),s=t.select(F).getAvailableKinds();if(i&&i.length>0&&s.length>0){const t=s.find(e=>e.id===i[0]);t&&e.setKind(t.slug)}e.setInitialized()}},Z={getSelectedKind:e=>e.selectedKind,getAutoDetectedKind:e=>e.autoDetectedKind,isAutoDetectionEnabled:e=>e.isAutoDetectionEnabled,isApiLoading:e=>e.apiLookup.isLoading,getApiResults:e=>e.apiLookup.results,getApiError:e=>e.apiLookup.error,getApiLookupType:e=>e.apiLookup.type,getAvailableKinds:e=>e.availableKinds,isInitialized:e=>e.isInitialized,getKindMeta:(0,$.createRegistrySelector)(e=>(t,i)=>(e(z.store).getEditedPostAttribute("meta")||{})[O+i]||""),getAllKindMeta:(0,$.createRegistrySelector)(e=>()=>{const t=e(z.store).getEditedPostAttribute("meta")||{},i={};return Object.keys(t).forEach(e=>{if(e.startsWith(O)){const s=e.replace(O,"");i[s]=t[e]}}),i})};(0,$.createReduxStore)(F,{reducer:function(e=U,t){switch(t.type){case V:return{...e,selectedKind:t.kind};case E:return{...e,autoDetectedKind:t.kind};case H:return{...e,isAutoDetectionEnabled:!0};case G:return{...e,isAutoDetectionEnabled:!1};case W:return{...e,apiLookup:{isLoading:!0,results:[],error:null,type:t.lookupType}};case q:return{...e,apiLookup:{...e.apiLookup,isLoading:!1,results:t.results,error:null}};case K:return{...e,apiLookup:{...e.apiLookup,isLoading:!1,results:[],error:t.error}};case J:return{...e,apiLookup:{isLoading:!1,results:[],error:null,type:null}};case Y:return{...e,availableKinds:t.kinds};case X:return{...e,isInitialized:!0};default:return e}},actions:Q,selectors:Z});const ee=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"post-kinds-indieweb/checkin-card","version":"1.0.0","title":"Checkin Card","category":"post-kinds-indieweb","description":"Display a location checkin with venue details, map, and optional notes.","keywords":["checkin","location","venue","place","map","travel"],"textdomain":"post-kinds-indieweb","attributes":{"venueName":{"type":"string","source":"html","selector":".venue-name"},"venueType":{"type":"string","default":"place"},"address":{"type":"string"},"locality":{"type":"string"},"region":{"type":"string"},"country":{"type":"string"},"postalCode":{"type":"string"},"latitude":{"type":"number"},"longitude":{"type":"number"},"locationPrivacy":{"type":"string","default":"approximate","enum":["public","approximate","private"]},"osmId":{"type":"string"},"venueUrl":{"type":"string"},"foursquareId":{"type":"string"},"checkinAt":{"type":"string"},"note":{"type":"string","source":"html","selector":".checkin-note"},"photo":{"type":"string","source":"attribute","selector":".checkin-photo img","attribute":"src"},"photoAlt":{"type":"string","source":"attribute","selector":".checkin-photo img","attribute":"alt"},"showMap":{"type":"boolean","default":true},"layout":{"type":"string","default":"horizontal"}},"supports":{"html":false,"align":["wide","full"],"color":{"background":true,"text":true,"gradients":true,"link":true},"spacing":{"margin":true,"padding":true,"blockGap":true},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontFamily":true,"__experimentalFontWeight":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true},"__experimentalBorder":{"color":true,"radius":true,"width":true,"style":true,"__experimentalDefaultControls":{"color":true,"radius":true,"width":true,"style":true}},"shadow":true,"dimensions":{"minHeight":true}},"example":{"attributes":{"venueName":"Central Park","venueType":"park","locality":"New York","region":"NY","country":"United States"}},"editorStyle":"file:./editor.css"}');(0,t.registerBlockType)(ee.name,{...ee,icon:r,edit:function({attributes:e,setAttributes:t}){const{venueName:i,venueType:a,address:n,locality:o,region:l,country:d,postalCode:c,latitude:p,longitude:u,locationPrivacy:h,osmId:_,venueUrl:m,foursquareId:b,checkinAt:k,note:g,photo:x,photoAlt:v,showMap:w,layout:C}=e,[S,T]=(0,N.useState)(!1),[D,B]=(0,N.useState)(""),[L,I]=(0,N.useState)([]),[R,z]=(0,N.useState)(!1),[O,U]=(0,N.useState)(!1),[V,E]=(0,N.useState)(null),[H,G]=(0,N.useState)(!1),[W,q]=(0,N.useState)(null),[K,J]=(0,N.useState)([]),[Y,X]=(0,N.useState)(!1),[Q,Z]=(0,N.useState)(""),[ee,te]=(0,N.useState)([]),[ie,se]=(0,N.useState)(!1),[ae,ne]=(0,N.useState)(!1),oe=(0,N.useRef)(null),re=(0,j.useBlockProps)({className:`checkin-card layout-${C}`}),{metaVenueName:le,metaAddress:de,metaLocality:ce,metaRegion:pe,metaCountry:ue,metaLatitude:he,metaLongitude:_e,selectedKind:me}=(0,$.useSelect)(e=>{const t=e(F).getKindMeta;return{metaVenueName:t("checkin_name"),metaAddress:t("checkin_address"),metaLocality:t("checkin_locality"),metaRegion:t("checkin_region"),metaCountry:t("checkin_country"),metaLatitude:t("geo_latitude"),metaLongitude:t("geo_longitude"),selectedKind:e(F).getSelectedKind()}},[]),{updateKindMeta:be,updatePostKind:ke}=(0,$.useDispatch)(F);(0,N.useEffect)(()=>{ae||(me&&"checkin"===me||ke("checkin"),ne(!0))},[ae,me,ke]),(0,N.useEffect)(()=>{ae&&(i&&i!==le&&be("checkin_name",i),n&&n!==de&&be("checkin_address",n),o&&o!==ce&&be("checkin_locality",o),l&&l!==pe&&be("checkin_region",l),d&&d!==ue&&be("checkin_country",d),p&&p!==he&&be("geo_latitude",p),u&&u!==_e&&be("geo_longitude",u))},[ae,i,n,o,l,d,p,u]),(0,N.useEffect)(()=>{if(!ae)return;const e={};le&&le!==i&&(e.venueName=le),de&&de!==n&&(e.address=de),ce&&ce!==o&&(e.locality=ce),pe&&pe!==l&&(e.region=pe),ue&&ue!==d&&(e.country=ue),he&&he!==p&&(e.latitude=he),_e&&_e!==u&&(e.longitude=_e),Object.keys(e).length>0&&t(e)},[ae,le,de,ce,pe,ue,he,_e]);const ge=[{label:(0,f.__)("Place","post-kinds-for-indieweb"),value:"place"},{label:(0,f.__)("Restaurant","post-kinds-for-indieweb"),value:"restaurant"},{label:(0,f.__)("Cafe","post-kinds-for-indieweb"),value:"cafe"},{label:(0,f.__)("Bar","post-kinds-for-indieweb"),value:"bar"},{label:(0,f.__)("Hotel","post-kinds-for-indieweb"),value:"hotel"},{label:(0,f.__)("Airport","post-kinds-for-indieweb"),value:"airport"},{label:(0,f.__)("Park","post-kinds-for-indieweb"),value:"park"},{label:(0,f.__)("Museum","post-kinds-for-indieweb"),value:"museum"},{label:(0,f.__)("Theater","post-kinds-for-indieweb"),value:"theater"},{label:(0,f.__)("Store","post-kinds-for-indieweb"),value:"store"},{label:(0,f.__)("Office","post-kinds-for-indieweb"),value:"office"},{label:(0,f.__)("Home","post-kinds-for-indieweb"),value:"home"},{label:(0,f.__)("Other","post-kinds-for-indieweb"),value:"other"}],xe=[{label:(0,f.__)("Public (exact location)","post-kinds-for-indieweb"),value:"public"},{label:(0,f.__)("Approximate (city level)","post-kinds-for-indieweb"),value:"approximate"},{label:(0,f.__)("Private (hidden)","post-kinds-for-indieweb"),value:"private"}],ve=(0,N.useCallback)(function(){let e;return function(...t){clearTimeout(e),e=setTimeout(()=>{clearTimeout(e),(e=>{(async e=>{if(!e||e.trim().length<2)return I([]),void z(!1);z(!0),E(null);try{let t=`/post-kinds-indieweb/v1/location/venues?query=${encodeURIComponent(e)}`;W&&(t+=`&lat=${W.lat}&lon=${W.lng}`);const i=await M()({path:t});I(i||[]),z(!1)}catch(t){console.log("Foursquare search failed, trying Nominatim:",t);try{const t=await M()({path:`/post-kinds-indieweb/v1/location/search?query=${encodeURIComponent(e)}`});I(t||[]),z(!1)}catch(e){console.error("Nominatim fallback also failed:",e),E(e?.message||(0,f.__)("Search failed. Please try again.","post-kinds-for-indieweb")),I([]),z(!1)}}})(e)})(...t)},400)}}(),[W]),we=async()=>{if(Q&&!(Q.trim().length<2)){se(!0);try{const e=await M()({path:`/post-kinds-indieweb/v1/location/venues?query=${encodeURIComponent(Q)}`});te(e||[])}catch(e){try{const e=await M()({path:`/post-kinds-indieweb/v1/location/search?query=${encodeURIComponent(Q)}`});te(e||[])}catch(e){te([])}}finally{se(!1)}}},fe=async()=>{navigator.geolocation?(U(!0),E(null),navigator.geolocation.getCurrentPosition(async e=>{const t=e.coords.latitude,i=e.coords.longitude;q({lat:t,lng:i}),(async(e,t)=>{X(!0),E(null);try{const i=await M()({path:`/post-kinds-indieweb/v1/location/venues?lat=${e}&lon=${t}`});J(i||[])}catch(e){J([])}finally{X(!1)}})(t,i),G(!0),U(!1)},e=>{switch(U(!1),e.code){case e.PERMISSION_DENIED:E((0,f.__)("Location access was denied.","post-kinds-for-indieweb"));break;case e.POSITION_UNAVAILABLE:E((0,f.__)("Location information is unavailable.","post-kinds-for-indieweb"));break;case e.TIMEOUT:E((0,f.__)("Location request timed out.","post-kinds-for-indieweb"));break;default:E((0,f.__)("Could not detect your location.","post-kinds-for-indieweb"))}},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})):E((0,f.__)("Geolocation is not supported by your browser.","post-kinds-for-indieweb"))},je=e=>{if(e.fsq_id)t({venueName:e.name||"",address:e.address||"",locality:e.locality||"",region:e.region||"",country:e.country||"",postalCode:e.postcode||"",latitude:e.latitude||null,longitude:e.longitude||null,foursquareId:e.fsq_id||"",venueUrl:e.website||"",venueType:ye(e.category)});else{const i=e.address||{};t({venueName:e.name||e.display_name?.split(",")[0]||"",address:[i.house_number,i.road].filter(Boolean).join(" ")||i.road||"",locality:i.locality||i.city||i.town||i.village||"",region:i.region||i.state||"",country:i.country||"",postalCode:i.postcode||"",latitude:e.latitude||parseFloat(e.lat)||null,longitude:e.longitude||parseFloat(e.lon)||null,osmId:e.osm_full_id||"",venueUrl:e.extra?.website||""})}B(""),I([]),J([]),G(!1)},ye=e=>{if(!e)return"place";const t=e.toLowerCase();return t.includes("restaurant")||t.includes("food")?"restaurant":t.includes("cafe")||t.includes("coffee")?"cafe":t.includes("bar")||t.includes("pub")||t.includes("nightlife")?"bar":t.includes("hotel")||t.includes("lodging")?"hotel":t.includes("airport")?"airport":t.includes("park")||t.includes("outdoor")?"park":t.includes("museum")||t.includes("gallery")?"museum":t.includes("theater")||t.includes("cinema")?"theater":t.includes("shop")||t.includes("store")||t.includes("retail")?"store":t.includes("office")||t.includes("business")?"office":"place"},Ne=()=>{const e={place:"📍",restaurant:"🍽️",cafe:"☕",bar:"🍺",hotel:"🏨",airport:"✈️",park:"🌳",museum:"🏛️",theater:"🎭",store:"🛍️",office:"🏢",home:"🏠",other:"📌"};return e[a]||e.place};return i||o||H?H&&!i?(0,s.jsx)("div",{...re,children:(0,s.jsxs)("div",{className:"checkin-search-state",children:[(0,s.jsx)("h3",{children:W?(0,f.__)("Select a nearby venue or search","post-kinds-for-indieweb"):(0,f.__)("Search for a location","post-kinds-for-indieweb")}),V&&(0,s.jsx)(y.Notice,{status:"error",isDismissible:!0,onDismiss:()=>E(null),children:V}),(0,s.jsxs)("div",{className:"checkin-search-wrapper",children:[(0,s.jsx)(y.TextControl,{ref:oe,value:D,onChange:e=>{B(e),ve(e)},placeholder:(0,f.__)("Search for a venue or address…","post-kinds-for-indieweb"),__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),R&&(0,s.jsx)(y.Spinner,{}),L.length>0&&(0,s.jsx)("ul",{className:"checkin-search-results",role:"listbox",children:L.map((e,t)=>(0,s.jsx)("li",{children:(0,s.jsxs)("button",{type:"button",className:"checkin-result-item",onClick:()=>je(e),children:[(0,s.jsx)("strong",{className:"result-name",children:e.name||e.display_name?.split(",")[0]}),(0,s.jsx)("span",{className:"result-address",children:e.formatted_address||e.display_name}),(e.category||e.type)&&(0,s.jsx)("span",{className:"result-type",children:e.category||e.type}),e.distance&&(0,s.jsx)("span",{className:"result-distance",children:e.distance<1e3?`${e.distance}m`:`${(e.distance/1e3).toFixed(1)}km`})]})},e.fsq_id||e.place_id||t))}),!D&&K.length>0&&!R&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"nearby-venues-label",children:(0,f.__)("Nearby venues:","post-kinds-for-indieweb")}),(0,s.jsx)("ul",{className:"checkin-search-results checkin-nearby-results",role:"listbox",children:K.map((e,t)=>(0,s.jsx)("li",{children:(0,s.jsxs)("button",{type:"button",className:"checkin-result-item",onClick:()=>je(e),children:[(0,s.jsx)("strong",{className:"result-name",children:e.name}),(0,s.jsx)("span",{className:"result-address",children:e.formatted_address}),e.category&&(0,s.jsx)("span",{className:"result-type",children:e.category}),e.distance&&(0,s.jsx)("span",{className:"result-distance",children:e.distance<1e3?`${e.distance}m`:`${(e.distance/1e3).toFixed(1)}km`})]})},e.fsq_id||t))})]}),Y&&(0,s.jsxs)("div",{className:"loading-nearby",children:[(0,s.jsx)(y.Spinner,{}),(0,s.jsx)("span",{children:(0,f.__)("Finding nearby venues…","post-kinds-for-indieweb")})]})]}),(0,s.jsxs)("div",{className:"checkin-search-actions",children:[(0,s.jsx)(y.Button,{variant:"secondary",onClick:fe,disabled:O,children:O?(0,f.__)("Detecting…","post-kinds-for-indieweb"):(0,f.__)("Use Current Location","post-kinds-for-indieweb")}),(0,s.jsx)(y.Button,{variant:"tertiary",onClick:()=>{G(!1),t({venueName:""})},children:(0,f.__)("Enter Manually","post-kinds-for-indieweb")}),(0,s.jsx)(y.Button,{variant:"link",onClick:()=>G(!1),children:(0,f.__)("Cancel","post-kinds-for-indieweb")})]})]})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(j.InspectorControls,{children:[(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Privacy Settings","post-kinds-for-indieweb"),children:[(0,s.jsx)(y.RadioControl,{label:(0,f.__)("Location Privacy","post-kinds-for-indieweb"),help:(0,f.__)("Control how much location detail is shown publicly.","post-kinds-for-indieweb"),selected:h||"approximate",options:xe,onChange:e=>{("public"!==e||"public"===h||window.confirm((0,f.__)("You are about to make your precise location public. Are you sure?","post-kinds-for-indieweb")))&&t({locationPrivacy:e})}}),(0,s.jsxs)("div",{className:"privacy-explanations",children:["public"===h&&(0,s.jsx)(y.Notice,{status:"warning",isDismissible:!1,children:(0,f.__)("Your exact coordinates will be visible to everyone.","post-kinds-for-indieweb")}),"approximate"===h&&(0,s.jsx)("p",{className:"description",children:(0,f.__)("Only city/region will be shown. Coordinates are stored but not displayed.","post-kinds-for-indieweb")}),"private"===h&&(0,s.jsx)("p",{className:"description",children:(0,f.__)("Location is saved for your records but not shown publicly.","post-kinds-for-indieweb")})]})]}),(0,s.jsx)(y.PanelBody,{title:(0,f.__)("Venue Lookup","post-kinds-for-indieweb"),initialOpen:!0,children:(0,s.jsxs)("div",{className:"venue-lookup-sidebar",children:[(0,s.jsx)(y.TextControl,{label:(0,f.__)("Search for venue","post-kinds-for-indieweb"),value:Q,onChange:Z,placeholder:(0,f.__)("e.g. Denim Coffee, Chambersburg PA","post-kinds-for-indieweb"),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),we())},__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),(0,s.jsx)(y.Button,{variant:"primary",onClick:we,disabled:ie,style:{marginBottom:"12px"},children:ie?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y.Spinner,{}),(0,f.__)("Searching…","post-kinds-for-indieweb")]}):(0,f.__)("Look Up Venue","post-kinds-for-indieweb")}),ee.length>0&&(0,s.jsx)("div",{className:"sidebar-search-results",children:ee.slice(0,5).map((e,t)=>(0,s.jsxs)(y.Button,{variant:"secondary",onClick:()=>(e=>{je(e),Z(""),te([])})(e),className:"sidebar-result-button",style:{display:"block",width:"100%",textAlign:"left",marginBottom:"4px",whiteSpace:"normal",height:"auto",padding:"8px"},children:[(0,s.jsx)("strong",{children:e.name||e.display_name?.split(",")[0]}),(0,s.jsx)("br",{}),(0,s.jsx)("small",{style:{opacity:.7},children:e.formatted_address||e.display_name})]},e.fsq_id||e.place_id||t))})]})}),(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Venue Details","post-kinds-for-indieweb"),initialOpen:!!i,children:[(0,s.jsx)(y.TextControl,{label:(0,f.__)("Venue Name","post-kinds-for-indieweb"),value:i||"",onChange:e=>t({venueName:e}),__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),(0,s.jsx)(y.SelectControl,{label:(0,f.__)("Venue Type","post-kinds-for-indieweb"),value:a,options:ge,onChange:e=>t({venueType:e}),__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Street Address","post-kinds-for-indieweb"),value:n||"",onChange:e=>t({address:e}),__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("City/Locality","post-kinds-for-indieweb"),value:o||"",onChange:e=>t({locality:e}),__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("State/Region","post-kinds-for-indieweb"),value:l||"",onChange:e=>t({region:e}),__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Country","post-kinds-for-indieweb"),value:d||"",onChange:e=>t({country:e}),__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Postal Code","post-kinds-for-indieweb"),value:c||"",onChange:e=>t({postalCode:e}),__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),(0,s.jsx)(y.Button,{variant:"secondary",onClick:()=>G(!0),style:{marginTop:"12px"},children:(0,f.__)("Search Different Location","post-kinds-for-indieweb")})]}),(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Coordinates","post-kinds-for-indieweb"),initialOpen:!1,children:[(0,s.jsx)(y.TextControl,{label:(0,f.__)("Latitude","post-kinds-for-indieweb"),value:p||"",onChange:e=>t({latitude:parseFloat(e)||null}),type:"number",step:"any",__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Longitude","post-kinds-for-indieweb"),value:u||"",onChange:e=>t({longitude:parseFloat(e)||null}),type:"number",step:"any",__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),(0,s.jsx)(y.ToggleControl,{label:(0,f.__)("Show Map","post-kinds-for-indieweb"),checked:w,onChange:e=>t({showMap:e}),help:"private"===h?(0,f.__)("Map is hidden when privacy is set to private.","post-kinds-for-indieweb"):(0,f.__)("Display an embedded OpenStreetMap.","post-kinds-for-indieweb"),disabled:"private"===h,__nextHasNoMarginBottom:!0})]}),(0,s.jsx)(y.PanelBody,{title:(0,f.__)("Checkin Details","post-kinds-for-indieweb"),children:(0,s.jsxs)("div",{className:"components-base-control",children:[(0,s.jsx)("span",{className:"components-base-control__label",children:(0,f.__)("Checkin Time","post-kinds-for-indieweb")}),(0,s.jsx)(y.Button,{variant:"secondary",onClick:()=>T(!0),"aria-label":(0,f.__)("Set checkin time","post-kinds-for-indieweb"),children:k?new Date(k).toLocaleString():(0,f.__)("Set time","post-kinds-for-indieweb")}),S&&(0,s.jsx)(y.Popover,{onClose:()=>T(!1),children:(0,s.jsx)(y.DateTimePicker,{currentDate:k,onChange:e=>{t({checkinAt:e}),T(!1)}})})]})}),(0,s.jsx)(y.PanelBody,{title:(0,f.__)("Layout","post-kinds-for-indieweb"),children:(0,s.jsx)(y.SelectControl,{label:(0,f.__)("Layout Style","post-kinds-for-indieweb"),value:C,options:[{label:(0,f.__)("Horizontal","post-kinds-for-indieweb"),value:"horizontal"},{label:(0,f.__)("Vertical","post-kinds-for-indieweb"),value:"vertical"},{label:(0,f.__)("Map Focus","post-kinds-for-indieweb"),value:"map"},{label:(0,f.__)("Compact","post-kinds-for-indieweb"),value:"compact"}],onChange:e=>t({layout:e}),__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0})}),(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Links","post-kinds-for-indieweb"),initialOpen:!1,children:[(0,s.jsx)(y.TextControl,{label:(0,f.__)("Venue URL","post-kinds-for-indieweb"),value:m||"",onChange:e=>t({venueUrl:e}),type:"url",__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Foursquare ID","post-kinds-for-indieweb"),value:b||"",onChange:e=>t({foursquareId:e}),__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),_&&(0,s.jsxs)("p",{className:"description",children:[(0,f.__)("OSM ID:","post-kinds-for-indieweb")," ",_]})]})]}),(0,s.jsx)("div",{...re,children:(0,s.jsxs)("div",{className:"post-kinds-card h-entry",children:[(0,s.jsx)("div",{className:"checkin-photo",children:(0,s.jsx)(j.MediaUploadCheck,{children:(0,s.jsx)(j.MediaUpload,{onSelect:e=>{t({photo:e.url,photoAlt:e.alt||i})},allowedTypes:["image"],render:({open:e})=>(0,s.jsx)("div",{onClick:e,onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),e())},role:"button",tabIndex:0,children:x?(0,s.jsx)("img",{src:x,alt:v,className:"u-photo"}):(0,s.jsxs)("div",{className:"photo-placeholder",children:[(0,s.jsx)("span",{className:"venue-icon",children:Ne()}),(0,s.jsx)("span",{children:(0,f.__)("Add photo","post-kinds-for-indieweb")})]})})})})}),(0,s.jsxs)("div",{className:"checkin-info",children:[(0,s.jsxs)("div",{className:"checkin-header",children:[(0,s.jsxs)("span",{className:"venue-type-badge",children:[(0,s.jsx)("span",{className:"venue-icon",children:Ne()}),ge.find(e=>e.value===a)?.label]}),"private"===h&&(0,s.jsx)("span",{className:"privacy-badge private",children:(0,f.__)("Private","post-kinds-for-indieweb")}),"approximate"===h&&(0,s.jsx)("span",{className:"privacy-badge approximate",children:(0,f.__)("Approximate","post-kinds-for-indieweb")})]}),(0,s.jsx)(j.RichText,{tagName:"h3",className:"venue-name p-name",value:i,onChange:e=>t({venueName:e}),placeholder:(0,f.__)("Venue name","post-kinds-for-indieweb")}),(0,s.jsx)("div",{className:"venue-location p-location h-card",children:(0,s.jsx)(P,{address:"public"===h?n:"",locality:o,region:l,country:d})}),k&&(0,s.jsx)("time",{className:"checkin-time dt-published",dateTime:new Date(k).toISOString(),children:new Date(k).toLocaleString()}),(0,s.jsx)(j.RichText,{tagName:"p",className:"checkin-note p-content",value:g,onChange:e=>t({note:e}),placeholder:(0,f.__)("Add a note about this checkin…","post-kinds-for-indieweb")}),(0,s.jsx)(y.Button,{variant:"link",isDestructive:!0,onClick:()=>{t({venueName:"",address:"",locality:"",region:"",country:"",postalCode:"",latitude:null,longitude:null,osmId:""}),G(!0)},className:"change-venue-button",children:(0,f.__)("Change venue","post-kinds-for-indieweb")})]}),w&&p&&u&&"private"!==h&&(0,s.jsxs)("div",{className:"checkin-map",children:[(0,s.jsx)("iframe",{title:(0,f.__)("Location map","post-kinds-for-indieweb"),width:"100%",height:"200",frameBorder:"0",scrolling:"no",marginHeight:"0",marginWidth:"0",src:(()=>{if(!p||!u)return null;const e="public"===h?.01:.1;return`https://www.openstreetmap.org/export/embed.html?bbox=${u-e},${p-e},${u+e},${p+e}&layer=mapnik&marker=${p},${u}`})()}),"approximate"===h&&(0,s.jsx)("p",{className:"map-note",children:(0,f.__)("Showing approximate area. Exact location hidden.","post-kinds-for-indieweb")})]}),"private"===h&&p&&u&&(0,s.jsxs)("div",{className:"checkin-private-notice",children:[(0,s.jsx)("span",{className:"dashicons dashicons-lock"}),(0,f.__)("Location saved privately","post-kinds-for-indieweb")]})]})})]}):(0,s.jsx)("div",{...re,children:(0,s.jsxs)(A,{icon:r,label:(0,f.__)("Checkin Card","post-kinds-for-indieweb"),instructions:(0,f.__)("Check in to a location. Use your current location or search for a venue.","post-kinds-for-indieweb"),children:[V&&(0,s.jsx)(y.Notice,{status:"error",isDismissible:!0,onDismiss:()=>E(null),children:V}),(0,s.jsxs)("div",{className:"checkin-placeholder-actions",children:[(0,s.jsx)(y.Button,{variant:"primary",onClick:fe,disabled:O,icon:O?null:"location",children:O?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y.Spinner,{}),(0,f.__)("Detecting…","post-kinds-for-indieweb")]}):(0,f.__)("Use Current Location","post-kinds-for-indieweb")}),(0,s.jsx)(y.Button,{variant:"secondary",onClick:()=>G(!0),icon:"search",children:(0,f.__)("Search for Venue","post-kinds-for-indieweb")}),(0,s.jsx)(y.Button,{variant:"tertiary",onClick:()=>t({venueName:""}),children:(0,f.__)("Enter Manually","post-kinds-for-indieweb")})]})]})})},save:function({attributes:e}){const{venueName:t,venueType:i,address:a,locality:n,region:o,country:r,postalCode:l,latitude:d,longitude:c,locationPrivacy:p="approximate",osmId:u,venueUrl:h,foursquareId:_,checkinAt:m,note:b,photo:k,photoAlt:g,showMap:x,layout:v}=e,w=j.useBlockProps.save({className:`checkin-card layout-${v}`}),f="private"===p,y="public"===p,N=y&&d&&c,C=y&&a,S=x&&d&&c&&!f,T=()=>{const e={place:"📍",restaurant:"🍽️",cafe:"☕",bar:"🍺",hotel:"🏨",airport:"✈️",park:"🌳",museum:"🏛️",theater:"🎭",store:"🛍️",office:"🏢",home:"🏠",other:"📌"};return e[i]||e.place},D=()=>{const e={place:"Place",restaurant:"Restaurant",cafe:"Cafe",bar:"Bar",hotel:"Hotel",airport:"Airport",park:"Park",museum:"Museum",theater:"Theater",store:"Store",office:"Office",home:"Home",other:"Other"};return e[i]||e.place};return f?(0,s.jsx)("div",{...w,children:(0,s.jsxs)("div",{className:"post-kinds-card post-kinds-card--private h-entry",children:[k&&(0,s.jsx)("div",{className:"post-kinds-card__media",children:(0,s.jsx)("img",{src:k,alt:g||"Photo",className:"post-kinds-card__image u-photo",loading:"lazy"})}),(0,s.jsxs)("div",{className:"post-kinds-card__content",children:[(0,s.jsxs)("span",{className:"post-kinds-card__badge",children:[(0,s.jsx)("span",{className:"post-kinds-card__badge-icon","aria-hidden":"true",children:T()}),D()]}),(0,s.jsxs)("p",{className:"post-kinds-card__private-notice",children:[(0,s.jsx)("span",{className:"dashicons dashicons-lock","aria-hidden":"true"}),"Location saved privately"]}),m&&(0,s.jsx)("time",{className:"post-kinds-card__timestamp dt-published",dateTime:new Date(m).toISOString(),children:new Date(m).toLocaleString()}),b&&(0,s.jsx)("div",{className:"post-kinds-card__notes p-content",children:(0,s.jsx)(j.RichText.Content,{tagName:"p",value:b})})]})]})}):(0,s.jsx)("div",{...w,children:(0,s.jsxs)("div",{className:"post-kinds-card h-entry",children:[k&&(0,s.jsx)("div",{className:"post-kinds-card__media",children:(0,s.jsx)("img",{src:k,alt:g||`Photo at ${t}`,className:"post-kinds-card__image u-photo",loading:"lazy"})}),(0,s.jsxs)("div",{className:"post-kinds-card__content",children:[(0,s.jsxs)("span",{className:"post-kinds-card__badge",children:[(0,s.jsx)("span",{className:"post-kinds-card__badge-icon","aria-hidden":"true",children:T()}),D()]}),t&&(0,s.jsx)("h3",{className:"post-kinds-card__title",children:h?(0,s.jsx)("a",{href:h,className:"p-name u-url",target:"_blank",rel:"noopener noreferrer",children:t}):(0,s.jsx)("span",{className:"p-name",children:t})}),(0,s.jsxs)("div",{className:"post-kinds-card__location p-location h-card",children:[C&&(0,s.jsx)("span",{className:"p-street-address",children:a}),(n||o||r)&&(0,s.jsxs)("span",{className:"post-kinds-card__location-parts",children:[n&&(0,s.jsx)("span",{className:"p-locality",children:n}),n&&o&&", ",o&&(0,s.jsx)("span",{className:"p-region",children:o}),(n||o)&&r&&", ",r&&(0,s.jsx)("span",{className:"p-country-name",children:r})]}),y&&l&&(0,s.jsx)("span",{className:"p-postal-code",children:l}),N&&(0,s.jsxs)("data",{className:"p-geo h-geo",value:d&&c?`geo:${d},${c}`:null,children:[(0,s.jsx)("data",{className:"p-latitude",value:d,hidden:!0}),(0,s.jsx)("data",{className:"p-longitude",value:c,hidden:!0})]})]}),m&&(0,s.jsx)("time",{className:"post-kinds-card__timestamp dt-published",dateTime:new Date(m).toISOString(),children:new Date(m).toLocaleString()}),b&&(0,s.jsx)("div",{className:"post-kinds-card__notes p-content",children:(0,s.jsx)(j.RichText.Content,{tagName:"p",value:b})})]}),S&&(0,s.jsxs)("div",{className:"post-kinds-card__map",children:[(0,s.jsx)("iframe",{title:`Map of ${t||"location"}`,width:"100%",height:"200",frameBorder:"0",scrolling:"no",marginHeight:"0",marginWidth:"0",src:(()=>{if(!d||!c)return null;const e=y?.01:.1;return`https://www.openstreetmap.org/export/embed.html?bbox=${c-e},${d-e},${c+e},${d+e}&layer=mapnik&marker=${d},${c}`})(),loading:"lazy"}),y&&(0,s.jsx)("a",{href:`https://www.openstreetmap.org/?mlat=${d}&mlon=${c}#map=16/${d}/${c}`,className:"post-kinds-card__map-link",target:"_blank",rel:"noopener noreferrer",children:"View larger map"}),!y&&(0,s.jsx)("p",{className:"post-kinds-card__map-note",children:"Showing approximate area"})]}),(0,s.jsx)("data",{className:"u-checkin",value:h||"",hidden:!0}),_&&(0,s.jsx)("data",{className:"u-uid",value:`https://foursquare.com/v/${_}`,hidden:!0}),u&&(0,s.jsx)("data",{className:"u-uid",value:`https://www.openstreetmap.org/${u}`,hidden:!0})]})})}});const te=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"post-kinds-indieweb/rsvp-card","version":"1.0.0","title":"RSVP Card","category":"post-kinds-indieweb","description":"Display an RSVP response to an event with status, event details, and optional note.","keywords":["rsvp","event","attend","interested","maybe","response"],"textdomain":"post-kinds-indieweb","attributes":{"eventName":{"type":"string","source":"html","selector":".event-name"},"eventUrl":{"type":"string"},"eventStart":{"type":"string"},"eventEnd":{"type":"string"},"eventLocation":{"type":"string"},"eventDescription":{"type":"string"},"rsvpStatus":{"type":"string","default":"yes"},"rsvpNote":{"type":"string","source":"html","selector":".rsvp-note"},"rsvpAt":{"type":"string"},"eventImage":{"type":"string","source":"attribute","selector":".event-image img","attribute":"src"},"eventImageAlt":{"type":"string","source":"attribute","selector":".event-image img","attribute":"alt"},"rel":{"type":"string","default":""},"layout":{"type":"string","default":"horizontal"}},"supports":{"html":false,"align":["wide","full"],"color":{"background":true,"text":true,"gradients":true,"link":true},"spacing":{"margin":true,"padding":true,"blockGap":true},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontFamily":true,"__experimentalFontWeight":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true},"__experimentalBorder":{"color":true,"radius":true,"width":true,"style":true,"__experimentalDefaultControls":{"color":true,"radius":true,"width":true,"style":true}},"shadow":true,"dimensions":{"minHeight":true}},"example":{"attributes":{"eventName":"IndieWebCamp 2025","rsvpStatus":"yes","eventLocation":"Portland, OR"}},"editorStyle":"file:./editor.css"}');(0,t.registerBlockType)(te.name,{...te,icon:l,edit:function({attributes:e,setAttributes:t}){const{eventName:i,eventUrl:a,eventStart:n,eventEnd:o,eventLocation:r,eventDescription:d,rsvpStatus:c,rsvpNote:p,rsvpAt:u,eventImage:h,eventImageAlt:_,layout:m}=e,[b,k]=(0,N.useState)(!1),[g,x]=(0,N.useState)(!1),[v,w]=(0,N.useState)(!1),C=(0,j.useBlockProps)({className:`rsvp-card layout-${m} rsvp-${c}`}),S=[{label:(0,f.__)("Yes","post-kinds-for-indieweb"),value:"yes"},{label:(0,f.__)("No","post-kinds-for-indieweb"),value:"no"},{label:(0,f.__)("Maybe","post-kinds-for-indieweb"),value:"maybe"},{label:(0,f.__)("Interested","post-kinds-for-indieweb"),value:"interested"},{label:(0,f.__)("Remote","post-kinds-for-indieweb"),value:"remote"}],T=()=>{const e={yes:"✅",no:"❌",maybe:"🤔",interested:"👀",remote:"💻"};return e[c]||e.yes};return i||a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(j.InspectorControls,{children:[(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Event Details","post-kinds-for-indieweb"),children:[(0,s.jsx)(y.TextControl,{label:(0,f.__)("Event Name","post-kinds-for-indieweb"),value:i||"",onChange:e=>t({eventName:e})}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Event URL","post-kinds-for-indieweb"),value:a||"",onChange:e=>t({eventUrl:e}),type:"url"}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Location","post-kinds-for-indieweb"),value:r||"",onChange:e=>t({eventLocation:e})}),(0,s.jsx)(y.TextareaControl,{label:(0,f.__)("Description","post-kinds-for-indieweb"),value:d||"",onChange:e=>t({eventDescription:e}),rows:3})]}),(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Event Date & Time","post-kinds-for-indieweb"),children:[(0,s.jsxs)("div",{className:"components-base-control",children:[(0,s.jsx)("span",{className:"components-base-control__label",children:(0,f.__)("Start","post-kinds-for-indieweb")}),(0,s.jsx)(y.Button,{variant:"secondary",onClick:()=>k(!0),"aria-label":(0,f.__)("Set event start time","post-kinds-for-indieweb"),children:n?new Date(n).toLocaleString():(0,f.__)("Set start time","post-kinds-for-indieweb")}),b&&(0,s.jsx)(y.Popover,{onClose:()=>k(!1),children:(0,s.jsx)(y.DateTimePicker,{currentDate:n,onChange:e=>{t({eventStart:e}),k(!1)}})})]}),(0,s.jsxs)("div",{className:"components-base-control",children:[(0,s.jsx)("span",{className:"components-base-control__label",children:(0,f.__)("End","post-kinds-for-indieweb")}),(0,s.jsx)(y.Button,{variant:"secondary",onClick:()=>x(!0),"aria-label":(0,f.__)("Set event end time","post-kinds-for-indieweb"),children:o?new Date(o).toLocaleString():(0,f.__)("Set end time","post-kinds-for-indieweb")}),g&&(0,s.jsx)(y.Popover,{onClose:()=>x(!1),children:(0,s.jsx)(y.DateTimePicker,{currentDate:o,onChange:e=>{t({eventEnd:e}),x(!1)}})})]})]}),(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Your RSVP","post-kinds-for-indieweb"),children:[(0,s.jsx)(y.SelectControl,{label:(0,f.__)("Response","post-kinds-for-indieweb"),value:c,options:S,onChange:e=>t({rsvpStatus:e})}),(0,s.jsxs)("div",{className:"components-base-control",children:[(0,s.jsx)("span",{className:"components-base-control__label",children:(0,f.__)("RSVP Time","post-kinds-for-indieweb")}),(0,s.jsx)(y.Button,{variant:"secondary",onClick:()=>w(!0),"aria-label":(0,f.__)("Set RSVP time","post-kinds-for-indieweb"),children:u?new Date(u).toLocaleString():(0,f.__)("Set time","post-kinds-for-indieweb")}),v&&(0,s.jsx)(y.Popover,{onClose:()=>w(!1),children:(0,s.jsx)(y.DateTimePicker,{currentDate:u,onChange:e=>{t({rsvpAt:e}),w(!1)}})})]})]}),(0,s.jsx)(y.PanelBody,{title:(0,f.__)("Layout","post-kinds-for-indieweb"),children:(0,s.jsx)(y.SelectControl,{label:(0,f.__)("Layout Style","post-kinds-for-indieweb"),value:m,options:[{label:(0,f.__)("Horizontal","post-kinds-for-indieweb"),value:"horizontal"},{label:(0,f.__)("Vertical","post-kinds-for-indieweb"),value:"vertical"},{label:(0,f.__)("Compact","post-kinds-for-indieweb"),value:"compact"}],onChange:e=>t({layout:e})})})]}),(0,s.jsx)("div",{...C,children:(0,s.jsxs)("div",{className:"post-kinds-card h-entry",children:[(0,s.jsx)("div",{className:"event-image",children:(0,s.jsx)(j.MediaUploadCheck,{children:(0,s.jsx)(j.MediaUpload,{onSelect:e=>{t({eventImage:e.url,eventImageAlt:e.alt||i})},allowedTypes:["image"],render:({open:e})=>(0,s.jsx)("div",{onClick:e,onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),e())},role:"button",tabIndex:0,children:h?(0,s.jsx)("img",{src:h,alt:_,className:"u-photo"}):(0,s.jsxs)("div",{className:"image-placeholder",children:[(0,s.jsx)("span",{className:"rsvp-icon",children:T()}),(0,s.jsx)("span",{children:(0,f.__)("Add event image","post-kinds-for-indieweb")})]})})})})}),(0,s.jsxs)("div",{className:"rsvp-info",children:[(0,s.jsxs)("span",{className:`rsvp-status-badge status-${c}`,children:[(0,s.jsx)("span",{className:"status-icon","aria-hidden":"true",children:T()}),(()=>{const e={yes:(0,f.__)("Going","post-kinds-for-indieweb"),no:(0,f.__)("Not Going","post-kinds-for-indieweb"),maybe:(0,f.__)("Maybe","post-kinds-for-indieweb"),interested:(0,f.__)("Interested","post-kinds-for-indieweb"),remote:(0,f.__)("Attending Remotely","post-kinds-for-indieweb")};return e[c]||e.yes})()]}),(0,s.jsx)("div",{className:"rsvp-quick-buttons",children:(0,s.jsx)(y.ButtonGroup,{children:S.map(e=>(0,s.jsx)(y.Button,{variant:c===e.value?"primary":"secondary",onClick:()=>t({rsvpStatus:e.value}),isSmall:!0,children:e.label},e.value))})}),(0,s.jsx)(j.RichText,{tagName:"h3",className:"event-name p-name",value:i,onChange:e=>t({eventName:e}),placeholder:(0,f.__)("Event name","post-kinds-for-indieweb")}),n&&(0,s.jsxs)("div",{className:"event-datetime",children:[(0,s.jsx)("span",{className:"datetime-icon","aria-hidden":"true",children:"📅"}),(0,s.jsx)("time",{dateTime:new Date(n).toISOString(),children:(()=>{if(!n)return null;const e=new Date(n),t=o?new Date(o):null,i=e.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"});return t?e.toDateString()===t.toDateString()?`${i} - ${t.toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"})}`:`${i} - ${t.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}`:i})()})]}),r&&(0,s.jsxs)("div",{className:"event-location p-location",children:[(0,s.jsx)("span",{className:"location-icon","aria-hidden":"true",children:"📍"}),r]}),(0,s.jsx)(j.RichText,{tagName:"p",className:"rsvp-note p-content",value:p,onChange:e=>t({rsvpNote:e}),placeholder:(0,f.__)("Add a note about your RSVP…","post-kinds-for-indieweb")})]})]})})]}):(0,s.jsx)("div",{...C,children:(0,s.jsx)(A,{icon:l,label:(0,f.__)("RSVP Card","post-kinds-for-indieweb"),instructions:(0,f.__)("Respond to an event with your RSVP status.","post-kinds-for-indieweb"),children:(0,s.jsxs)("div",{className:"placeholder-actions",children:[(0,s.jsx)(y.TextControl,{label:(0,f.__)("Event URL","post-kinds-for-indieweb"),value:a||"",onChange:e=>t({eventUrl:e}),type:"url",placeholder:"https://..."}),(0,s.jsx)(y.Button,{variant:"primary",onClick:()=>t({eventName:""}),children:(0,f.__)("Add RSVP","post-kinds-for-indieweb")})]})})})},save:function({attributes:e}){const{eventName:t,eventUrl:i,eventStart:a,eventEnd:n,eventLocation:o,eventDescription:r,rsvpStatus:l,rsvpNote:d,rsvpAt:c,eventImage:p,eventImageAlt:u,rel:h,layout:_}=e,m=j.useBlockProps.save({className:`rsvp-card layout-${_} rsvp-${l}`}),b=h?`noopener noreferrer ${h}`:"noopener noreferrer";return(0,s.jsx)("div",{...m,children:(0,s.jsxs)("div",{className:"post-kinds-card h-entry",children:[p&&(0,s.jsx)("div",{className:"post-kinds-card__media",children:(0,s.jsx)("img",{src:p,alt:u||`${t} event`,className:"post-kinds-card__image u-photo",loading:"lazy"})}),(0,s.jsxs)("div",{className:"post-kinds-card__content",children:[(0,s.jsxs)("span",{className:`post-kinds-card__badge post-kinds-card__badge--${l}`,children:[(0,s.jsx)("span",{className:"post-kinds-card__badge-icon","aria-hidden":"true",children:(()=>{const e={yes:"✅",no:"❌",maybe:"🤔",interested:"👀",remote:"💻"};return e[l]||e.yes})()}),(0,s.jsx)("data",{className:"p-rsvp",value:l,children:(()=>{const e={yes:"Going",no:"Not Going",maybe:"Maybe",interested:"Interested",remote:"Attending Remotely"};return e[l]||e.yes})()})]}),(0,s.jsxs)("div",{className:"post-kinds-card__event p-in-reply-to h-event",children:[t&&(0,s.jsx)("h3",{className:"post-kinds-card__title",children:i?(0,s.jsx)("a",{href:i,className:"p-name u-url",target:"_blank",rel:b,children:t}):(0,s.jsx)("span",{className:"p-name",children:t})}),a&&(0,s.jsxs)("div",{className:"post-kinds-card__meta-row",children:[(0,s.jsx)("span",{className:"post-kinds-card__meta-icon","aria-hidden":"true",children:"📅"}),(0,s.jsx)("time",{className:"dt-start",dateTime:new Date(a).toISOString(),children:(()=>{if(!a)return null;const e=new Date(a),t=n?new Date(n):null,i=e.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"});return t?e.toDateString()===t.toDateString()?`${i} - ${t.toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"})}`:`${i} - ${t.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}`:i})()}),n&&(0,s.jsx)("data",{className:"dt-end",value:new Date(n).toISOString(),hidden:!0})]}),o&&(0,s.jsxs)("div",{className:"post-kinds-card__meta-row",children:[(0,s.jsx)("span",{className:"post-kinds-card__meta-icon","aria-hidden":"true",children:"📍"}),(0,s.jsx)("span",{className:"p-location",children:o})]}),r&&(0,s.jsx)("p",{className:"post-kinds-card__meta p-summary",children:r})]}),d&&(0,s.jsx)("div",{className:"post-kinds-card__notes p-content",children:(0,s.jsx)(j.RichText.Content,{tagName:"p",value:d})}),c&&(0,s.jsxs)("time",{className:"post-kinds-card__timestamp dt-published",dateTime:new Date(c).toISOString(),children:["RSVPed ",new Date(c).toLocaleDateString()]})]}),i&&(0,s.jsx)("data",{className:"u-in-reply-to",value:i,hidden:!0})]})})}});const ie=[{label:(0,f.__)("Playing","post-kinds-for-indieweb"),value:"playing",emoji:"🎮"},{label:(0,f.__)("Completed","post-kinds-for-indieweb"),value:"completed",emoji:"✅"},{label:(0,f.__)("Abandoned","post-kinds-for-indieweb"),value:"abandoned",emoji:"⏸️"},{label:(0,f.__)("Backlog","post-kinds-for-indieweb"),value:"backlog",emoji:"📋"},{label:(0,f.__)("Wishlist","post-kinds-for-indieweb"),value:"wishlist",emoji:"⭐"}],se=[{label:"— Video Games —",value:"",disabled:!0},{label:"PlayStation 5",value:"PlayStation 5"},{label:"PlayStation 4",value:"PlayStation 4"},{label:"Xbox Series X/S",value:"Xbox Series X/S"},{label:"Xbox One",value:"Xbox One"},{label:"Nintendo Switch",value:"Nintendo Switch"},{label:"Nintendo 3DS",value:"Nintendo 3DS"},{label:"Steam Deck",value:"Steam Deck"},{label:"— Computer/Mobile —",value:"",disabled:!0},{label:"Windows",value:"Windows"},{label:"Mac",value:"Mac"},{label:"Linux",value:"Linux"},{label:"iOS",value:"iOS"},{label:"Android",value:"Android"},{label:"— Tabletop —",value:"",disabled:!0},{label:"Board Game",value:"Board Game"},{label:"Card Game",value:"Card Game"},{label:"Tabletop RPG",value:"Tabletop RPG"},{label:"Miniatures",value:"Miniatures"},{label:"Dice Game",value:"Dice Game"},{label:"— Other —",value:"",disabled:!0},{label:"Other (type below)",value:"other"}],ae={playing:"Playing",completed:"Completed",abandoned:"Abandoned",backlog:"Backlog",wishlist:"Wishlist"},ne=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"post-kinds-indieweb/play-card","version":"1.0.0","title":"Play Card","category":"post-kinds-indieweb","description":"Display a game you played with cover art, platform, status, and rating.","keywords":["play","game","gaming","video game","board game"],"textdomain":"post-kinds-indieweb","attributes":{"title":{"type":"string","source":"html","selector":".game-title"},"platform":{"type":"string"},"cover":{"type":"string","source":"attribute","selector":".game-cover img","attribute":"src"},"coverAlt":{"type":"string","source":"attribute","selector":".game-cover img","attribute":"alt"},"status":{"type":"string","default":"playing","enum":["playing","completed","abandoned","backlog","wishlist"]},"hoursPlayed":{"type":"number","default":0},"rating":{"type":"number","default":0},"playedAt":{"type":"string"},"review":{"type":"string","source":"html","selector":".game-review"},"gameUrl":{"type":"string"},"bggId":{"type":"string"},"rawgId":{"type":"string"},"steamId":{"type":"string"},"officialUrl":{"type":"string"},"purchaseUrl":{"type":"string"},"layout":{"type":"string","default":"horizontal"}},"supports":{"html":false,"align":["wide","full"],"color":{"background":true,"text":true,"gradients":true,"link":true},"spacing":{"margin":true,"padding":true,"blockGap":true},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontFamily":true,"__experimentalFontWeight":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true},"__experimentalBorder":{"color":true,"radius":true,"width":true,"style":true,"__experimentalDefaultControls":{"color":true,"radius":true,"width":true,"style":true}},"shadow":true,"dimensions":{"minHeight":true}},"example":{"attributes":{"title":"The Legend of Zelda: Breath of the Wild","platform":"Nintendo Switch","status":"completed","rating":5,"hoursPlayed":120}}}'),oe={playing:"Playing",completed:"Completed",abandoned:"Abandoned",backlog:"Backlog",wishlist:"Wishlist"},re=[{attributes:{...ne.attributes,developer:{type:"string"},publisher:{type:"string"},releaseYear:{type:"string"}},save:({attributes:e})=>{const{title:t,platform:i,cover:a,coverAlt:n,status:o,hoursPlayed:r,rating:l,playedAt:d,review:c,gameUrl:p,bggId:u,rawgId:h,developer:_,publisher:m,releaseYear:b,layout:k}=e,g=j.useBlockProps.save({className:`play-card layout-${k}`});return(0,s.jsx)("div",{...g,children:(0,s.jsxs)("div",{className:"post-kinds-card h-cite",children:[a&&(0,s.jsx)("div",{className:"post-kinds-card__media",children:(0,s.jsx)("img",{src:a,alt:n||t,className:"post-kinds-card__image u-photo",loading:"lazy"})}),(0,s.jsxs)("div",{className:"post-kinds-card__content",children:[(0,s.jsxs)("div",{className:"post-kinds-card__badges",children:[o&&(0,s.jsx)("span",{className:`post-kinds-card__badge post-kinds-card__badge--${o}`,children:oe[o]||o}),i&&(0,s.jsx)("span",{className:"post-kinds-card__badge",children:i})]}),t&&(0,s.jsx)("h3",{className:"post-kinds-card__title p-name",children:p?(0,s.jsx)("a",{href:p,className:"u-url",target:"_blank",rel:"noopener noreferrer",children:t}):t}),_&&(0,s.jsx)("p",{className:"post-kinds-card__subtitle",children:(0,s.jsx)("span",{className:"p-author h-card",children:(0,s.jsx)("span",{className:"p-name",children:_})})}),(m||b)&&(0,s.jsxs)("p",{className:"post-kinds-card__meta",children:[m,b&&(0,s.jsxs)("span",{children:[" (",b,")"]})]}),r>0&&(0,s.jsxs)("p",{className:"post-kinds-card__meta",children:[(0,s.jsx)("strong",{children:r})," hours played"]}),!l||l<=0?null:(0,s.jsxs)("div",{className:"post-kinds-card__rating p-rating","aria-label":`Rating: ${l} out of 5 stars`,children:[Array.from({length:5},(e,t)=>(0,s.jsx)("span",{className:"star "+(t<l?"filled":""),"aria-hidden":"true",children:"★"},t)),(0,s.jsxs)("span",{className:"post-kinds-card__rating-value",children:[l,"/5"]})]}),c&&(0,s.jsx)("p",{className:"post-kinds-card__notes p-content",children:c}),d&&(0,s.jsx)("time",{className:"post-kinds-card__timestamp dt-published",dateTime:new Date(d).toISOString(),children:new Date(d).toLocaleString()})]}),(0,s.jsx)("data",{className:"u-play-of",value:p||"",hidden:!0}),u&&(0,s.jsx)("data",{className:"u-uid",value:`https://boardgamegeek.com/boardgame/${u}`,hidden:!0}),h&&(0,s.jsx)("data",{className:"u-uid",value:`https://rawg.io/games/${h}`,hidden:!0})]})})},migrate(e){const{developer:t,publisher:i,releaseYear:s,...a}=e;return a}}];(0,t.registerBlockType)(ne.name,{...ne,icon:_,edit:function({attributes:e,setAttributes:t}){const{title:i,platform:a,cover:n,coverAlt:o,status:r,hoursPlayed:l,rating:d,review:c,gameUrl:p,bggId:u,rawgId:h,steamId:_,officialUrl:m,purchaseUrl:b}=e,[k,g]=(0,N.useState)(!1),[x,v]=(0,N.useState)(!1),w=se.some(e=>e.value===a&&"other"!==e.value&&""!==e.value),S=(0,j.useBlockProps)({className:"play-card-block"}),{editPost:D}=(0,$.useDispatch)("core/editor"),{currentKind:A,postMeta:P}=(0,$.useSelect)(e=>{const t=e("core/editor").getEditedPostAttribute("indieblocks_kind"),i=e("core/editor").getEditedPostAttribute("meta")||{};return{currentKind:t&&t.length>0?t[0]:null,postMeta:i}},[]);(0,N.useEffect)(()=>{A||wp.apiFetch({path:"/wp/v2/kind?slug=play"}).then(e=>{e&&e.length>0&&D({indieblocks_kind:[e[0].id]})}).catch(()=>{})},[]),(0,N.useEffect)(()=>{var e,s,o,c,p,k,g,x,v,w,f;const j={},y=null!==(e=P._postkind_play_title)&&void 0!==e?e:"",N=null!==(s=P._postkind_play_platform)&&void 0!==s?s:"",C=null!==(o=P._postkind_play_cover)&&void 0!==o?o:"",S=null!==(c=P._postkind_play_status)&&void 0!==c?c:"",T=null!==(p=P._postkind_play_hours)&&void 0!==p?p:0,D=null!==(k=P._postkind_play_rating)&&void 0!==k?k:0,A=null!==(g=P._postkind_play_bgg_id)&&void 0!==g?g:"",B=null!==(x=P._postkind_play_rawg_id)&&void 0!==x?x:"",L=null!==(v=P._postkind_play_steam_id)&&void 0!==v?v:"",I=null!==(w=P._postkind_play_official_url)&&void 0!==w?w:"",$=null!==(f=P._postkind_play_purchase_url)&&void 0!==f?f:"";y!==(i||"")&&(j.title=y),N!==(a||"")&&(j.platform=N),C!==(n||"")&&(j.cover=C),S!==(r||"")&&(j.status=S),T!==(l||0)&&(j.hoursPlayed=T),D!==(d||0)&&(j.rating=D),A!==(u||"")&&(j.bggId=A),B!==(h||"")&&(j.rawgId=B),L!==(_||"")&&(j.steamId=L),I!==(m||"")&&(j.officialUrl=I),$!==(b||"")&&(j.purchaseUrl=$),Object.keys(j).length>0&&t(j)},[P._postkind_play_title,P._postkind_play_platform,P._postkind_play_cover,P._postkind_play_status,P._postkind_play_hours,P._postkind_play_rating,P._postkind_play_bgg_id,P._postkind_play_rawg_id,P._postkind_play_steam_id,P._postkind_play_official_url,P._postkind_play_purchase_url]),(0,N.useEffect)(()=>{var e,t,s,o,c,p,k,g,x,v,w;const f={};(i||"")!==(null!==(e=P._postkind_play_title)&&void 0!==e?e:"")&&(f._postkind_play_title=i||""),(a||"")!==(null!==(t=P._postkind_play_platform)&&void 0!==t?t:"")&&(f._postkind_play_platform=a||""),(n||"")!==(null!==(s=P._postkind_play_cover)&&void 0!==s?s:"")&&(f._postkind_play_cover=n||""),(r||"")!==(null!==(o=P._postkind_play_status)&&void 0!==o?o:"")&&(f._postkind_play_status=r||""),(l||0)!==(null!==(c=P._postkind_play_hours)&&void 0!==c?c:0)&&(f._postkind_play_hours=l||0),(d||0)!==(null!==(p=P._postkind_play_rating)&&void 0!==p?p:0)&&(f._postkind_play_rating=d||0),(u||"")!==(null!==(k=P._postkind_play_bgg_id)&&void 0!==k?k:"")&&(f._postkind_play_bgg_id=u||""),(h||"")!==(null!==(g=P._postkind_play_rawg_id)&&void 0!==g?g:"")&&(f._postkind_play_rawg_id=h||""),(_||"")!==(null!==(x=P._postkind_play_steam_id)&&void 0!==x?x:"")&&(f._postkind_play_steam_id=_||""),(m||"")!==(null!==(v=P._postkind_play_official_url)&&void 0!==v?v:"")&&(f._postkind_play_official_url=m||""),(b||"")!==(null!==(w=P._postkind_play_purchase_url)&&void 0!==w?w:"")&&(f._postkind_play_purchase_url=b||""),Object.keys(f).length>0&&D({meta:f})},[i,a,n,r,l,d,u,h,_,m,b]);const B=e=>{let i="";e.platforms&&(i=Array.isArray(e.platforms)?e.platforms[0]:e.platforms),t({title:e.title||e.name||"",cover:e.cover||e.image||e.thumbnail||e.background_image||"",coverAlt:e.title||e.name||"",platform:i,gameUrl:e.url||"",bggId:"bgg"===e.source?String(e.id):"",rawgId:"rawg"===e.source?String(e.id):""}),g(!1)},L=e=>{e.stopPropagation(),t({cover:"",coverAlt:""})},I=ie.map(e=>({label:`${e.emoji} ${e.label}`,value:e.value}));return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(j.InspectorControls,{children:[(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Find Game","post-kinds-for-indieweb"),initialOpen:!i,children:[(0,s.jsx)("p",{className:"components-base-control__help",style:{marginBottom:"12px"},children:(0,f.__)("Search for your game on these sites, then paste the URL below:","post-kinds-for-indieweb")}),(0,s.jsxs)("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[(0,s.jsx)(y.ExternalLink,{href:`https://boardgamegeek.com/geeksearch.php?action=search&objecttype=boardgame&q=${encodeURIComponent(i||"")}`,style:{display:"inline-flex",alignItems:"center",gap:"4px"},children:(0,f.__)("BoardGameGeek","post-kinds-for-indieweb")}),(0,s.jsx)(y.ExternalLink,{href:`https://videogamegeek.com/geeksearch.php?action=search&objecttype=videogame&q=${encodeURIComponent(i||"")}`,style:{display:"inline-flex",alignItems:"center",gap:"4px"},children:(0,f.__)("VideoGameGeek","post-kinds-for-indieweb")})]}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Paste BGG/VGG URL","post-kinds-for-indieweb"),value:p||"",onChange:e=>{t({gameUrl:e});const i=e.match(/(?:boardgamegeek|videogamegeek)\.com\/(?:boardgame|boardgameexpansion|videogame|videogameexpansion|rpgitem|thing)\/(\d+)(?:\/([^/?#]+))?/);if(i){const e={bggId:i[1]};if(i[2]){const t=i[2].split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");e.title=t}t(e)}},placeholder:"https://boardgamegeek.com/boardgame/13/catan",help:(0,f.__)("The game ID will be extracted automatically.","post-kinds-for-indieweb")}),u&&(0,s.jsxs)("p",{style:{marginTop:"4px",color:"var(--wp-components-color-accent, #007cba)"},children:[(0,f.__)("BGG ID:","post-kinds-for-indieweb")," ",u]}),(0,s.jsx)("hr",{style:{margin:"16px 0"}}),(0,s.jsx)("p",{className:"components-base-control__help",style:{marginBottom:"8px"},children:(0,f.__)("Or search directly (requires API token):","post-kinds-for-indieweb")}),(0,s.jsx)(T,{type:"game",placeholder:(0,f.__)("Search BoardGameGeek…","post-kinds-for-indieweb"),onSelect:B})]}),(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Game Details","post-kinds-for-indieweb"),initialOpen:!0,children:[(0,s.jsx)(y.TextControl,{label:(0,f.__)("Title","post-kinds-for-indieweb"),value:i||"",onChange:e=>t({title:e}),placeholder:(0,f.__)("Game title","post-kinds-for-indieweb")}),(0,s.jsx)(y.SelectControl,{label:(0,f.__)("Status","post-kinds-for-indieweb"),value:r||"playing",options:I,onChange:e=>t({status:e})}),(0,s.jsx)(y.SelectControl,{label:(0,f.__)("Platform","post-kinds-for-indieweb"),value:w?a:a?"other":"",options:se,onChange:e=>{"other"===e?(v(!0),t({platform:""})):(v(!1),t({platform:e}))}}),(x||a&&!w)&&(0,s.jsx)(y.TextControl,{label:(0,f.__)("Custom Platform","post-kinds-for-indieweb"),value:a||"",onChange:e=>t({platform:e}),placeholder:(0,f.__)("Enter platform name…","post-kinds-for-indieweb")}),(0,s.jsx)(y.RangeControl,{label:(0,f.__)("Hours Played","post-kinds-for-indieweb"),value:l||0,onChange:e=>t({hoursPlayed:e}),min:0,max:500,step:.5}),(0,s.jsx)(y.RangeControl,{label:(0,f.__)("Rating","post-kinds-for-indieweb"),value:d||0,onChange:e=>t({rating:e}),min:0,max:5,step:1})]}),(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Links","post-kinds-for-indieweb"),initialOpen:!1,children:[(0,s.jsx)(y.TextControl,{label:(0,f.__)("Official Website","post-kinds-for-indieweb"),value:m||"",onChange:e=>t({officialUrl:e}),type:"url",placeholder:"https://...",help:(0,f.__)("Link to the official game website.","post-kinds-for-indieweb")}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Purchase Link","post-kinds-for-indieweb"),value:b||"",onChange:e=>t({purchaseUrl:e}),type:"url",placeholder:"https://amazon.com/...",help:(0,f.__)("Link to buy the game (Amazon, Target, etc).","post-kinds-for-indieweb")}),(0,s.jsx)("hr",{style:{margin:"16px 0"}}),(0,s.jsx)("p",{className:"components-base-control__help",style:{marginBottom:"8px"},children:(0,f.__)("Database IDs (auto-filled from BGG URL):","post-kinds-for-indieweb")}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("BGG/VGG URL","post-kinds-for-indieweb"),value:p||"",onChange:e=>t({gameUrl:e}),type:"url"}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("BoardGameGeek ID","post-kinds-for-indieweb"),value:u||"",onChange:e=>t({bggId:e})})]}),(0,s.jsx)(y.PanelBody,{title:(0,f.__)("Review","post-kinds-for-indieweb"),initialOpen:!1,children:(0,s.jsx)(y.TextControl,{label:(0,f.__)("Review","post-kinds-for-indieweb"),value:c||"",onChange:e=>t({review:e}),placeholder:(0,f.__)("Your thoughts…","post-kinds-for-indieweb")})})]}),(0,s.jsx)("div",{...S,children:(0,s.jsxs)("div",{className:"post-kinds-card-wrapper",children:[k&&(0,s.jsxs)("div",{className:"post-kinds-card__search-bar",children:[(0,s.jsx)(T,{type:"game",placeholder:(0,f.__)("Search for a game…","post-kinds-for-indieweb"),onSelect:B}),(0,s.jsx)("button",{type:"button",className:"post-kinds-card__search-close",onClick:()=>g(!1),children:"×"})]}),(0,s.jsxs)("div",{className:"post-kinds-card",children:[(0,s.jsx)("div",{className:"post-kinds-card__media",style:{width:"120px"},children:(0,s.jsx)(j.MediaUploadCheck,{children:(0,s.jsx)(j.MediaUpload,{onSelect:e=>{t({cover:e.url,coverAlt:e.alt||i||(0,f.__)("Game cover","post-kinds-for-indieweb")})},allowedTypes:["image"],render:({open:e})=>(0,s.jsx)("button",{type:"button",className:"post-kinds-card__media-button",onClick:e,style:{aspectRatio:"3/4"},children:n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("img",{src:n,alt:o||i,className:"post-kinds-card__image"}),(0,s.jsx)("button",{type:"button",className:"post-kinds-card__media-remove",onClick:L,"aria-label":(0,f.__)("Remove cover","post-kinds-for-indieweb"),children:"×"})]}):(0,s.jsxs)("div",{className:"post-kinds-card__media-placeholder",children:[(0,s.jsx)("span",{className:"post-kinds-card__media-icon",children:"🎮"}),(0,s.jsx)("span",{className:"post-kinds-card__media-text",children:(0,f.__)("Add Cover","post-kinds-for-indieweb")})]})})})})}),(0,s.jsxs)("div",{className:"post-kinds-card__content",children:[(0,s.jsxs)("div",{className:"post-kinds-card__header-row",children:[(0,s.jsx)("div",{className:"post-kinds-card__badges-row",children:(0,s.jsx)("select",{className:"post-kinds-card__type-select",value:r||"playing",onChange:e=>t({status:e.target.value}),children:ie.map(e=>(0,s.jsxs)("option",{value:e.value,children:[e.emoji," ",e.label]},e.value))})}),(0,s.jsx)("button",{type:"button",className:"post-kinds-card__action-button",onClick:()=>g(!0),title:(0,f.__)("Search for game","post-kinds-for-indieweb"),children:"🔍"})]}),(0,s.jsx)(j.RichText,{tagName:"h3",className:"post-kinds-card__title",value:i,onChange:e=>t({title:e}),placeholder:(0,f.__)("Game title…","post-kinds-for-indieweb")}),(0,s.jsxs)("div",{className:"post-kinds-card__input-row",children:[(0,s.jsx)("span",{className:"post-kinds-card__input-icon",children:"🎮"}),(0,s.jsx)("input",{type:"text",className:"post-kinds-card__input",value:a||"",onChange:e=>t({platform:e.target.value}),placeholder:(0,f.__)("Platform (PC, Switch…)","post-kinds-for-indieweb")})]}),(0,s.jsxs)("div",{className:"post-kinds-card__input-row",children:[(0,s.jsx)("span",{className:"post-kinds-card__input-icon",children:"⏱️"}),(0,s.jsx)("input",{type:"number",className:"post-kinds-card__input",value:l||"",onChange:e=>t({hoursPlayed:parseFloat(e.target.value)||0}),placeholder:"0",min:"0",step:"0.5",style:{maxWidth:"80px"}}),(0,s.jsx)("span",{children:(0,f.__)("hours","post-kinds-for-indieweb")})]}),(0,s.jsx)("div",{className:"post-kinds-card__rating",children:(0,s.jsx)(C,{value:d,onChange:e=>t({rating:e}),max:5})}),(0,s.jsx)(j.RichText,{tagName:"p",className:"post-kinds-card__notes",value:c,onChange:e=>t({review:e}),placeholder:(0,f.__)("Your thoughts…","post-kinds-for-indieweb")}),(0,s.jsxs)("div",{className:"post-kinds-card__links",children:[p&&(0,s.jsx)("a",{href:p,className:"post-kinds-card__link",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.preventDefault(),children:(0,f.__)("View on BGG","post-kinds-for-indieweb")}),m&&(0,s.jsx)("a",{href:m,className:"post-kinds-card__link",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.preventDefault(),children:(0,f.__)("Official Site","post-kinds-for-indieweb")}),b&&(0,s.jsx)("a",{href:b,className:"post-kinds-card__link post-kinds-card__link--buy",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.preventDefault(),children:(0,f.__)("Buy","post-kinds-for-indieweb")})]}),!p&&!m&&!b&&(0,s.jsxs)("div",{className:"post-kinds-card__input-row",style:{flexWrap:"wrap",gap:"8px"},children:[(0,s.jsx)("input",{type:"url",className:"post-kinds-card__input post-kinds-card__input--url",value:m||"",onChange:e=>t({officialUrl:e.target.value}),placeholder:(0,f.__)("Official website URL…","post-kinds-for-indieweb"),style:{flex:"1",minWidth:"150px"}}),(0,s.jsx)("input",{type:"url",className:"post-kinds-card__input post-kinds-card__input--url",value:b||"",onChange:e=>t({purchaseUrl:e.target.value}),placeholder:(0,f.__)("Purchase URL…","post-kinds-for-indieweb"),style:{flex:"1",minWidth:"150px"}})]})]})]})]})})]})},save:function({attributes:e}){const{title:t,platform:i,cover:a,coverAlt:n,status:o,hoursPlayed:r,rating:l,playedAt:d,review:c,gameUrl:p,bggId:u,rawgId:h,officialUrl:_,purchaseUrl:m,layout:b}=e,k=j.useBlockProps.save({className:`play-card layout-${b}`});return(0,s.jsx)("div",{...k,children:(0,s.jsxs)("div",{className:"post-kinds-card h-cite",children:[a&&(0,s.jsx)("div",{className:"post-kinds-card__media",children:(0,s.jsx)("img",{src:a,alt:n||t,className:"post-kinds-card__image u-photo",loading:"lazy"})}),(0,s.jsxs)("div",{className:"post-kinds-card__content",children:[(0,s.jsxs)("div",{className:"post-kinds-card__badges",children:[o&&(0,s.jsx)("span",{className:`post-kinds-card__badge post-kinds-card__badge--${o}`,children:ae[o]||o}),i&&(0,s.jsx)("span",{className:"post-kinds-card__badge",children:i})]}),t&&(0,s.jsx)("h3",{className:"post-kinds-card__title p-name",children:p?(0,s.jsx)("a",{href:p,className:"u-url",target:"_blank",rel:"noopener noreferrer",children:t}):t}),r>0&&(0,s.jsxs)("p",{className:"post-kinds-card__meta",children:[(0,s.jsx)("strong",{children:r})," hours played"]}),!l||l<=0?null:(0,s.jsxs)("div",{className:"post-kinds-card__rating p-rating","aria-label":`Rating: ${l} out of 5 stars`,children:[Array.from({length:5},(e,t)=>(0,s.jsx)("span",{className:"star "+(t<l?"filled":""),"aria-hidden":"true",children:"★"},t)),(0,s.jsxs)("span",{className:"post-kinds-card__rating-value",children:[l,"/5"]})]}),c&&(0,s.jsx)("p",{className:"post-kinds-card__notes p-content",children:c}),(_||m||p)&&(0,s.jsxs)("div",{className:"post-kinds-card__links",children:[p&&(0,s.jsx)("a",{href:p,className:"post-kinds-card__link",target:"_blank",rel:"noopener noreferrer",children:"View on BGG"}),_&&(0,s.jsx)("a",{href:_,className:"post-kinds-card__link",target:"_blank",rel:"noopener noreferrer",children:"Official Site"}),m&&(0,s.jsx)("a",{href:m,className:"post-kinds-card__link post-kinds-card__link--buy",target:"_blank",rel:"noopener noreferrer",children:"Buy"})]}),d&&(0,s.jsx)("time",{className:"post-kinds-card__timestamp dt-published",dateTime:new Date(d).toISOString(),children:new Date(d).toLocaleString()})]}),(0,s.jsx)("data",{className:"u-play-of",value:p||"",hidden:!0}),u&&(0,s.jsx)("data",{className:"u-uid",value:`https://boardgamegeek.com/boardgame/${u}`,hidden:!0}),h&&(0,s.jsx)("data",{className:"u-uid",value:`https://rawg.io/games/${h}`,hidden:!0})]})})},deprecated:re});const le=[{label:(0,f.__)("Select cuisine…","post-kinds-for-indieweb"),value:"",emoji:"🍽️"},{label:(0,f.__)("American","post-kinds-for-indieweb"),value:"american",emoji:"🍔"},{label:(0,f.__)("Chinese","post-kinds-for-indieweb"),value:"chinese",emoji:"🥡"},{label:(0,f.__)("French","post-kinds-for-indieweb"),value:"french",emoji:"🥐"},{label:(0,f.__)("Indian","post-kinds-for-indieweb"),value:"indian",emoji:"🍛"},{label:(0,f.__)("Italian","post-kinds-for-indieweb"),value:"italian",emoji:"🍝"},{label:(0,f.__)("Japanese","post-kinds-for-indieweb"),value:"japanese",emoji:"🍱"},{label:(0,f.__)("Korean","post-kinds-for-indieweb"),value:"korean",emoji:"🍜"},{label:(0,f.__)("Mexican","post-kinds-for-indieweb"),value:"mexican",emoji:"🌮"},{label:(0,f.__)("Thai","post-kinds-for-indieweb"),value:"thai",emoji:"🍲"},{label:(0,f.__)("Vietnamese","post-kinds-for-indieweb"),value:"vietnamese",emoji:"🍜"},{label:(0,f.__)("Mediterranean","post-kinds-for-indieweb"),value:"mediterranean",emoji:"🥙"},{label:(0,f.__)("Seafood","post-kinds-for-indieweb"),value:"seafood",emoji:"🦐"},{label:(0,f.__)("Breakfast","post-kinds-for-indieweb"),value:"breakfast",emoji:"🥞"},{label:(0,f.__)("Dessert","post-kinds-for-indieweb"),value:"dessert",emoji:"🍰"},{label:(0,f.__)("Other","post-kinds-for-indieweb"),value:"other",emoji:"🍽️"}],de=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"post-kinds-indieweb/eat-card","version":"1.0.0","title":"Eat Card","category":"post-kinds-indieweb","description":"Display a meal or food you ate with photo, restaurant, cuisine, and rating.","keywords":["eat","food","meal","restaurant","dining"],"textdomain":"post-kinds-indieweb","attributes":{"name":{"type":"string","source":"html","selector":".food-name"},"restaurant":{"type":"string"},"cuisine":{"type":"string"},"photo":{"type":"string","source":"attribute","selector":".food-photo img","attribute":"src"},"photoAlt":{"type":"string","source":"attribute","selector":".food-photo img","attribute":"alt"},"rating":{"type":"number","default":0},"ateAt":{"type":"string"},"notes":{"type":"string","source":"html","selector":".food-notes"},"restaurantUrl":{"type":"string"},"locationName":{"type":"string"},"locationAddress":{"type":"string"},"locationLocality":{"type":"string"},"locationRegion":{"type":"string"},"locationCountry":{"type":"string"},"geoLatitude":{"type":"number","default":0},"geoLongitude":{"type":"number","default":0},"layout":{"type":"string","default":"horizontal"}},"supports":{"html":false,"align":["wide","full"],"color":{"background":true,"text":true,"gradients":true,"link":true},"spacing":{"margin":true,"padding":true,"blockGap":true},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontFamily":true,"__experimentalFontWeight":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true},"__experimentalBorder":{"color":true,"radius":true,"width":true,"style":true,"__experimentalDefaultControls":{"color":true,"radius":true,"width":true,"style":true}},"shadow":true,"dimensions":{"minHeight":true}},"example":{"attributes":{"name":"Margherita Pizza","restaurant":"Pizzeria Napoletana","cuisine":"Italian","rating":5}}}');(0,t.registerBlockType)(de.name,{...de,icon:m,edit:function({attributes:e,setAttributes:t}){const{name:i,restaurant:a,cuisine:n,photo:o,photoAlt:r,rating:l,notes:d,restaurantUrl:c,locationName:p,locationAddress:u,locationLocality:h,locationRegion:_,locationCountry:m,geoLatitude:b,geoLongitude:k}=e,g=(0,j.useBlockProps)({className:"eat-card-block"}),{editPost:x}=(0,$.useDispatch)("core/editor"),v=(0,$.useSelect)(e=>{const t=e("core/editor").getEditedPostAttribute("indieblocks_kind");return t&&t.length>0?t[0]:null},[]);(0,N.useEffect)(()=>{v||wp.apiFetch({path:"/wp/v2/kind?slug=eat"}).then(e=>{e&&e.length>0&&x({indieblocks_kind:[e[0].id]})}).catch(()=>{})},[]),(0,N.useEffect)(()=>{const e={};void 0!==i&&(e._postkind_eat_name=i||""),void 0!==n&&(e._postkind_eat_cuisine=n||""),void 0!==a&&(e._postkind_eat_restaurant=a||""),void 0!==c&&(e._postkind_eat_restaurant_url=c||""),void 0!==o&&(e._postkind_eat_photo=o||""),void 0!==l&&(e._postkind_eat_rating=l||0),void 0!==p&&(e._postkind_eat_location_name=p||""),void 0!==u&&(e._postkind_eat_location_address=u||""),void 0!==h&&(e._postkind_eat_location_locality=h||""),void 0!==_&&(e._postkind_eat_location_region=_||""),void 0!==m&&(e._postkind_eat_location_country=m||""),void 0!==b&&(e._postkind_eat_geo_latitude=b||0),void 0!==k&&(e._postkind_eat_geo_longitude=k||0),Object.keys(e).length>0&&x({meta:e})},[i,n,a,c,o,l,p,u,h,_,m,b,k]);const w=e=>{e.stopPropagation(),t({photo:"",photoAlt:""})},S=(T=n,le.find(e=>e.value===T)||le[0]);var T;const D=le.map(e=>({label:`${e.emoji} ${e.label}`,value:e.value}));return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(j.InspectorControls,{children:[(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Meal Details","post-kinds-for-indieweb"),initialOpen:!0,children:[(0,s.jsx)(y.TextControl,{label:(0,f.__)("Dish Name","post-kinds-for-indieweb"),value:i||"",onChange:e=>t({name:e}),placeholder:(0,f.__)("What did you eat?","post-kinds-for-indieweb")}),(0,s.jsx)(y.SelectControl,{label:(0,f.__)("Cuisine","post-kinds-for-indieweb"),value:n||"",options:D,onChange:e=>t({cuisine:e})}),(0,s.jsx)(y.RangeControl,{label:(0,f.__)("Rating","post-kinds-for-indieweb"),value:l||0,onChange:e=>t({rating:e}),min:0,max:5,step:1})]}),(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Location","post-kinds-for-indieweb"),initialOpen:!0,children:[(0,s.jsx)(y.TextControl,{label:(0,f.__)("Restaurant/Venue Name","post-kinds-for-indieweb"),value:p||"",onChange:e=>t({locationName:e}),placeholder:(0,f.__)("Where did you eat?","post-kinds-for-indieweb")}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Address","post-kinds-for-indieweb"),value:u||"",onChange:e=>t({locationAddress:e})}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("City","post-kinds-for-indieweb"),value:h||"",onChange:e=>t({locationLocality:e})}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("State/Region","post-kinds-for-indieweb"),value:_||"",onChange:e=>t({locationRegion:e})}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Country","post-kinds-for-indieweb"),value:m||"",onChange:e=>t({locationCountry:e})}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Website URL","post-kinds-for-indieweb"),value:c||"",onChange:e=>t({restaurantUrl:e}),type:"url"}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Latitude","post-kinds-for-indieweb"),value:b||"",onChange:e=>t({geoLatitude:parseFloat(e)||0}),type:"number",step:"0.0000001"}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Longitude","post-kinds-for-indieweb"),value:k||"",onChange:e=>t({geoLongitude:parseFloat(e)||0}),type:"number",step:"0.0000001"})]}),(0,s.jsx)(y.PanelBody,{title:(0,f.__)("Notes","post-kinds-for-indieweb"),initialOpen:!1,children:(0,s.jsx)(y.TextControl,{label:(0,f.__)("Notes","post-kinds-for-indieweb"),value:d||"",onChange:e=>t({notes:e}),placeholder:(0,f.__)("How was it?","post-kinds-for-indieweb")})})]}),(0,s.jsx)("div",{...g,children:(0,s.jsxs)("div",{className:"post-kinds-card",children:[(0,s.jsx)("div",{className:"post-kinds-card__media",children:(0,s.jsx)(j.MediaUploadCheck,{children:(0,s.jsx)(j.MediaUpload,{onSelect:e=>{t({photo:e.url,photoAlt:e.alt||i||(0,f.__)("Food photo","post-kinds-for-indieweb")})},allowedTypes:["image"],render:({open:e})=>(0,s.jsx)("button",{type:"button",className:"post-kinds-card__media-button",onClick:e,children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("img",{src:o,alt:r||i,className:"post-kinds-card__image"}),(0,s.jsx)("button",{type:"button",className:"post-kinds-card__media-remove",onClick:w,"aria-label":(0,f.__)("Remove photo","post-kinds-for-indieweb"),children:"×"})]}):(0,s.jsxs)("div",{className:"post-kinds-card__media-placeholder",children:[(0,s.jsx)("span",{className:"post-kinds-card__media-icon",children:S.emoji}),(0,s.jsx)("span",{className:"post-kinds-card__media-text",children:(0,f.__)("Add Photo (Optional)","post-kinds-for-indieweb")})]})})})})}),(0,s.jsxs)("div",{className:"post-kinds-card__content",children:[(0,s.jsx)("div",{className:"post-kinds-card__type-row",children:(0,s.jsx)("select",{className:"post-kinds-card__type-select",value:n||"",onChange:e=>t({cuisine:e.target.value}),children:le.map(e=>(0,s.jsxs)("option",{value:e.value,children:[e.emoji," ",e.label]},e.value))})}),(0,s.jsx)(j.RichText,{tagName:"h3",className:"post-kinds-card__title",value:i,onChange:e=>t({name:e}),placeholder:(0,f.__)("What did you eat?","post-kinds-for-indieweb")}),(0,s.jsx)(j.RichText,{tagName:"p",className:"post-kinds-card__subtitle",value:p,onChange:e=>t({locationName:e}),placeholder:(0,f.__)("Restaurant name…","post-kinds-for-indieweb")}),(h||_||m)&&(0,s.jsx)("p",{className:"post-kinds-card__location",children:[h,_,m].filter(Boolean).join(", ")}),!h&&!_&&!m&&(0,s.jsx)(j.RichText,{tagName:"p",className:"post-kinds-card__location",value:h,onChange:e=>t({locationLocality:e}),placeholder:(0,f.__)("City…","post-kinds-for-indieweb")}),(0,s.jsx)("div",{className:"post-kinds-card__rating",children:(0,s.jsx)(C,{value:l,onChange:e=>t({rating:e}),max:5})}),(0,s.jsx)(j.RichText,{tagName:"p",className:"post-kinds-card__notes",value:d,onChange:e=>t({notes:e}),placeholder:(0,f.__)("How was it?","post-kinds-for-indieweb")})]})]})})]})},save:function({attributes:e}){const{name:t,cuisine:i,photo:a,photoAlt:n,rating:o,ateAt:r,notes:l,restaurantUrl:d,locationName:c,locationAddress:p,locationLocality:u,locationRegion:h,locationCountry:_,geoLatitude:m,geoLongitude:b,layout:k}=e,g=j.useBlockProps.save({className:`eat-card layout-${k}`});return(0,s.jsx)("div",{...g,children:(0,s.jsxs)("div",{className:"post-kinds-card h-food",children:[a&&(0,s.jsx)("div",{className:"post-kinds-card__media",children:(0,s.jsx)("img",{src:a,alt:n||t,className:"post-kinds-card__image u-photo",loading:"lazy"})}),(0,s.jsxs)("div",{className:"post-kinds-card__content",children:[i&&(0,s.jsx)("span",{className:"post-kinds-card__badge",children:i}),t&&(0,s.jsx)("h3",{className:"post-kinds-card__title p-name",children:t}),c&&(0,s.jsxs)("div",{className:"post-kinds-card__location p-location h-card",children:[(0,s.jsx)("p",{className:"post-kinds-card__venue",children:d?(0,s.jsx)("a",{href:d,className:"p-name u-url",target:"_blank",rel:"noopener noreferrer",children:c}):(0,s.jsx)("span",{className:"p-name",children:c})}),p&&(0,s.jsx)("p",{className:"post-kinds-card__address p-street-address",children:p}),(u||h||_)&&(0,s.jsxs)("p",{className:"post-kinds-card__city",children:[u&&(0,s.jsx)("span",{className:"p-locality",children:u}),u&&h&&", ",h&&(0,s.jsx)("span",{className:"p-region",children:h}),(u||h)&&_&&", ",_&&(0,s.jsx)("span",{className:"p-country-name",children:_})]}),(0!==m||0!==b)&&(0,s.jsxs)("data",{className:"p-geo h-geo",value:`${m},${b}`,hidden:!0,children:[(0,s.jsx)("span",{className:"p-latitude",children:m}),(0,s.jsx)("span",{className:"p-longitude",children:b})]})]}),!o||o<=0?null:(0,s.jsxs)("div",{className:"post-kinds-card__rating p-rating","aria-label":`Rating: ${o} out of 5`,children:[Array.from({length:5},(e,t)=>(0,s.jsx)("span",{className:"star "+(t<o?"filled":""),"aria-hidden":"true",children:"★"},t)),(0,s.jsxs)("span",{className:"post-kinds-card__rating-value",children:[o,"/5"]})]}),l&&(0,s.jsx)("p",{className:"post-kinds-card__notes p-content",children:l}),r&&(0,s.jsx)("time",{className:"post-kinds-card__timestamp dt-published",dateTime:new Date(r).toISOString(),children:new Date(r).toLocaleString()})]}),(0,s.jsx)("data",{className:"u-ate",value:t||"",hidden:!0})]})})}});const ce=[{label:(0,f.__)("Select type…","post-kinds-for-indieweb"),value:"",emoji:"🥤"},{label:(0,f.__)("Coffee","post-kinds-for-indieweb"),value:"coffee",emoji:"☕"},{label:(0,f.__)("Tea","post-kinds-for-indieweb"),value:"tea",emoji:"🍵"},{label:(0,f.__)("Beer","post-kinds-for-indieweb"),value:"beer",emoji:"🍺"},{label:(0,f.__)("Wine","post-kinds-for-indieweb"),value:"wine",emoji:"🍷"},{label:(0,f.__)("Cocktail","post-kinds-for-indieweb"),value:"cocktail",emoji:"🍸"},{label:(0,f.__)("Juice","post-kinds-for-indieweb"),value:"juice",emoji:"🧃"},{label:(0,f.__)("Soda","post-kinds-for-indieweb"),value:"soda",emoji:"🥤"},{label:(0,f.__)("Smoothie","post-kinds-for-indieweb"),value:"smoothie",emoji:"🥤"},{label:(0,f.__)("Water","post-kinds-for-indieweb"),value:"water",emoji:"💧"},{label:(0,f.__)("Whiskey","post-kinds-for-indieweb"),value:"whiskey",emoji:"🥃"},{label:(0,f.__)("Other","post-kinds-for-indieweb"),value:"other",emoji:"🥤"}],pe={coffee:"Coffee",tea:"Tea",beer:"Beer",wine:"Wine",cocktail:"Cocktail",juice:"Juice",soda:"Soda",smoothie:"Smoothie",water:"Water",other:"Drink"},ue=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"post-kinds-indieweb/drink-card","version":"1.0.0","title":"Drink Card","category":"post-kinds-indieweb","description":"Display a drink you had with photo, type, brand, and rating.","keywords":["drink","beverage","coffee","beer","wine","cocktail"],"textdomain":"post-kinds-indieweb","attributes":{"name":{"type":"string","source":"html","selector":".drink-name"},"drinkType":{"type":"string","default":"coffee"},"brand":{"type":"string"},"photo":{"type":"string","source":"attribute","selector":".drink-photo img","attribute":"src"},"photoAlt":{"type":"string","source":"attribute","selector":".drink-photo img","attribute":"alt"},"rating":{"type":"number","default":0},"drankAt":{"type":"string"},"notes":{"type":"string","source":"html","selector":".drink-notes"},"venueUrl":{"type":"string"},"locationName":{"type":"string"},"locationAddress":{"type":"string"},"locationLocality":{"type":"string"},"locationRegion":{"type":"string"},"locationCountry":{"type":"string"},"geoLatitude":{"type":"number","default":0},"geoLongitude":{"type":"number","default":0},"layout":{"type":"string","default":"horizontal"}},"supports":{"html":false,"align":["wide","full"],"color":{"background":true,"text":true,"gradients":true,"link":true},"spacing":{"margin":true,"padding":true,"blockGap":true},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontFamily":true,"__experimentalFontWeight":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true},"__experimentalBorder":{"color":true,"radius":true,"width":true,"style":true,"__experimentalDefaultControls":{"color":true,"radius":true,"width":true,"style":true}},"shadow":true,"dimensions":{"minHeight":true}},"example":{"attributes":{"name":"Flat White","drinkType":"coffee","brand":"Blue Bottle","rating":4}}}');(0,t.registerBlockType)(ue.name,{...ue,icon:b,edit:function({attributes:e,setAttributes:t}){const{name:i,drinkType:a,brand:n,photo:o,photoAlt:r,rating:l,notes:d,venueUrl:c,locationName:p,locationAddress:u,locationLocality:h,locationRegion:_,locationCountry:m,geoLatitude:b,geoLongitude:k}=e,g=(0,j.useBlockProps)({className:"drink-card-block"}),{editPost:x}=(0,$.useDispatch)("core/editor"),v=(0,$.useSelect)(e=>{const t=e("core/editor").getEditedPostAttribute("indieblocks_kind");return t&&t.length>0?t[0]:null},[]);(0,N.useEffect)(()=>{v||wp.apiFetch({path:"/wp/v2/kind?slug=drink"}).then(e=>{e&&e.length>0&&x({indieblocks_kind:[e[0].id]})}).catch(()=>{})},[]),(0,N.useEffect)(()=>{const e={};void 0!==i&&(e._postkind_drink_name=i||""),void 0!==a&&(e._postkind_drink_type=a||""),void 0!==n&&(e._postkind_drink_brewery=n||""),void 0!==o&&(e._postkind_drink_photo=o||""),void 0!==l&&(e._postkind_drink_rating=l||0),void 0!==p&&(e._postkind_drink_location_name=p||""),void 0!==u&&(e._postkind_drink_location_address=u||""),void 0!==h&&(e._postkind_drink_location_locality=h||""),void 0!==_&&(e._postkind_drink_location_region=_||""),void 0!==m&&(e._postkind_drink_location_country=m||""),void 0!==b&&(e._postkind_drink_geo_latitude=b||0),void 0!==k&&(e._postkind_drink_geo_longitude=k||0),Object.keys(e).length>0&&x({meta:e})},[i,a,n,o,l,p,u,h,_,m,b,k]);const w=e=>{e.stopPropagation(),t({photo:"",photoAlt:""})},S=(T=a,ce.find(e=>e.value===T)||ce[0]);var T;const D=ce.map(e=>({label:`${e.emoji} ${e.label}`,value:e.value}));return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(j.InspectorControls,{children:[(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Drink Details","post-kinds-for-indieweb"),initialOpen:!0,children:[(0,s.jsx)(y.TextControl,{label:(0,f.__)("Name","post-kinds-for-indieweb"),value:i||"",onChange:e=>t({name:e}),placeholder:(0,f.__)("What are you drinking?","post-kinds-for-indieweb")}),(0,s.jsx)(y.SelectControl,{label:(0,f.__)("Type","post-kinds-for-indieweb"),value:a||"",options:D,onChange:e=>t({drinkType:e})}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Brand/Brewery","post-kinds-for-indieweb"),value:n||"",onChange:e=>t({brand:e})}),(0,s.jsx)(y.RangeControl,{label:(0,f.__)("Rating","post-kinds-for-indieweb"),value:l||0,onChange:e=>t({rating:e}),min:0,max:5,step:1})]}),(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Location","post-kinds-for-indieweb"),initialOpen:!0,children:[(0,s.jsx)(y.TextControl,{label:(0,f.__)("Bar/Cafe/Venue Name","post-kinds-for-indieweb"),value:p||"",onChange:e=>t({locationName:e}),placeholder:(0,f.__)("Where are you drinking?","post-kinds-for-indieweb")}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Address","post-kinds-for-indieweb"),value:u||"",onChange:e=>t({locationAddress:e})}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("City","post-kinds-for-indieweb"),value:h||"",onChange:e=>t({locationLocality:e})}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("State/Region","post-kinds-for-indieweb"),value:_||"",onChange:e=>t({locationRegion:e})}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Country","post-kinds-for-indieweb"),value:m||"",onChange:e=>t({locationCountry:e})}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Website URL","post-kinds-for-indieweb"),value:c||"",onChange:e=>t({venueUrl:e}),type:"url"}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Latitude","post-kinds-for-indieweb"),value:b||"",onChange:e=>t({geoLatitude:parseFloat(e)||0}),type:"number",step:"0.0000001"}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Longitude","post-kinds-for-indieweb"),value:k||"",onChange:e=>t({geoLongitude:parseFloat(e)||0}),type:"number",step:"0.0000001"})]}),(0,s.jsx)(y.PanelBody,{title:(0,f.__)("Notes","post-kinds-for-indieweb"),initialOpen:!1,children:(0,s.jsx)(y.TextControl,{label:(0,f.__)("Tasting Notes","post-kinds-for-indieweb"),value:d||"",onChange:e=>t({notes:e}),placeholder:(0,f.__)("Your thoughts…","post-kinds-for-indieweb")})})]}),(0,s.jsx)("div",{...g,children:(0,s.jsxs)("div",{className:"post-kinds-card",children:[(0,s.jsx)("div",{className:"post-kinds-card__media",children:(0,s.jsx)(j.MediaUploadCheck,{children:(0,s.jsx)(j.MediaUpload,{onSelect:e=>{t({photo:e.url,photoAlt:e.alt||i||(0,f.__)("Drink photo","post-kinds-for-indieweb")})},allowedTypes:["image"],render:({open:e})=>(0,s.jsx)("button",{type:"button",className:"post-kinds-card__media-button",onClick:e,children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("img",{src:o,alt:r||i,className:"post-kinds-card__image"}),(0,s.jsx)("button",{type:"button",className:"post-kinds-card__media-remove",onClick:w,"aria-label":(0,f.__)("Remove photo","post-kinds-for-indieweb"),children:"×"})]}):(0,s.jsxs)("div",{className:"post-kinds-card__media-placeholder",children:[(0,s.jsx)("span",{className:"post-kinds-card__media-icon",children:S.emoji}),(0,s.jsx)("span",{className:"post-kinds-card__media-text",children:(0,f.__)("Add Photo (Optional)","post-kinds-for-indieweb")})]})})})})}),(0,s.jsxs)("div",{className:"post-kinds-card__content",children:[(0,s.jsx)("div",{className:"post-kinds-card__type-row",children:(0,s.jsx)("select",{className:"post-kinds-card__type-select",value:a||"",onChange:e=>t({drinkType:e.target.value}),children:ce.map(e=>(0,s.jsxs)("option",{value:e.value,children:[e.emoji," ",e.label]},e.value))})}),(0,s.jsx)(j.RichText,{tagName:"h3",className:"post-kinds-card__title",value:i,onChange:e=>t({name:e}),placeholder:(0,f.__)("What are you drinking?","post-kinds-for-indieweb")}),(0,s.jsx)(j.RichText,{tagName:"p",className:"post-kinds-card__subtitle",value:n,onChange:e=>t({brand:e}),placeholder:(0,f.__)("Brand or brewery…","post-kinds-for-indieweb")}),(0,s.jsx)(j.RichText,{tagName:"p",className:"post-kinds-card__location",value:p,onChange:e=>t({locationName:e}),placeholder:(0,f.__)("Venue name…","post-kinds-for-indieweb")}),(h||_||m)&&(0,s.jsx)("p",{className:"post-kinds-card__city",children:[h,_,m].filter(Boolean).join(", ")}),(0,s.jsx)("div",{className:"post-kinds-card__rating",children:(0,s.jsx)(C,{value:l,onChange:e=>t({rating:e}),max:5})}),(0,s.jsx)(j.RichText,{tagName:"p",className:"post-kinds-card__notes",value:d,onChange:e=>t({notes:e}),placeholder:(0,f.__)("Tasting notes…","post-kinds-for-indieweb")})]})]})})]})},save:function({attributes:e}){const{name:t,drinkType:i,brand:a,photo:n,photoAlt:o,rating:r,drankAt:l,notes:d,venueUrl:c,locationName:p,locationAddress:u,locationLocality:h,locationRegion:_,locationCountry:m,geoLatitude:b,geoLongitude:k,layout:g}=e,x=j.useBlockProps.save({className:`drink-card layout-${g}`});return(0,s.jsx)("div",{...x,children:(0,s.jsxs)("div",{className:"post-kinds-card h-food",children:[n&&(0,s.jsx)("div",{className:"post-kinds-card__media",children:(0,s.jsx)("img",{src:n,alt:o||t,className:"post-kinds-card__image u-photo",loading:"lazy"})}),(0,s.jsxs)("div",{className:"post-kinds-card__content",children:[(0,s.jsx)("span",{className:"post-kinds-card__badge",children:pe[i]||i}),t&&(0,s.jsx)("h3",{className:"post-kinds-card__title p-name",children:t}),a&&(0,s.jsx)("p",{className:"post-kinds-card__subtitle p-author h-card",children:(0,s.jsx)("span",{className:"p-name",children:a})}),p&&(0,s.jsxs)("div",{className:"post-kinds-card__location p-location h-card",children:[(0,s.jsx)("p",{className:"post-kinds-card__venue",children:c?(0,s.jsx)("a",{href:c,className:"p-name u-url",target:"_blank",rel:"noopener noreferrer",children:p}):(0,s.jsx)("span",{className:"p-name",children:p})}),u&&(0,s.jsx)("p",{className:"post-kinds-card__address p-street-address",children:u}),(h||_||m)&&(0,s.jsxs)("p",{className:"post-kinds-card__city",children:[h&&(0,s.jsx)("span",{className:"p-locality",children:h}),h&&_&&", ",_&&(0,s.jsx)("span",{className:"p-region",children:_}),(h||_)&&m&&", ",m&&(0,s.jsx)("span",{className:"p-country-name",children:m})]}),(0!==b||0!==k)&&(0,s.jsxs)("data",{className:"p-geo h-geo",value:`${b},${k}`,hidden:!0,children:[(0,s.jsx)("span",{className:"p-latitude",children:b}),(0,s.jsx)("span",{className:"p-longitude",children:k})]})]}),!r||r<=0?null:(0,s.jsxs)("div",{className:"post-kinds-card__rating p-rating","aria-label":`Rating: ${r} out of 5`,children:[Array.from({length:5},(e,t)=>(0,s.jsx)("span",{className:"star "+(t<r?"filled":""),"aria-hidden":"true",children:"★"},t)),(0,s.jsxs)("span",{className:"post-kinds-card__rating-value",children:[r,"/5"]})]}),d&&(0,s.jsx)("p",{className:"post-kinds-card__notes p-content",children:d}),l&&(0,s.jsx)("time",{className:"post-kinds-card__timestamp dt-published",dateTime:new Date(l).toISOString(),children:new Date(l).toLocaleString()})]}),(0,s.jsx)("data",{className:"u-drank",value:t||"",hidden:!0})]})})}});const he=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"post-kinds-indieweb/favorite-card","version":"1.0.0","title":"Favorite Card","category":"post-kinds-indieweb","description":"Display something you favorited with title, URL, and description.","keywords":["favorite","star","like","bookmark"],"textdomain":"post-kinds-indieweb","attributes":{"title":{"type":"string","source":"html","selector":".favorite-title"},"url":{"type":"string"},"description":{"type":"string","source":"html","selector":".favorite-description"},"image":{"type":"string","source":"attribute","selector":".favorite-image img","attribute":"src"},"imageAlt":{"type":"string"},"author":{"type":"string"},"favoritedAt":{"type":"string"},"rel":{"type":"string","default":""},"layout":{"type":"string","default":"horizontal"}},"supports":{"html":false,"align":["wide","full"],"color":{"background":true,"text":true,"gradients":true,"link":true},"spacing":{"margin":true,"padding":true,"blockGap":true},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontFamily":true,"__experimentalFontWeight":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true},"__experimentalBorder":{"color":true,"radius":true,"width":true,"style":true,"__experimentalDefaultControls":{"color":true,"radius":true,"width":true,"style":true}},"shadow":true,"dimensions":{"minHeight":true}},"example":{"attributes":{"title":"Amazing Blog Post","url":"https://example.com/post","author":"Jane Doe"}}}');(0,t.registerBlockType)(he.name,{...he,icon:k,edit:function({attributes:e,setAttributes:t}){const{title:i,url:a,description:n,image:o,imageAlt:r,author:l}=e,d=(0,j.useBlockProps)({className:"favorite-card-block"}),{editPost:c}=(0,$.useDispatch)("core/editor"),p=(0,$.useSelect)(e=>{const t=e("core/editor").getEditedPostAttribute("indieblocks_kind");return t&&t.length>0?t[0]:null},[]);(0,N.useEffect)(()=>{p||wp.apiFetch({path:"/wp/v2/kind?slug=favorite"}).then(e=>{e&&e.length>0&&c({indieblocks_kind:[e[0].id]})}).catch(()=>{})},[]),(0,N.useEffect)(()=>{const e={};void 0!==i&&(e._postkind_favorite_title=i||""),void 0!==a&&(e._postkind_favorite_url=a||""),void 0!==l&&(e._postkind_favorite_author=l||""),void 0!==o&&(e._postkind_favorite_image=o||""),Object.keys(e).length>0&&c({meta:e})},[i,a,l,o]);const u=e=>{e.stopPropagation(),t({image:"",imageAlt:""})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(j.InspectorControls,{children:[(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Favorite Details","post-kinds-for-indieweb"),initialOpen:!0,children:[(0,s.jsx)(y.TextControl,{label:(0,f.__)("Title","post-kinds-for-indieweb"),value:i||"",onChange:e=>t({title:e}),placeholder:(0,f.__)("What did you favorite?","post-kinds-for-indieweb")}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("URL","post-kinds-for-indieweb"),value:a||"",onChange:e=>t({url:e}),type:"url",placeholder:(0,f.__)("https://…","post-kinds-for-indieweb")}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Author","post-kinds-for-indieweb"),value:l||"",onChange:e=>t({author:e}),placeholder:(0,f.__)("Original author","post-kinds-for-indieweb")})]}),(0,s.jsx)(y.PanelBody,{title:(0,f.__)("Description","post-kinds-for-indieweb"),initialOpen:!1,children:(0,s.jsx)(y.TextControl,{label:(0,f.__)("Description","post-kinds-for-indieweb"),value:n||"",onChange:e=>t({description:e}),placeholder:(0,f.__)("Why did you favorite this?","post-kinds-for-indieweb")})})]}),(0,s.jsx)("div",{...d,children:(0,s.jsxs)("div",{className:"post-kinds-card",children:[(0,s.jsx)("div",{className:"post-kinds-card__media",children:(0,s.jsx)(j.MediaUploadCheck,{children:(0,s.jsx)(j.MediaUpload,{onSelect:e=>{t({image:e.url,imageAlt:e.alt||i||(0,f.__)("Favorite image","post-kinds-for-indieweb")})},allowedTypes:["image"],render:({open:e})=>(0,s.jsx)("button",{type:"button",className:"post-kinds-card__media-button",onClick:e,children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("img",{src:o,alt:r||i,className:"post-kinds-card__image"}),(0,s.jsx)("button",{type:"button",className:"post-kinds-card__media-remove",onClick:u,"aria-label":(0,f.__)("Remove image","post-kinds-for-indieweb"),children:"×"})]}):(0,s.jsxs)("div",{className:"post-kinds-card__media-placeholder",children:[(0,s.jsx)("span",{className:"post-kinds-card__media-icon",children:"⭐"}),(0,s.jsx)("span",{className:"post-kinds-card__media-text",children:(0,f.__)("Add Image","post-kinds-for-indieweb")})]})})})})}),(0,s.jsxs)("div",{className:"post-kinds-card__content",children:[(0,s.jsxs)("span",{className:"post-kinds-card__badge",children:["★ ",(0,f.__)("Favorited","post-kinds-for-indieweb")]}),(0,s.jsx)(j.RichText,{tagName:"h3",className:"post-kinds-card__title",value:i,onChange:e=>t({title:e}),placeholder:(0,f.__)("What did you favorite?","post-kinds-for-indieweb")}),(0,s.jsxs)("div",{className:"post-kinds-card__input-row",children:[(0,s.jsx)("span",{className:"post-kinds-card__input-icon",children:"🔗"}),(0,s.jsx)("input",{type:"url",className:"post-kinds-card__input post-kinds-card__input--url",value:a||"",onChange:e=>t({url:e.target.value}),placeholder:(0,f.__)("https://example.com/…","post-kinds-for-indieweb")})]}),(0,s.jsx)(j.RichText,{tagName:"p",className:"post-kinds-card__subtitle",value:l,onChange:e=>t({author:e}),placeholder:(0,f.__)("By whom?","post-kinds-for-indieweb")}),(0,s.jsx)(j.RichText,{tagName:"p",className:"post-kinds-card__notes",value:n,onChange:e=>t({description:e}),placeholder:(0,f.__)("Why did you favorite this?","post-kinds-for-indieweb")})]})]})})]})},save:function({attributes:e}){const{title:t,url:i,description:a,image:n,imageAlt:o,author:r,favoritedAt:l,rel:d,layout:c}=e,p=j.useBlockProps.save({className:`favorite-card layout-${c}`}),u=d?`noopener noreferrer ${d}`:"noopener noreferrer";return(0,s.jsx)("div",{...p,children:(0,s.jsxs)("div",{className:"post-kinds-card h-cite",children:[n&&(0,s.jsx)("div",{className:"post-kinds-card__media",children:(0,s.jsx)("img",{src:n,alt:o||t,className:"post-kinds-card__image u-photo",loading:"lazy"})}),(0,s.jsxs)("div",{className:"post-kinds-card__content",children:[(0,s.jsx)("span",{className:"post-kinds-card__badge",children:"★ Favorited"}),t&&(0,s.jsx)("h3",{className:"post-kinds-card__title p-name",children:i?(0,s.jsx)("a",{href:i,className:"u-url u-favorite-of",target:"_blank",rel:u,children:t}):t}),r&&(0,s.jsx)("p",{className:"post-kinds-card__subtitle p-author h-card",children:(0,s.jsx)("span",{className:"p-name",children:r})}),a&&(0,s.jsx)("p",{className:"post-kinds-card__notes p-content",children:a}),l&&(0,s.jsx)("time",{className:"post-kinds-card__timestamp dt-published",dateTime:new Date(l).toISOString(),children:new Date(l).toLocaleString()})]})]})})}});const _e=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"post-kinds-indieweb/like-card","version":"1.0.0","title":"Like Card","category":"post-kinds-indieweb","description":"Display a like reaction to content you appreciated, with title, URL, and optional note.","keywords":["like","heart","appreciate","love","reaction"],"textdomain":"post-kinds-indieweb","attributes":{"title":{"type":"string","source":"html","selector":".like-title"},"url":{"type":"string"},"description":{"type":"string","source":"html","selector":".like-description"},"image":{"type":"string","source":"attribute","selector":".like-image img","attribute":"src"},"imageAlt":{"type":"string"},"author":{"type":"string"},"likedAt":{"type":"string"},"rel":{"type":"string","default":""},"layout":{"type":"string","default":"horizontal"}},"supports":{"html":false,"align":["wide","full"],"color":{"background":true,"text":true,"gradients":true,"link":true},"spacing":{"margin":true,"padding":true,"blockGap":true},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontFamily":true,"__experimentalFontWeight":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true},"__experimentalBorder":{"color":true,"radius":true,"width":true,"style":true,"__experimentalDefaultControls":{"color":true,"radius":true,"width":true,"style":true}},"shadow":true,"dimensions":{"minHeight":true}},"example":{"attributes":{"title":"Great Blog Post","url":"https://example.com/post","author":"Jane Doe"}}}');(0,t.registerBlockType)(_e.name,{..._e,icon:u,edit:function({attributes:e,setAttributes:t}){const{title:i,url:a,description:n,image:o,imageAlt:r,author:l}=e,d=(0,j.useBlockProps)({className:"like-card-block"}),{editPost:c}=(0,$.useDispatch)("core/editor"),p=(0,$.useSelect)(e=>{const t=e("core/editor").getEditedPostAttribute("indieblocks_kind");return t&&t.length>0?t[0]:null},[]);(0,N.useEffect)(()=>{p||wp.apiFetch({path:"/wp/v2/kind?slug=like"}).then(e=>{e&&e.length>0&&c({indieblocks_kind:[e[0].id]})}).catch(()=>{})},[]),(0,N.useEffect)(()=>{const e={};void 0!==i&&(e._postkind_like_title=i||""),void 0!==a&&(e._postkind_like_url=a||""),void 0!==l&&(e._postkind_like_author=l||""),void 0!==o&&(e._postkind_like_image=o||""),Object.keys(e).length>0&&c({meta:e})},[i,a,l,o]);const u=e=>{e.stopPropagation(),t({image:"",imageAlt:""})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(j.InspectorControls,{children:[(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Like Details","post-kinds-for-indieweb"),initialOpen:!0,children:[(0,s.jsx)(y.TextControl,{label:(0,f.__)("Title","post-kinds-for-indieweb"),value:i||"",onChange:e=>t({title:e}),placeholder:(0,f.__)("What did you like?","post-kinds-for-indieweb")}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("URL","post-kinds-for-indieweb"),value:a||"",onChange:e=>t({url:e}),type:"url",placeholder:(0,f.__)("https://…","post-kinds-for-indieweb")}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Author","post-kinds-for-indieweb"),value:l||"",onChange:e=>t({author:e}),placeholder:(0,f.__)("Original author","post-kinds-for-indieweb")})]}),(0,s.jsx)(y.PanelBody,{title:(0,f.__)("Description","post-kinds-for-indieweb"),initialOpen:!1,children:(0,s.jsx)(y.TextControl,{label:(0,f.__)("Description","post-kinds-for-indieweb"),value:n||"",onChange:e=>t({description:e}),placeholder:(0,f.__)("Why did you like this?","post-kinds-for-indieweb")})})]}),(0,s.jsx)("div",{...d,children:(0,s.jsxs)("div",{className:"post-kinds-card",children:[(0,s.jsx)("div",{className:"post-kinds-card__media",children:(0,s.jsx)(j.MediaUploadCheck,{children:(0,s.jsx)(j.MediaUpload,{onSelect:e=>{t({image:e.url,imageAlt:e.alt||i||(0,f.__)("Liked content image","post-kinds-for-indieweb")})},allowedTypes:["image"],render:({open:e})=>(0,s.jsx)("button",{type:"button",className:"post-kinds-card__media-button",onClick:e,children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("img",{src:o,alt:r||i,className:"post-kinds-card__image"}),(0,s.jsx)("button",{type:"button",className:"post-kinds-card__media-remove",onClick:u,"aria-label":(0,f.__)("Remove image","post-kinds-for-indieweb"),children:"×"})]}):(0,s.jsxs)("div",{className:"post-kinds-card__media-placeholder",children:[(0,s.jsx)("span",{className:"post-kinds-card__media-icon",children:"♥"}),(0,s.jsx)("span",{className:"post-kinds-card__media-text",children:(0,f.__)("Add Image","post-kinds-for-indieweb")})]})})})})}),(0,s.jsxs)("div",{className:"post-kinds-card__content",children:[(0,s.jsxs)("span",{className:"post-kinds-card__badge",children:["♥"," ",(0,f.__)("Liked","post-kinds-for-indieweb")]}),(0,s.jsx)(j.RichText,{tagName:"h3",className:"post-kinds-card__title",value:i,onChange:e=>t({title:e}),placeholder:(0,f.__)("What did you like?","post-kinds-for-indieweb")}),(0,s.jsxs)("div",{className:"post-kinds-card__input-row",children:[(0,s.jsx)("span",{className:"post-kinds-card__input-icon",children:"🔗"}),(0,s.jsx)("input",{type:"url",className:"post-kinds-card__input post-kinds-card__input--url",value:a||"",onChange:e=>t({url:e.target.value}),placeholder:(0,f.__)("https://example.com/…","post-kinds-for-indieweb")})]}),(0,s.jsx)(j.RichText,{tagName:"p",className:"post-kinds-card__subtitle",value:l,onChange:e=>t({author:e}),placeholder:(0,f.__)("By whom?","post-kinds-for-indieweb")}),(0,s.jsx)(j.RichText,{tagName:"p",className:"post-kinds-card__notes",value:n,onChange:e=>t({description:e}),placeholder:(0,f.__)("Why did you like this?","post-kinds-for-indieweb")})]})]})})]})},save:function({attributes:e}){const{title:t,url:i,description:a,image:n,imageAlt:o,author:r,likedAt:l,rel:d,layout:c}=e,p=j.useBlockProps.save({className:`like-card layout-${c}`}),u=d?`noopener noreferrer ${d}`:"noopener noreferrer";return(0,s.jsx)("div",{...p,children:(0,s.jsxs)("div",{className:"post-kinds-card h-cite",children:[n&&(0,s.jsx)("div",{className:"post-kinds-card__media",children:(0,s.jsx)("img",{src:n,alt:o||t,className:"post-kinds-card__image u-photo",loading:"lazy"})}),(0,s.jsxs)("div",{className:"post-kinds-card__content",children:[(0,s.jsx)("span",{className:"post-kinds-card__badge",children:"♥ Liked"}),t&&(0,s.jsx)("h3",{className:"post-kinds-card__title p-name",children:i?(0,s.jsx)("a",{href:i,className:"u-url u-like-of",target:"_blank",rel:u,children:t}):t}),r&&(0,s.jsx)("p",{className:"post-kinds-card__subtitle p-author h-card",children:(0,s.jsx)("span",{className:"p-name",children:r})}),a&&(0,s.jsx)("p",{className:"post-kinds-card__notes p-content",children:a}),l&&(0,s.jsx)("time",{className:"post-kinds-card__timestamp dt-published",dateTime:new Date(l).toISOString(),children:new Date(l).toLocaleString()})]})]})})}});const me=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"post-kinds-indieweb/jam-card","version":"1.0.0","title":"Jam Card","category":"post-kinds-indieweb","description":"Display a song you\'re jamming to with cover art and artist.","keywords":["jam","music","song","currently playing"],"textdomain":"post-kinds-indieweb","attributes":{"title":{"type":"string","source":"html","selector":".jam-title"},"artist":{"type":"string"},"album":{"type":"string"},"cover":{"type":"string","source":"attribute","selector":".jam-cover img","attribute":"src"},"coverAlt":{"type":"string"},"url":{"type":"string"},"note":{"type":"string","source":"html","selector":".jam-note"},"jammedAt":{"type":"string"},"rel":{"type":"string","default":""},"layout":{"type":"string","default":"horizontal"}},"supports":{"html":false,"align":["wide","full"],"color":{"background":true,"text":true,"gradients":true,"link":true},"spacing":{"margin":true,"padding":true,"blockGap":true},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontFamily":true,"__experimentalFontWeight":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true},"__experimentalBorder":{"color":true,"radius":true,"width":true,"style":true,"__experimentalDefaultControls":{"color":true,"radius":true,"width":true,"style":true}},"shadow":true,"dimensions":{"minHeight":true}},"example":{"attributes":{"title":"Bohemian Rhapsody","artist":"Queen","album":"A Night at the Opera"}}}');(0,t.registerBlockType)(me.name,{...me,icon:g,edit:function({attributes:e,setAttributes:t}){const{title:i,artist:a,album:n,cover:o,coverAlt:r,url:l,note:d}=e,[c,p]=(0,N.useState)(!1),u=(0,j.useBlockProps)({className:"jam-card-block"}),{editPost:h}=(0,$.useDispatch)("core/editor"),_=(0,$.useSelect)(e=>{const t=e("core/editor").getEditedPostAttribute("indieblocks_kind");return t&&t.length>0?t[0]:null},[]);(0,N.useEffect)(()=>{_||wp.apiFetch({path:"/wp/v2/kind?slug=jam"}).then(e=>{e&&e.length>0&&h({indieblocks_kind:[e[0].id]})}).catch(()=>{})},[]),(0,N.useEffect)(()=>{const e={};void 0!==i&&(e._postkind_jam_title=i||""),void 0!==a&&(e._postkind_jam_artist=a||""),void 0!==n&&(e._postkind_jam_album=n||""),void 0!==o&&(e._postkind_jam_cover=o||""),void 0!==l&&(e._postkind_jam_url=l||""),Object.keys(e).length>0&&h({meta:e})},[i,a,n,o,l]);const m=e=>{const i=e.track||e.title||e.name||"";t({title:i,artist:e.artist||"",album:e.album||"",cover:e.cover||e.image||"",coverAlt:`${i} by ${e.artist||""}`}),p(!1)},b=e=>{e.stopPropagation(),t({cover:"",coverAlt:""})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(j.InspectorControls,{children:[(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Search Music","post-kinds-for-indieweb"),initialOpen:!i,children:[(0,s.jsx)(T,{type:"music",placeholder:(0,f.__)("Search for a song…","post-kinds-for-indieweb"),onSelect:m}),(0,s.jsx)("p",{className:"components-base-control__help",style:{marginTop:"8px"},children:(0,f.__)("Search MusicBrainz to auto-fill song details.","post-kinds-for-indieweb")})]}),(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Song Details","post-kinds-for-indieweb"),initialOpen:!0,children:[(0,s.jsx)(y.TextControl,{label:(0,f.__)("Song Title","post-kinds-for-indieweb"),value:i||"",onChange:e=>t({title:e}),placeholder:(0,f.__)("Song name","post-kinds-for-indieweb")}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Artist","post-kinds-for-indieweb"),value:a||"",onChange:e=>t({artist:e}),placeholder:(0,f.__)("Artist name","post-kinds-for-indieweb")}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Album","post-kinds-for-indieweb"),value:n||"",onChange:e=>t({album:e}),placeholder:(0,f.__)("Album name","post-kinds-for-indieweb")}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Listen URL","post-kinds-for-indieweb"),value:l||"",onChange:e=>t({url:e}),type:"url",help:(0,f.__)("Link to Spotify, Apple Music, etc.","post-kinds-for-indieweb")})]}),(0,s.jsx)(y.PanelBody,{title:(0,f.__)("Note","post-kinds-for-indieweb"),initialOpen:!1,children:(0,s.jsx)(y.TextControl,{label:(0,f.__)("Note","post-kinds-for-indieweb"),value:d||"",onChange:e=>t({note:e}),placeholder:(0,f.__)("Why are you jamming to this?","post-kinds-for-indieweb")})})]}),(0,s.jsx)("div",{...u,children:(0,s.jsxs)("div",{className:"post-kinds-card-wrapper",children:[c&&(0,s.jsxs)("div",{className:"post-kinds-card__search-bar",children:[(0,s.jsx)(T,{type:"music",placeholder:(0,f.__)("Search for a song…","post-kinds-for-indieweb"),onSelect:m}),(0,s.jsx)("button",{type:"button",className:"post-kinds-card__search-close",onClick:()=>p(!1),children:"×"})]}),(0,s.jsxs)("div",{className:"post-kinds-card",children:[(0,s.jsx)("div",{className:"post-kinds-card__media",children:(0,s.jsx)(j.MediaUploadCheck,{children:(0,s.jsx)(j.MediaUpload,{onSelect:e=>{t({cover:e.url,coverAlt:e.alt||`${i} by ${a}`})},allowedTypes:["image"],render:({open:e})=>(0,s.jsx)("button",{type:"button",className:"post-kinds-card__media-button",onClick:e,children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("img",{src:o,alt:r||i,className:"post-kinds-card__image"}),(0,s.jsx)("button",{type:"button",className:"post-kinds-card__media-remove",onClick:b,"aria-label":(0,f.__)("Remove cover","post-kinds-for-indieweb"),children:"×"})]}):(0,s.jsxs)("div",{className:"post-kinds-card__media-placeholder",children:[(0,s.jsx)("span",{className:"post-kinds-card__media-icon",children:"🎵"}),(0,s.jsx)("span",{className:"post-kinds-card__media-text",children:(0,f.__)("Add Cover","post-kinds-for-indieweb")})]})})})})}),(0,s.jsxs)("div",{className:"post-kinds-card__content",children:[(0,s.jsxs)("div",{className:"post-kinds-card__header-row",children:[(0,s.jsxs)("span",{className:"post-kinds-card__badge",children:["🎵"," ",(0,f.__)("Now Playing","post-kinds-for-indieweb")]}),(0,s.jsx)("button",{type:"button",className:"post-kinds-card__action-button",onClick:()=>p(!0),title:(0,f.__)("Search for music","post-kinds-for-indieweb"),children:"🔍"})]}),(0,s.jsx)(j.RichText,{tagName:"h3",className:"post-kinds-card__title",value:i,onChange:e=>t({title:e}),placeholder:(0,f.__)("What song are you jamming to?","post-kinds-for-indieweb")}),(0,s.jsx)(j.RichText,{tagName:"p",className:"post-kinds-card__subtitle",value:a,onChange:e=>t({artist:e}),placeholder:(0,f.__)("Artist name…","post-kinds-for-indieweb")}),(0,s.jsx)(j.RichText,{tagName:"p",className:"post-kinds-card__location",value:n,onChange:e=>t({album:e}),placeholder:(0,f.__)("Album name…","post-kinds-for-indieweb")}),(0,s.jsx)(j.RichText,{tagName:"p",className:"post-kinds-card__notes",value:d,onChange:e=>t({note:e}),placeholder:(0,f.__)("Why are you jamming to this?","post-kinds-for-indieweb")})]})]})]})})]})},save:function({attributes:e}){const{title:t,artist:i,album:a,cover:n,coverAlt:o,url:r,note:l,jammedAt:d,rel:c,layout:p}=e,u=j.useBlockProps.save({className:`jam-card layout-${p}`}),h=c?`noopener noreferrer ${c}`:"noopener noreferrer";return(0,s.jsx)("div",{...u,children:(0,s.jsxs)("div",{className:"post-kinds-card h-cite",children:[n&&(0,s.jsx)("div",{className:"post-kinds-card__media",children:(0,s.jsx)("img",{src:n,alt:o||`${t} by ${i}`,className:"post-kinds-card__image u-photo",loading:"lazy"})}),(0,s.jsxs)("div",{className:"post-kinds-card__content",children:[(0,s.jsx)("span",{className:"post-kinds-card__badge",children:"🎵 Now Playing"}),t&&(0,s.jsx)("h3",{className:"post-kinds-card__title p-name",children:r?(0,s.jsx)("a",{href:r,className:"u-url u-jam-of",target:"_blank",rel:h,children:t}):t}),i&&(0,s.jsx)("p",{className:"post-kinds-card__subtitle p-author h-card",children:(0,s.jsx)("span",{className:"p-name",children:i})}),a&&(0,s.jsx)("p",{className:"post-kinds-card__meta",children:a}),l&&(0,s.jsx)("p",{className:"post-kinds-card__notes p-content",children:l}),d&&(0,s.jsx)("time",{className:"post-kinds-card__timestamp dt-published",dateTime:new Date(d).toISOString(),children:new Date(d).toLocaleString()})]})]})})}});const be=[{label:(0,f.__)("Item","post-kinds-for-indieweb"),value:"item",emoji:"🛍️"},{label:(0,f.__)("Experience","post-kinds-for-indieweb"),value:"experience",emoji:"✨"},{label:(0,f.__)("Book","post-kinds-for-indieweb"),value:"book",emoji:"📚"},{label:(0,f.__)("Game","post-kinds-for-indieweb"),value:"game",emoji:"🎮"},{label:(0,f.__)("Movie/Show","post-kinds-for-indieweb"),value:"media",emoji:"🎬"},{label:(0,f.__)("Travel","post-kinds-for-indieweb"),value:"travel",emoji:"✈️"},{label:(0,f.__)("Tech","post-kinds-for-indieweb"),value:"tech",emoji:"💻"},{label:(0,f.__)("Food","post-kinds-for-indieweb"),value:"food",emoji:"🍕"},{label:(0,f.__)("Other","post-kinds-for-indieweb"),value:"other",emoji:"🎁"}],ke=[{label:(0,f.__)("Low","post-kinds-for-indieweb"),value:"low"},{label:(0,f.__)("Medium","post-kinds-for-indieweb"),value:"medium"},{label:(0,f.__)("High","post-kinds-for-indieweb"),value:"high"}],ge={item:"Item",experience:"Experience",book:"Book",game:"Game",media:"Media",travel:"Travel",other:"Other"},xe={low:"Low",medium:"Medium",high:"High"},ve=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"post-kinds-indieweb/wish-card","version":"1.0.0","title":"Wish Card","category":"post-kinds-indieweb","description":"Display something you wish for or want with image and reason.","keywords":["wish","want","wishlist","gift"],"textdomain":"post-kinds-indieweb","attributes":{"title":{"type":"string","source":"html","selector":".wish-title"},"wishType":{"type":"string","default":"item"},"url":{"type":"string"},"image":{"type":"string","source":"attribute","selector":".wish-image img","attribute":"src"},"imageAlt":{"type":"string"},"price":{"type":"string"},"reason":{"type":"string","source":"html","selector":".wish-reason"},"priority":{"type":"string","default":"medium"},"wishedAt":{"type":"string"},"rel":{"type":"string","default":""},"layout":{"type":"string","default":"horizontal"}},"supports":{"html":false,"align":["wide","full"],"color":{"background":true,"text":true,"gradients":true,"link":true},"spacing":{"margin":true,"padding":true,"blockGap":true},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontFamily":true,"__experimentalFontWeight":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true},"__experimentalBorder":{"color":true,"radius":true,"width":true,"style":true,"__experimentalDefaultControls":{"color":true,"radius":true,"width":true,"style":true}},"shadow":true,"dimensions":{"minHeight":true}},"example":{"attributes":{"title":"Mechanical Keyboard","wishType":"item","priority":"high"}}}');(0,t.registerBlockType)(ve.name,{...ve,icon:x,edit:function({attributes:e,setAttributes:t}){const{title:i,wishType:a,url:n,image:o,imageAlt:r,price:l,reason:d,priority:c}=e,p=(0,j.useBlockProps)({className:"wish-card-block"}),{editPost:u}=(0,$.useDispatch)("core/editor"),h=(0,$.useSelect)(e=>{const t=e("core/editor").getEditedPostAttribute("indieblocks_kind");return t&&t.length>0?t[0]:null},[]);(0,N.useEffect)(()=>{h||wp.apiFetch({path:"/wp/v2/kind?slug=wish"}).then(e=>{e&&e.length>0&&u({indieblocks_kind:[e[0].id]})}).catch(()=>{})},[]),(0,N.useEffect)(()=>{const e={};void 0!==i&&(e._postkind_wish_title=i||""),void 0!==a&&(e._postkind_wish_type=a||""),void 0!==n&&(e._postkind_wish_url=n||""),void 0!==l&&(e._postkind_wish_price=l||""),void 0!==c&&(e._postkind_wish_priority=c||""),void 0!==o&&(e._postkind_wish_image=o||""),Object.keys(e).length>0&&u({meta:e})},[i,a,n,l,c,o]);const _=e=>{e.stopPropagation(),t({image:"",imageAlt:""})},m=(b=a,be.find(e=>e.value===b)||be[0]);var b;const k=be.map(e=>({label:`${e.emoji} ${e.label}`,value:e.value})),g=ke.map(e=>({label:e.label,value:e.value}));return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(j.InspectorControls,{children:[(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Wish Details","post-kinds-for-indieweb"),initialOpen:!0,children:[(0,s.jsx)(y.TextControl,{label:(0,f.__)("Title","post-kinds-for-indieweb"),value:i||"",onChange:e=>t({title:e}),placeholder:(0,f.__)("What do you wish for?","post-kinds-for-indieweb")}),(0,s.jsx)(y.SelectControl,{label:(0,f.__)("Type","post-kinds-for-indieweb"),value:a||"item",options:k,onChange:e=>t({wishType:e})}),(0,s.jsx)(y.SelectControl,{label:(0,f.__)("Priority","post-kinds-for-indieweb"),value:c||"medium",options:g,onChange:e=>t({priority:e})}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Price","post-kinds-for-indieweb"),value:l||"",onChange:e=>t({price:e}),placeholder:(0,f.__)("$0.00","post-kinds-for-indieweb")}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Product URL","post-kinds-for-indieweb"),value:n||"",onChange:e=>t({url:e}),type:"url",help:(0,f.__)("Link to the product or item","post-kinds-for-indieweb")})]}),(0,s.jsx)(y.PanelBody,{title:(0,f.__)("Reason","post-kinds-for-indieweb"),initialOpen:!1,children:(0,s.jsx)(y.TextControl,{label:(0,f.__)("Reason","post-kinds-for-indieweb"),value:d||"",onChange:e=>t({reason:e}),placeholder:(0,f.__)("Why do you want this?","post-kinds-for-indieweb")})})]}),(0,s.jsx)("div",{...p,children:(0,s.jsxs)("div",{className:"post-kinds-card",children:[(0,s.jsx)("div",{className:"post-kinds-card__media",children:(0,s.jsx)(j.MediaUploadCheck,{children:(0,s.jsx)(j.MediaUpload,{onSelect:e=>{t({image:e.url,imageAlt:e.alt||i||(0,f.__)("Wish image","post-kinds-for-indieweb")})},allowedTypes:["image"],render:({open:e})=>(0,s.jsx)("button",{type:"button",className:"post-kinds-card__media-button",onClick:e,children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("img",{src:o,alt:r||i,className:"post-kinds-card__image"}),(0,s.jsx)("button",{type:"button",className:"post-kinds-card__media-remove",onClick:_,"aria-label":(0,f.__)("Remove image","post-kinds-for-indieweb"),children:"×"})]}):(0,s.jsxs)("div",{className:"post-kinds-card__media-placeholder",children:[(0,s.jsx)("span",{className:"post-kinds-card__media-icon",children:m.emoji}),(0,s.jsx)("span",{className:"post-kinds-card__media-text",children:(0,f.__)("Add Image","post-kinds-for-indieweb")})]})})})})}),(0,s.jsxs)("div",{className:"post-kinds-card__content",children:[(0,s.jsxs)("div",{className:"post-kinds-card__badges-row",children:[(0,s.jsx)("select",{className:"post-kinds-card__type-select",value:a||"item",onChange:e=>t({wishType:e.target.value}),children:be.map(e=>(0,s.jsxs)("option",{value:e.value,children:[e.emoji," ",e.label]},e.value))}),(0,s.jsx)("select",{className:"post-kinds-card__type-select",value:c||"medium",onChange:e=>t({priority:e.target.value}),children:ke.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,s.jsx)(j.RichText,{tagName:"h3",className:"post-kinds-card__title",value:i,onChange:e=>t({title:e}),placeholder:(0,f.__)("What do you wish for?","post-kinds-for-indieweb")}),(0,s.jsxs)("div",{className:"post-kinds-card__input-row",children:[(0,s.jsx)("span",{className:"post-kinds-card__input-icon",children:"💰"}),(0,s.jsx)("input",{type:"text",className:"post-kinds-card__input post-kinds-card__input--price",value:l||"",onChange:e=>t({price:e.target.value}),placeholder:(0,f.__)("$0.00","post-kinds-for-indieweb")})]}),(0,s.jsxs)("div",{className:"post-kinds-card__input-row",children:[(0,s.jsx)("span",{className:"post-kinds-card__input-icon",children:"🔗"}),(0,s.jsx)("input",{type:"url",className:"post-kinds-card__input post-kinds-card__input--url",value:n||"",onChange:e=>t({url:e.target.value}),placeholder:(0,f.__)("https://…","post-kinds-for-indieweb")})]}),(0,s.jsx)(j.RichText,{tagName:"p",className:"post-kinds-card__notes",value:d,onChange:e=>t({reason:e}),placeholder:(0,f.__)("Why do you want this?","post-kinds-for-indieweb")})]})]})})]})},save:function({attributes:e}){const{title:t,wishType:i,url:a,image:n,imageAlt:o,price:r,reason:l,priority:d,wishedAt:c,rel:p,layout:u}=e,h=j.useBlockProps.save({className:`wish-card layout-${u} priority-${d}`}),_=p?`noopener noreferrer ${p}`:"noopener noreferrer";return(0,s.jsx)("div",{...h,children:(0,s.jsxs)("div",{className:"post-kinds-card h-cite",children:[n&&(0,s.jsx)("div",{className:"post-kinds-card__media",children:(0,s.jsx)("img",{src:n,alt:o||t,className:"post-kinds-card__image u-photo",loading:"lazy"})}),(0,s.jsxs)("div",{className:"post-kinds-card__content",children:[(0,s.jsxs)("div",{className:"post-kinds-card__badges",children:[(0,s.jsx)("span",{className:"post-kinds-card__badge",children:ge[i]||i}),(0,s.jsx)("span",{className:`post-kinds-card__badge post-kinds-card__badge--${d}`,children:xe[d]})]}),t&&(0,s.jsx)("h3",{className:"post-kinds-card__title p-name",children:a?(0,s.jsx)("a",{href:a,className:"u-url u-wish-of",target:"_blank",rel:_,children:t}):t}),r&&(0,s.jsx)("p",{className:"post-kinds-card__subtitle",children:r}),l&&(0,s.jsx)("p",{className:"post-kinds-card__notes p-content",children:l}),c&&(0,s.jsx)("time",{className:"post-kinds-card__timestamp dt-published",dateTime:new Date(c).toISOString(),children:new Date(c).toLocaleString()})]})]})})}});const we={"😊":(0,f.__)("smiling face with smiling eyes","post-kinds-for-indieweb"),"😃":(0,f.__)("grinning face with big eyes","post-kinds-for-indieweb"),"😄":(0,f.__)("grinning face with smiling eyes","post-kinds-for-indieweb"),"🥳":(0,f.__)("partying face","post-kinds-for-indieweb"),"😎":(0,f.__)("smiling face with sunglasses","post-kinds-for-indieweb"),"🤗":(0,f.__)("smiling face with open hands","post-kinds-for-indieweb"),"😌":(0,f.__)("relieved face","post-kinds-for-indieweb"),"🥰":(0,f.__)("smiling face with hearts","post-kinds-for-indieweb"),"😐":(0,f.__)("neutral face","post-kinds-for-indieweb"),"🤔":(0,f.__)("thinking face","post-kinds-for-indieweb"),"😑":(0,f.__)("expressionless face","post-kinds-for-indieweb"),"🙄":(0,f.__)("face with rolling eyes","post-kinds-for-indieweb"),"😶":(0,f.__)("face without mouth","post-kinds-for-indieweb"),"😏":(0,f.__)("smirking face","post-kinds-for-indieweb"),"😢":(0,f.__)("crying face","post-kinds-for-indieweb"),"😭":(0,f.__)("loudly crying face","post-kinds-for-indieweb"),"😔":(0,f.__)("pensive face","post-kinds-for-indieweb"),"😞":(0,f.__)("disappointed face","post-kinds-for-indieweb"),"🥺":(0,f.__)("pleading face","post-kinds-for-indieweb"),"😿":(0,f.__)("crying cat","post-kinds-for-indieweb"),"😡":(0,f.__)("enraged face","post-kinds-for-indieweb"),"😤":(0,f.__)("face with steam from nose","post-kinds-for-indieweb"),"🤬":(0,f.__)("face with symbols on mouth","post-kinds-for-indieweb"),"💢":(0,f.__)("anger symbol","post-kinds-for-indieweb"),"😠":(0,f.__)("angry face","post-kinds-for-indieweb"),"😴":(0,f.__)("sleeping face","post-kinds-for-indieweb"),"🥱":(0,f.__)("yawning face","post-kinds-for-indieweb"),"😪":(0,f.__)("sleepy face","post-kinds-for-indieweb"),"😩":(0,f.__)("weary face","post-kinds-for-indieweb"),"🤒":(0,f.__)("face with thermometer","post-kinds-for-indieweb"),"😰":(0,f.__)("anxious face with sweat","post-kinds-for-indieweb"),"😨":(0,f.__)("fearful face","post-kinds-for-indieweb"),"😱":(0,f.__)("face screaming in fear","post-kinds-for-indieweb"),"🫣":(0,f.__)("face with peeking eye","post-kinds-for-indieweb"),"😬":(0,f.__)("grimacing face","post-kinds-for-indieweb")},fe=[{name:(0,f.__)("Happy","post-kinds-for-indieweb"),emojis:["😊","😃","😄","🥳","😎","🤗","😌","🥰"]},{name:(0,f.__)("Neutral","post-kinds-for-indieweb"),emojis:["😐","🤔","😑","🙄","😶","😏"]},{name:(0,f.__)("Sad","post-kinds-for-indieweb"),emojis:["😢","😭","😔","😞","🥺","😿"]},{name:(0,f.__)("Angry","post-kinds-for-indieweb"),emojis:["😡","😤","🤬","💢","😠"]},{name:(0,f.__)("Tired","post-kinds-for-indieweb"),emojis:["😴","🥱","😪","😩","🤒"]},{name:(0,f.__)("Anxious","post-kinds-for-indieweb"),emojis:["😰","😨","😱","🫣","😬"]}],je=Object.entries(we).map(([e,t])=>({label:`${e} ${t}`,value:e})),ye=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"post-kinds-indieweb/mood-card","version":"1.0.0","title":"Mood Card","category":"post-kinds-indieweb","description":"Display your current mood with emoji and note.","keywords":["mood","feeling","emotion","status"],"textdomain":"post-kinds-indieweb","attributes":{"mood":{"type":"string","source":"html","selector":".mood-text"},"emoji":{"type":"string","default":""},"note":{"type":"string","source":"html","selector":".mood-note"},"intensity":{"type":"number","default":3},"moodAt":{"type":"string"},"layout":{"type":"string","default":"compact"}},"supports":{"html":false,"align":["wide","full"],"color":{"background":true,"text":true,"gradients":true,"link":true},"spacing":{"margin":true,"padding":true,"blockGap":true},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontFamily":true,"__experimentalFontWeight":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true},"__experimentalBorder":{"color":true,"radius":true,"width":true,"style":true,"__experimentalDefaultControls":{"color":true,"radius":true,"width":true,"style":true}},"shadow":true,"dimensions":{"minHeight":true}},"example":{"attributes":{"mood":"Happy","emoji":"😊","intensity":4}}}');(0,t.registerBlockType)(ye.name,{...ye,icon:v,edit:function({attributes:e,setAttributes:t}){const{mood:i,emoji:a,note:n,intensity:o}=e,r=(0,j.useBlockProps)({className:"mood-card-block"}),{editPost:l}=(0,$.useDispatch)("core/editor"),{currentKind:d,postMeta:c}=(0,$.useSelect)(e=>{const t=e("core/editor").getEditedPostAttribute("indieblocks_kind"),i=e("core/editor").getEditedPostAttribute("meta")||{};return{currentKind:t&&t.length>0?t[0]:null,postMeta:i}},[]);return(0,N.useEffect)(()=>{d||wp.apiFetch({path:"/wp/v2/kind?slug=mood"}).then(e=>{e&&e.length>0&&l({indieblocks_kind:[e[0].id]})}).catch(()=>{})},[]),(0,N.useEffect)(()=>{var e,s,n;const r={},l=null!==(e=c._postkind_mood_label)&&void 0!==e?e:"",d=null!==(s=c._postkind_mood_emoji)&&void 0!==s?s:"",p=null!==(n=c._postkind_mood_rating)&&void 0!==n?n:3;l!==(i||"")&&(r.mood=l),d!==(a||"")&&(r.emoji=d),p!==(o||3)&&(r.intensity=p),Object.keys(r).length>0&&t(r)},[c._postkind_mood_label,c._postkind_mood_emoji,c._postkind_mood_rating]),(0,N.useEffect)(()=>{var e,t,s;const n={};(i||"")!==(null!==(e=c._postkind_mood_label)&&void 0!==e?e:"")&&(n._postkind_mood_label=i||""),(a||"")!==(null!==(t=c._postkind_mood_emoji)&&void 0!==t?t:"")&&(n._postkind_mood_emoji=a||""),(o||3)!==(null!==(s=c._postkind_mood_rating)&&void 0!==s?s:3)&&(n._postkind_mood_rating=o||3),Object.keys(n).length>0&&l({meta:n})},[i,a,o]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(j.InspectorControls,{children:[(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Mood Details","post-kinds-for-indieweb"),initialOpen:!0,children:[(0,s.jsx)(y.TextControl,{label:(0,f.__)("Mood","post-kinds-for-indieweb"),value:i||"",onChange:e=>t({mood:e}),placeholder:(0,f.__)("How are you feeling?","post-kinds-for-indieweb")}),(0,s.jsx)(y.SelectControl,{label:(0,f.__)("Emoji","post-kinds-for-indieweb"),value:a||"😊",options:je,onChange:e=>t({emoji:e})}),(0,s.jsx)(y.RangeControl,{label:(0,f.__)("Intensity","post-kinds-for-indieweb"),value:o||3,onChange:e=>t({intensity:e}),min:1,max:5,marks:[{value:1,label:"1"},{value:3,label:"3"},{value:5,label:"5"}]})]}),(0,s.jsx)(y.PanelBody,{title:(0,f.__)("Note","post-kinds-for-indieweb"),initialOpen:!1,children:(0,s.jsx)(y.TextControl,{label:(0,f.__)("Note","post-kinds-for-indieweb"),value:n||"",onChange:e=>t({note:e}),placeholder:(0,f.__)("What's on your mind?","post-kinds-for-indieweb")})})]}),(0,s.jsx)("div",{...r,children:(0,s.jsxs)("div",{className:"post-kinds-card post-kinds-card--mood",children:[(0,s.jsxs)("div",{className:"post-kinds-card__emoji-section",children:[(0,s.jsx)("div",{className:"post-kinds-card__emoji-display",children:(0,s.jsx)("span",{className:"post-kinds-card__emoji-large",children:a||"😊"})}),(0,s.jsx)("div",{className:"post-kinds-card__intensity-dots",children:Array.from({length:5},(e,i)=>(0,s.jsx)("button",{type:"button",className:"post-kinds-card__intensity-dot "+(i<(o||3)?"filled":""),onClick:()=>t({intensity:i+1}),"aria-label":`${(0,f.__)("Set intensity to","post-kinds-for-indieweb")} ${i+1}`},i))}),(0,s.jsx)("div",{className:"post-kinds-card__emoji-picker",children:fe.map(e=>(0,s.jsx)("div",{className:"post-kinds-card__emoji-category",children:e.emojis.map(e=>(0,s.jsx)("button",{type:"button",className:"post-kinds-card__emoji-btn "+(a===e?"selected":""),onClick:()=>{t({emoji:e})},children:e},e))},e.name))})]}),(0,s.jsxs)("div",{className:"post-kinds-card__content",children:[(0,s.jsxs)("span",{className:"post-kinds-card__badge",children:["😊 ",(0,f.__)("Feeling","post-kinds-for-indieweb")]}),(0,s.jsx)(j.RichText,{tagName:"h3",className:"post-kinds-card__title",value:i,onChange:e=>t({mood:e}),placeholder:(0,f.__)("How are you feeling?","post-kinds-for-indieweb")}),(0,s.jsx)(j.RichText,{tagName:"p",className:"post-kinds-card__notes",value:n,onChange:e=>t({note:e}),placeholder:(0,f.__)("What's on your mind?","post-kinds-for-indieweb")})]})]})})]})},save:function({attributes:e}){const{mood:t,emoji:i,note:a,intensity:n,moodAt:o,layout:r}=e,l=j.useBlockProps.save({className:`mood-card layout-${r}`});return(0,s.jsx)("div",{...l,children:(0,s.jsxs)("div",{className:"post-kinds-card post-kinds-card--mood h-entry",children:[(0,s.jsxs)("div",{className:"post-kinds-card__emoji-section",children:[(0,s.jsx)("div",{className:"post-kinds-card__emoji-display",children:(0,s.jsx)("span",{className:"post-kinds-card__emoji-large",role:"img","aria-label":t||"mood",children:i||"😊"})}),(0,s.jsx)("div",{className:"post-kinds-card__intensity-dots","aria-label":`Intensity: ${n} out of 5`,children:Array.from({length:5},(e,t)=>(0,s.jsx)("span",{className:"post-kinds-card__intensity-dot "+(t<n?"filled":"")},t))})]}),(0,s.jsxs)("div",{className:"post-kinds-card__content",children:[t&&(0,s.jsx)("h3",{className:"post-kinds-card__title p-name",children:t}),a&&(0,s.jsx)("p",{className:"post-kinds-card__notes p-content",children:a}),o&&(0,s.jsx)("time",{className:"post-kinds-card__timestamp dt-published",dateTime:new Date(o).toISOString(),children:new Date(o).toLocaleString()})]})]})})}});const Ne=[{label:(0,f.__)("Purchase","post-kinds-for-indieweb"),value:"purchase",emoji:"🛒"},{label:(0,f.__)("Gift","post-kinds-for-indieweb"),value:"gift",emoji:"🎁"},{label:(0,f.__)("Found","post-kinds-for-indieweb"),value:"found",emoji:"🔍"},{label:(0,f.__)("Won","post-kinds-for-indieweb"),value:"won",emoji:"🏆"},{label:(0,f.__)("Trade","post-kinds-for-indieweb"),value:"trade",emoji:"🔄"},{label:(0,f.__)("Free","post-kinds-for-indieweb"),value:"free",emoji:"✨"},{label:(0,f.__)("Inherited","post-kinds-for-indieweb"),value:"inherited",emoji:"📜"},{label:(0,f.__)("Other","post-kinds-for-indieweb"),value:"other",emoji:"📦"}],Ce={purchase:"Purchase",gift:"Gift",found:"Found",won:"Won",trade:"Trade",free:"Free",other:"Other"},Se=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"post-kinds-indieweb/acquisition-card","version":"1.0.0","title":"Acquisition Card","category":"post-kinds-indieweb","description":"Display something you acquired or purchased with photo and details.","keywords":["acquisition","purchase","bought","got","haul"],"textdomain":"post-kinds-indieweb","attributes":{"title":{"type":"string","source":"html","selector":".acquisition-title"},"acquisitionType":{"type":"string","default":"purchase"},"cost":{"type":"string"},"where":{"type":"string"},"whereUrl":{"type":"string"},"photo":{"type":"string","source":"attribute","selector":".acquisition-photo img","attribute":"src"},"photoAlt":{"type":"string"},"notes":{"type":"string","source":"html","selector":".acquisition-notes"},"acquiredAt":{"type":"string"},"layout":{"type":"string","default":"horizontal"}},"supports":{"html":false,"align":["wide","full"],"color":{"background":true,"text":true,"gradients":true,"link":true},"spacing":{"margin":true,"padding":true,"blockGap":true},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontFamily":true,"__experimentalFontWeight":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true},"__experimentalBorder":{"color":true,"radius":true,"width":true,"style":true,"__experimentalDefaultControls":{"color":true,"radius":true,"width":true,"style":true}},"shadow":true,"dimensions":{"minHeight":true}},"example":{"attributes":{"title":"New Headphones","acquisitionType":"purchase","cost":"$150","where":"Amazon"}}}');(0,t.registerBlockType)(Se.name,{...Se,icon:w,edit:function({attributes:e,setAttributes:t}){const{title:i,acquisitionType:a,cost:n,where:o,whereUrl:r,photo:l,photoAlt:d,notes:c}=e,p=(0,j.useBlockProps)({className:"acquisition-card-block"}),{editPost:u}=(0,$.useDispatch)("core/editor"),h=(0,$.useSelect)(e=>{const t=e("core/editor").getEditedPostAttribute("indieblocks_kind");return t&&t.length>0?t[0]:null},[]);(0,N.useEffect)(()=>{h||wp.apiFetch({path:"/wp/v2/kind?slug=acquisition"}).then(e=>{e&&e.length>0&&u({indieblocks_kind:[e[0].id]})}).catch(()=>{})},[]),(0,N.useEffect)(()=>{const e={};void 0!==i&&(e._postkind_acquisition_title=i||""),void 0!==a&&(e._postkind_acquisition_type=a||""),void 0!==n&&(e._postkind_acquisition_cost=n||""),void 0!==o&&(e._postkind_acquisition_where=o||""),void 0!==r&&(e._postkind_acquisition_where_url=r||""),void 0!==l&&(e._postkind_acquisition_photo=l||""),Object.keys(e).length>0&&u({meta:e})},[i,a,n,o,r,l]);const _=e=>{e.stopPropagation(),t({photo:"",photoAlt:""})},m=(b=a,Ne.find(e=>e.value===b)||Ne[0]);var b;const k=Ne.map(e=>({label:`${e.emoji} ${e.label}`,value:e.value}));return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(j.InspectorControls,{children:[(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Acquisition Details","post-kinds-for-indieweb"),initialOpen:!0,children:[(0,s.jsx)(y.TextControl,{label:(0,f.__)("Title","post-kinds-for-indieweb"),value:i||"",onChange:e=>t({title:e}),placeholder:(0,f.__)("What did you get?","post-kinds-for-indieweb")}),(0,s.jsx)(y.SelectControl,{label:(0,f.__)("Type","post-kinds-for-indieweb"),value:a||"purchase",options:k,onChange:e=>t({acquisitionType:e})}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Cost","post-kinds-for-indieweb"),value:n||"",onChange:e=>t({cost:e}),placeholder:(0,f.__)("$0.00","post-kinds-for-indieweb")}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("From Where","post-kinds-for-indieweb"),value:o||"",onChange:e=>t({where:e}),placeholder:(0,f.__)("Store or source","post-kinds-for-indieweb")}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Store/Source URL","post-kinds-for-indieweb"),value:r||"",onChange:e=>t({whereUrl:e}),type:"url",help:(0,f.__)("Link to where you got it","post-kinds-for-indieweb")})]}),(0,s.jsx)(y.PanelBody,{title:(0,f.__)("Notes","post-kinds-for-indieweb"),initialOpen:!1,children:(0,s.jsx)(y.TextControl,{label:(0,f.__)("Notes","post-kinds-for-indieweb"),value:c||"",onChange:e=>t({notes:e}),placeholder:(0,f.__)("Notes about this…","post-kinds-for-indieweb")})})]}),(0,s.jsx)("div",{...p,children:(0,s.jsxs)("div",{className:"post-kinds-card",children:[(0,s.jsx)("div",{className:"post-kinds-card__media",style:{width:"120px"},children:(0,s.jsx)(j.MediaUploadCheck,{children:(0,s.jsx)(j.MediaUpload,{onSelect:e=>{t({photo:e.url,photoAlt:e.alt||i||(0,f.__)("Acquisition photo","post-kinds-for-indieweb")})},allowedTypes:["image"],render:({open:e})=>(0,s.jsx)("button",{type:"button",className:"post-kinds-card__media-button",onClick:e,children:l?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("img",{src:l,alt:d||i,className:"post-kinds-card__image"}),(0,s.jsx)("button",{type:"button",className:"post-kinds-card__media-remove",onClick:_,"aria-label":(0,f.__)("Remove photo","post-kinds-for-indieweb"),children:"×"})]}):(0,s.jsxs)("div",{className:"post-kinds-card__media-placeholder",children:[(0,s.jsx)("span",{className:"post-kinds-card__media-icon",children:m.emoji}),(0,s.jsx)("span",{className:"post-kinds-card__media-text",children:(0,f.__)("Add Photo (Optional)","post-kinds-for-indieweb")})]})})})})}),(0,s.jsxs)("div",{className:"post-kinds-card__content",children:[(0,s.jsx)("div",{className:"post-kinds-card__type-row",children:(0,s.jsx)("select",{className:"post-kinds-card__type-select",value:a||"purchase",onChange:e=>t({acquisitionType:e.target.value}),children:Ne.map(e=>(0,s.jsxs)("option",{value:e.value,children:[e.emoji," ",e.label]},e.value))})}),(0,s.jsx)(j.RichText,{tagName:"h3",className:"post-kinds-card__title",value:i,onChange:e=>t({title:e}),placeholder:(0,f.__)("What did you get?","post-kinds-for-indieweb")}),(0,s.jsxs)("div",{className:"post-kinds-card__input-row",children:[(0,s.jsx)("span",{className:"post-kinds-card__input-icon",children:"💰"}),(0,s.jsx)("input",{type:"text",className:"post-kinds-card__input post-kinds-card__input--price",value:n||"",onChange:e=>t({cost:e.target.value}),placeholder:"gift"===a||"free"===a?(0,f.__)("Free!","post-kinds-for-indieweb"):(0,f.__)("$0.00","post-kinds-for-indieweb")})]}),(0,s.jsx)(j.RichText,{tagName:"p",className:"post-kinds-card__location",value:o,onChange:e=>t({where:e}),placeholder:(0,f.__)("From where?","post-kinds-for-indieweb")}),(0,s.jsx)(j.RichText,{tagName:"p",className:"post-kinds-card__notes",value:c,onChange:e=>t({notes:e}),placeholder:(0,f.__)("Notes about this…","post-kinds-for-indieweb")})]})]})})]})},save:function({attributes:e}){const{title:t,acquisitionType:i,cost:a,where:n,whereUrl:o,photo:r,photoAlt:l,notes:d,acquiredAt:c,layout:p}=e,u=j.useBlockProps.save({className:`acquisition-card layout-${p}`});return(0,s.jsx)("div",{...u,children:(0,s.jsxs)("div",{className:"post-kinds-card h-cite",children:[r&&(0,s.jsx)("div",{className:"post-kinds-card__media",children:(0,s.jsx)("img",{src:r,alt:l||t,className:"post-kinds-card__image u-photo",loading:"lazy"})}),(0,s.jsxs)("div",{className:"post-kinds-card__content",children:[(0,s.jsx)("span",{className:"post-kinds-card__badge",children:Ce[i]||i}),t&&(0,s.jsx)("h3",{className:"post-kinds-card__title p-name",children:o?(0,s.jsx)("a",{href:o,className:"u-url",target:"_blank",rel:"noopener noreferrer",children:t}):t}),a&&(0,s.jsx)("p",{className:"post-kinds-card__subtitle",children:a}),n&&(0,s.jsxs)("p",{className:"post-kinds-card__meta p-location",children:["from ",n]}),d&&(0,s.jsx)("p",{className:"post-kinds-card__notes p-content",children:d}),c&&(0,s.jsx)("time",{className:"post-kinds-card__timestamp dt-published",dateTime:new Date(c).toISOString(),children:new Date(c).toLocaleString()})]}),(0,s.jsx)("data",{className:"u-acquired",value:t||"",hidden:!0})]})})}});const Te=JSON.parse('{"UU":"post-kinds-indieweb/checkin-dashboard"}');(0,t.registerBlockType)(Te.UU,{edit:function({attributes:e,setAttributes:t}){const{layout:i,showMap:a,showStats:n,limit:o,showFilters:r}=e,[l,d]=(0,N.useState)([]),[c,p]=(0,N.useState)({}),[u,h]=(0,N.useState)(!0),_=(0,j.useBlockProps)({className:`checkin-dashboard-block layout-${i}`});return(0,N.useEffect)(()=>{h(!0),Promise.all([M()({path:`/post-kinds-indieweb/v1/checkins?per_page=${o}`}),M()({path:"/post-kinds-indieweb/v1/checkins/stats"})]).then(([e,t])=>{d(e||[]),p(t||{}),h(!1)}).catch(()=>{h(!1)})},[o]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.InspectorControls,{children:(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Display Settings","post-kinds-for-indieweb"),children:[(0,s.jsx)(y.SelectControl,{label:(0,f.__)("Default Layout","post-kinds-for-indieweb"),value:i,options:[{label:(0,f.__)("Grid","post-kinds-for-indieweb"),value:"grid"},{label:(0,f.__)("Map","post-kinds-for-indieweb"),value:"map"},{label:(0,f.__)("Timeline","post-kinds-for-indieweb"),value:"timeline"}],onChange:e=>t({layout:e})}),(0,s.jsx)(y.RangeControl,{label:(0,f.__)("Number of Check-ins","post-kinds-for-indieweb"),value:o,onChange:e=>t({limit:e}),min:4,max:50}),(0,s.jsx)(y.ToggleControl,{label:(0,f.__)("Show Map View","post-kinds-for-indieweb"),checked:a,onChange:e=>t({showMap:e})}),(0,s.jsx)(y.ToggleControl,{label:(0,f.__)("Show Statistics","post-kinds-for-indieweb"),checked:n,onChange:e=>t({showStats:e})}),(0,s.jsx)(y.ToggleControl,{label:(0,f.__)("Show Filters","post-kinds-for-indieweb"),checked:r,onChange:e=>t({showFilters:e})})]})}),(0,s.jsx)("div",{..._,children:(0,s.jsxs)("div",{className:"checkin-dashboard-preview",children:[n&&(0,s.jsxs)("div",{className:"checkin-stats-preview",children:[(0,s.jsxs)("div",{className:"stat-item",children:[(0,s.jsx)("span",{className:"stat-value",children:c.total||0}),(0,s.jsx)("span",{className:"stat-label",children:(0,f.__)("Check-ins","post-kinds-for-indieweb")})]}),(0,s.jsxs)("div",{className:"stat-item",children:[(0,s.jsx)("span",{className:"stat-value",children:c.unique_venues||0}),(0,s.jsx)("span",{className:"stat-label",children:(0,f.__)("Venues","post-kinds-for-indieweb")})]}),(0,s.jsxs)("div",{className:"stat-item",children:[(0,s.jsx)("span",{className:"stat-value",children:c.countries?.length||0}),(0,s.jsx)("span",{className:"stat-label",children:(0,f.__)("Countries","post-kinds-for-indieweb")})]})]}),u?(0,s.jsxs)("div",{className:"checkin-loading",children:[(0,s.jsx)("span",{className:"spinner is-active"}),(0,f.__)("Loading check-ins…","post-kinds-for-indieweb")]}):0===l.length?(0,s.jsxs)("div",{className:"checkin-empty",children:[(0,s.jsx)("span",{className:"dashicons dashicons-location"}),(0,s.jsx)("p",{children:(0,f.__)("No check-ins found. Create check-in posts to see them here.","post-kinds-for-indieweb")})]}):(0,s.jsx)("div",{className:"checkin-grid-preview",children:l.slice(0,6).map((e,t)=>(0,s.jsxs)("div",{className:"checkin-card-preview",children:[e.photo?(0,s.jsx)("img",{src:e.photo,alt:e.venue_name}):(0,s.jsx)("div",{className:"no-photo",children:(0,s.jsx)("span",{className:"dashicons dashicons-location"})}),(0,s.jsxs)("div",{className:"checkin-info",children:[(0,s.jsx)("strong",{children:e.venue_name}),(0,s.jsx)("span",{children:e.city})]})]},t))}),l.length>6&&(0,s.jsx)("p",{className:"checkin-more",children:(0,f.__)("+ more check-ins will be shown on the frontend","post-kinds-for-indieweb")})]})})]})},save:()=>null});const De=JSON.parse('{"UU":"post-kinds-indieweb/checkins-feed"}'),Ae=(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:(0,s.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})});(0,t.registerBlockType)(De.UU,{icon:Ae,edit:function({attributes:e,setAttributes:t}){const{count:i,showMap:a,showVenue:n,showDate:o,showExcerpt:r,venueId:l,layout:d,columns:c}=e,[p,u]=(0,N.useState)([]),[h,_]=(0,N.useState)([]),[m,b]=(0,N.useState)(!0),k=(0,j.useBlockProps)({className:`checkins-feed layout-${d}`});(0,N.useEffect)(()=>{M()({path:"/wp/v2/venue?per_page=100"}).then(e=>{_(e||[])}).catch(()=>{_([])})},[]),(0,N.useEffect)(()=>{b(!0);let e=`/wp/v2/checkin?per_page=${i}&_embed`;l>0&&(e+=`&venue=${l}`),M()({path:e}).then(e=>{u(e||[]),b(!1)}).catch(()=>{M()({path:`/wp/v2/posts?per_page=${i}&indieblocks_kind=checkin&_embed`}).then(e=>{u(e||[]),b(!1)}).catch(()=>{u([]),b(!1)})})},[i,l]);const g=[{value:0,label:(0,f.__)("All Venues","post-kinds-for-indieweb")},...h.map(e=>({value:e.id,label:e.name}))];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(j.InspectorControls,{children:[(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Feed Settings","post-kinds-for-indieweb"),children:[(0,s.jsx)(y.RangeControl,{label:(0,f.__)("Number of Check-ins","post-kinds-for-indieweb"),value:i,onChange:e=>t({count:e}),min:1,max:50}),(0,s.jsx)(y.SelectControl,{label:(0,f.__)("Filter by Venue","post-kinds-for-indieweb"),value:l,options:g,onChange:e=>t({venueId:parseInt(e,10)})}),(0,s.jsx)(y.SelectControl,{label:(0,f.__)("Layout","post-kinds-for-indieweb"),value:d,options:[{value:"list",label:(0,f.__)("List","post-kinds-for-indieweb")},{value:"grid",label:(0,f.__)("Grid","post-kinds-for-indieweb")},{value:"compact",label:(0,f.__)("Compact","post-kinds-for-indieweb")}],onChange:e=>t({layout:e})}),"grid"===d&&(0,s.jsx)(y.RangeControl,{label:(0,f.__)("Columns","post-kinds-for-indieweb"),value:c,onChange:e=>t({columns:e}),min:2,max:4})]}),(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Display Options","post-kinds-for-indieweb"),initialOpen:!1,children:[(0,s.jsx)(y.ToggleControl,{label:(0,f.__)("Show Map","post-kinds-for-indieweb"),checked:a,onChange:e=>t({showMap:e}),help:(0,f.__)("Display a map with check-in locations.","post-kinds-for-indieweb")}),(0,s.jsx)(y.ToggleControl,{label:(0,f.__)("Show Venue Name","post-kinds-for-indieweb"),checked:n,onChange:e=>t({showVenue:e})}),(0,s.jsx)(y.ToggleControl,{label:(0,f.__)("Show Date","post-kinds-for-indieweb"),checked:o,onChange:e=>t({showDate:e})}),(0,s.jsx)(y.ToggleControl,{label:(0,f.__)("Show Excerpt","post-kinds-for-indieweb"),checked:r,onChange:e=>t({showExcerpt:e})})]})]}),(0,s.jsxs)("div",{...k,children:[m&&(0,s.jsx)(y.Placeholder,{icon:"location-alt",label:(0,f.__)("Check-ins Feed","post-kinds-for-indieweb"),children:(0,s.jsx)(y.Spinner,{})}),!m&&0===p.length&&(0,s.jsx)(y.Placeholder,{icon:"location-alt",label:(0,f.__)("Check-ins Feed","post-kinds-for-indieweb"),instructions:(0,f.__)("No check-ins found. Create some check-ins to see them here.","post-kinds-for-indieweb")}),!m&&p.length>0&&(0,s.jsxs)(s.Fragment,{children:[a&&(0,s.jsx)("div",{className:"checkins-feed__map-placeholder",children:(0,s.jsxs)("div",{className:"checkins-feed__map-preview",children:[(0,s.jsx)("span",{className:"dashicons dashicons-location-alt"}),(0,s.jsx)("span",{children:(0,f.__)("Map will display here on the frontend","post-kinds-for-indieweb")})]})}),(0,s.jsx)("div",{className:"checkins-feed__list "+("grid"===d?`columns-${c}`:""),children:p.map(e=>(0,s.jsxs)("article",{className:"checkins-feed__item",children:[(0,s.jsx)("h3",{className:"checkins-feed__title",children:e.title?.rendered||(0,f.__)("(no title)","post-kinds-for-indieweb")}),n&&e._embedded?.["wp:term"]&&(0,s.jsxs)("div",{className:"checkins-feed__venue",children:[(0,s.jsx)("span",{className:"dashicons dashicons-location"}),e._embedded["wp:term"].flat().find(e=>"venue"===e.taxonomy)?.name||(0,f.__)("Unknown venue","post-kinds-for-indieweb")]}),o&&(0,s.jsx)("time",{className:"checkins-feed__date",children:new Date(e.date).toLocaleDateString()}),r&&e.excerpt?.rendered&&(0,s.jsx)("div",{className:"checkins-feed__excerpt",dangerouslySetInnerHTML:{__html:e.excerpt.rendered}})]},e.id))})]})]})]})},save:()=>null});const Pe=JSON.parse('{"UU":"post-kinds-indieweb/venue-detail"}'),Be=(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:(0,s.jsx)("path",{d:"M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z"})});(0,t.registerBlockType)(Pe.UU,{icon:Be,edit:function({attributes:e,setAttributes:t}){const{venueId:i,showMap:a,showAddress:n,showCheckins:o,checkinCount:r}=e,[l,d]=(0,N.useState)([]),[c,p]=(0,N.useState)(null),[u,h]=(0,N.useState)(!0),_=(0,j.useBlockProps)({className:"venue-detail"});(0,N.useEffect)(()=>{M()({path:"/wp/v2/venue?per_page=100"}).then(e=>{d(e||[]),h(!1)}).catch(()=>{d([]),h(!1)})},[]),(0,N.useEffect)(()=>{i>0?M()({path:`/wp/v2/venue/${i}`}).then(e=>{p(e)}).catch(()=>{p(null)}):p(null)},[i]);const m=[{value:0,label:(0,f.__)("— Select a Venue —","post-kinds-for-indieweb")},...l.map(e=>({value:e.id,label:e.name}))];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(j.InspectorControls,{children:[(0,s.jsx)(y.PanelBody,{title:(0,f.__)("Venue Settings","post-kinds-for-indieweb"),children:(0,s.jsx)(y.SelectControl,{label:(0,f.__)("Select Venue","post-kinds-for-indieweb"),value:i,options:m,onChange:e=>t({venueId:parseInt(e,10)}),help:(0,f.__)("Choose the venue to display. On venue archive pages, this will automatically use the current venue.","post-kinds-for-indieweb")})}),(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Display Options","post-kinds-for-indieweb"),initialOpen:!1,children:[(0,s.jsx)(y.ToggleControl,{label:(0,f.__)("Show Map","post-kinds-for-indieweb"),checked:a,onChange:e=>t({showMap:e})}),(0,s.jsx)(y.ToggleControl,{label:(0,f.__)("Show Address","post-kinds-for-indieweb"),checked:n,onChange:e=>t({showAddress:e})}),(0,s.jsx)(y.ToggleControl,{label:(0,f.__)("Show Recent Check-ins","post-kinds-for-indieweb"),checked:o,onChange:e=>t({showCheckins:e})}),o&&(0,s.jsx)(y.RangeControl,{label:(0,f.__)("Number of Check-ins","post-kinds-for-indieweb"),value:r,onChange:e=>t({checkinCount:e}),min:1,max:20})]})]}),(0,s.jsxs)("div",{..._,children:[u&&(0,s.jsx)(y.Placeholder,{icon:"store",label:(0,f.__)("Venue Detail","post-kinds-for-indieweb"),children:(0,s.jsx)(y.Spinner,{})}),!u&&0===i&&(0,s.jsx)(y.Placeholder,{icon:"store",label:(0,f.__)("Venue Detail","post-kinds-for-indieweb"),instructions:(0,f.__)("Select a venue from the block settings, or this block will automatically display the current venue on venue archive pages.","post-kinds-for-indieweb"),children:(0,s.jsx)(y.SelectControl,{value:i,options:m,onChange:e=>t({venueId:parseInt(e,10)})})}),!u&&i>0&&c&&(0,s.jsxs)("div",{className:"venue-detail__preview",children:[a&&(0,s.jsx)("div",{className:"venue-detail__map-placeholder",children:(0,s.jsxs)("div",{className:"venue-detail__map-preview",children:[(0,s.jsx)("span",{className:"dashicons dashicons-location-alt"}),(0,s.jsx)("span",{children:(0,f.__)("Map will display here on the frontend","post-kinds-for-indieweb")})]})}),(0,s.jsxs)("div",{className:"venue-detail__info",children:[(0,s.jsx)("h2",{className:"venue-detail__name",children:c.name}),n&&c.meta&&(0,s.jsx)("div",{className:"venue-detail__address",children:[c.meta.address,c.meta.city,c.meta.country].filter(Boolean).join(", ")||(0,f.__)("No address available","post-kinds-for-indieweb")}),o&&(0,s.jsxs)("div",{className:"venue-detail__checkins-preview",children:[(0,s.jsx)("h3",{children:(0,f.__)("Recent Check-ins","post-kinds-for-indieweb")}),(0,s.jsx)("p",{className:"description",children:(0,f.__)("Check-ins will be displayed here on the frontend.","post-kinds-for-indieweb")})]})]})]}),!u&&i>0&&!c&&(0,s.jsx)(y.Placeholder,{icon:"store",label:(0,f.__)("Venue Detail","post-kinds-for-indieweb"),instructions:(0,f.__)("Venue not found. Please select a different venue.","post-kinds-for-indieweb")})]})]})},save:()=>null});const Le=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"post-kinds-indieweb/star-rating","version":"1.0.0","title":"Star Rating","category":"post-kinds-indieweb","description":"Add an interactive star rating to any content with customizable scale and style.","keywords":["rating","stars","review","score","feedback"],"textdomain":"post-kinds-indieweb","attributes":{"rating":{"type":"number","default":0},"maxRating":{"type":"number","default":5},"showLabel":{"type":"boolean","default":true},"label":{"type":"string","default":"Rating"},"showValue":{"type":"boolean","default":true},"size":{"type":"string","default":"medium"},"style":{"type":"string","default":"stars"},"allowHalf":{"type":"boolean","default":false},"itemUrl":{"type":"string"},"itemName":{"type":"string"}},"supports":{"html":false,"align":["left","center","right"],"color":{"text":true},"spacing":{"margin":true,"padding":true},"typography":{"fontSize":true}},"example":{"attributes":{"rating":4,"maxRating":5,"label":"My Rating"}},"editorStyle":"file:./editor.css","style":"file:./style.css"}');(0,t.registerBlockType)(Le.name,{...Le,icon:d,edit:function({attributes:e,setAttributes:t}){const{rating:i,maxRating:a,showLabel:n,label:o,showValue:r,size:l,style:d,allowHalf:c,itemUrl:p,itemName:u}=e,h=(0,j.useBlockProps)({className:`star-rating-block size-${l} style-${d}`}),_=[{label:(0,f.__)("Small","post-kinds-for-indieweb"),value:"small"},{label:(0,f.__)("Medium","post-kinds-for-indieweb"),value:"medium"},{label:(0,f.__)("Large","post-kinds-for-indieweb"),value:"large"}],m=[{label:(0,f.__)("Stars","post-kinds-for-indieweb"),value:"stars"},{label:(0,f.__)("Hearts","post-kinds-for-indieweb"),value:"hearts"},{label:(0,f.__)("Circles","post-kinds-for-indieweb"),value:"circles"},{label:(0,f.__)("Numeric","post-kinds-for-indieweb"),value:"numeric"}],b=e=>{const t={stars:{filled:"★",empty:"☆"},hearts:{filled:"❤️",empty:"🤍"},circles:{filled:"●",empty:"○"},numeric:{filled:null,empty:null}};return e?t[d]?.filled:t[d]?.empty},k=e=>{t(e===i?{rating:0}:{rating:e})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(j.InspectorControls,{children:[(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Rating Settings","post-kinds-for-indieweb"),children:[(0,s.jsx)(y.RangeControl,{label:(0,f.__)("Current Rating","post-kinds-for-indieweb"),value:i,onChange:e=>t({rating:e}),min:0,max:a,step:c?.5:1}),(0,s.jsx)(y.RangeControl,{label:(0,f.__)("Maximum Rating","post-kinds-for-indieweb"),value:a,onChange:e=>t({maxRating:e}),min:3,max:10}),(0,s.jsx)(y.ToggleControl,{label:(0,f.__)("Allow Half Stars","post-kinds-for-indieweb"),checked:c,onChange:e=>t({allowHalf:e})})]}),(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Display Options","post-kinds-for-indieweb"),children:[(0,s.jsx)(y.SelectControl,{label:(0,f.__)("Style","post-kinds-for-indieweb"),value:d,options:m,onChange:e=>t({style:e})}),(0,s.jsx)(y.SelectControl,{label:(0,f.__)("Size","post-kinds-for-indieweb"),value:l,options:_,onChange:e=>t({size:e})}),(0,s.jsx)(y.ToggleControl,{label:(0,f.__)("Show Label","post-kinds-for-indieweb"),checked:n,onChange:e=>t({showLabel:e})}),n&&(0,s.jsx)(y.TextControl,{label:(0,f.__)("Label Text","post-kinds-for-indieweb"),value:o,onChange:e=>t({label:e})}),(0,s.jsx)(y.ToggleControl,{label:(0,f.__)("Show Value","post-kinds-for-indieweb"),checked:r,onChange:e=>t({showValue:e})})]}),(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Rated Item","post-kinds-for-indieweb"),initialOpen:!1,children:[(0,s.jsx)(y.TextControl,{label:(0,f.__)("Item Name","post-kinds-for-indieweb"),value:u||"",onChange:e=>t({itemName:e}),help:(0,f.__)("What are you rating?","post-kinds-for-indieweb")}),(0,s.jsx)(y.TextControl,{label:(0,f.__)("Item URL","post-kinds-for-indieweb"),value:p||"",onChange:e=>t({itemUrl:e}),type:"url"})]})]}),(0,s.jsx)("div",{...h,children:(0,s.jsxs)("div",{className:"star-rating-inner",children:[n&&o&&(0,s.jsx)("span",{className:"rating-label",children:o}),"numeric"===d?(0,s.jsxs)("div",{className:"rating-numeric",children:[(0,s.jsx)(y.RangeControl,{value:i,onChange:e=>t({rating:e}),min:0,max:a,step:c?.5:1,withInputField:!0}),(0,s.jsxs)("span",{className:"rating-display",children:[i," / ",a]})]}):(0,s.jsx)("div",{className:"rating-icons",role:"radiogroup","aria-label":o||(0,f.__)("Rating","post-kinds-for-indieweb"),children:Array.from({length:a},(e,n)=>{const o=n+1,r=o<=i,l=c&&o-.5===i;return(0,s.jsx)("button",{type:"button",className:`rating-icon ${r?"filled":""} ${l?"half-filled":""}`,onClick:()=>k(o),onKeyDown:e=>((e,s)=>{const n=s+1;"Enter"===e.key||" "===e.key?(e.preventDefault(),k(n)):"ArrowRight"===e.key||"ArrowUp"===e.key?(e.preventDefault(),i<a&&t({rating:i+(c?.5:1)})):"ArrowLeft"!==e.key&&"ArrowDown"!==e.key||(e.preventDefault(),i>0&&t({rating:i-(c?.5:1)}))})(e,n),role:"radio","aria-checked":r,"aria-label":`${o} ${1===o?(0,f.__)("star","post-kinds-for-indieweb"):(0,f.__)("stars","post-kinds-for-indieweb")}`,tabIndex:0===n?0:-1,children:l?(0,s.jsxs)("span",{className:"half-star",children:[(0,s.jsx)("span",{className:"half-filled-part",children:b(!0)}),(0,s.jsx)("span",{className:"half-empty-part",children:b(!1)})]}):(0,s.jsx)("span",{children:b(r)})},n)})}),r&&"numeric"!==d&&(0,s.jsxs)("span",{className:"rating-value",children:[i," / ",a]})]})})]})},save:function({attributes:e}){const{rating:t,maxRating:i,showLabel:a,label:n,showValue:o,size:r,style:l,allowHalf:d,itemUrl:c,itemName:p}=e,u=j.useBlockProps.save({className:`star-rating-block size-${r} style-${l}`}),h=e=>{const t={stars:{filled:"★",empty:"☆"},hearts:{filled:"❤️",empty:"🤍"},circles:{filled:"●",empty:"○"},numeric:{filled:null,empty:null}};return e?t[l]?.filled:t[l]?.empty};return(0,s.jsx)("div",{...u,children:(0,s.jsxs)("div",{className:"star-rating-inner h-review","aria-label":`Rating: ${t} out of ${i}`,children:[a&&n&&(0,s.jsx)("span",{className:"rating-label",children:n}),(0,s.jsx)("div",{className:"rating-display",children:"numeric"===l?(0,s.jsxs)("span",{className:"rating-numeric-display",children:[t," / ",i]}):(()=>{const e=[];for(let a=0;a<i;a++){const i=a+1,n=i<=t,o=d&&i-.5===t;e.push((0,s.jsx)("span",{className:`rating-icon ${n?"filled":""} ${o?"half-filled":""}`,"aria-hidden":"true",children:o?(0,s.jsxs)("span",{className:"half-star",children:[(0,s.jsx)("span",{className:"half-filled-part",children:h(!0)}),(0,s.jsx)("span",{className:"half-empty-part",children:h(!1)})]}):h(n)},a))}return e})()}),o&&"numeric"!==l&&(0,s.jsxs)("span",{className:"rating-value",children:[t," / ",i]}),(0,s.jsxs)("data",{className:"p-rating",value:t,children:[(0,s.jsx)("data",{className:"p-best",value:i,hidden:!0}),(0,s.jsx)("data",{className:"p-worst",value:"0",hidden:!0})]}),p&&(0,s.jsx)("span",{className:"p-item h-product",hidden:!0,children:c?(0,s.jsx)("a",{href:c,className:"p-name u-url",children:p}):(0,s.jsx)("span",{className:"p-name",children:p})}),(0,s.jsxs)("span",{itemProp:"reviewRating",itemScope:!0,itemType:"https://schema.org/Rating",hidden:!0,children:[(0,s.jsx)("meta",{itemProp:"worstRating",content:"0"}),(0,s.jsx)("meta",{itemProp:"ratingValue",content:t.toString()}),(0,s.jsx)("meta",{itemProp:"bestRating",content:i.toString()})]})]})})}});const Ie=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"post-kinds-indieweb/media-lookup","version":"1.0.0","title":"Media Lookup","category":"post-kinds-indieweb","description":"Search and embed media info from external APIs (books, movies, music).","keywords":["lookup","search","media","book","movie","music","api"],"textdomain":"post-kinds-indieweb","attributes":{"mediaType":{"type":"string","default":"book"},"searchQuery":{"type":"string"},"selectedItem":{"type":"object"},"displayStyle":{"type":"string","default":"card"},"showImage":{"type":"boolean","default":true},"showDescription":{"type":"boolean","default":true},"linkToSource":{"type":"boolean","default":true}},"supports":{"html":false,"align":["wide","full"],"color":{"background":true,"text":true},"spacing":{"margin":true,"padding":true},"typography":{"fontSize":true},"__experimentalBorder":{"color":true,"radius":true,"width":true}},"example":{"attributes":{"mediaType":"book","selectedItem":{"title":"The Great Gatsby","author":"F. Scott Fitzgerald","year":"1925"}}},"editorStyle":"file:./editor.css","style":"file:./style.css"}');(0,t.registerBlockType)(Ie.name,{...Ie,icon:p,edit:function({attributes:e,setAttributes:t}){const{mediaType:i,selectedItem:a,displayStyle:n,showImage:o,showDescription:r,linkToSource:l}=e,[,d]=(0,N.useState)(!1),c=(0,j.useBlockProps)({className:`media-lookup-block type-${i} style-${n}`}),p=[{label:(0,f.__)("Book","post-kinds-for-indieweb"),value:"book"},{label:(0,f.__)("Movie/TV","post-kinds-for-indieweb"),value:"movie"},{label:(0,f.__)("Music","post-kinds-for-indieweb"),value:"music"}],u=[{label:(0,f.__)("Card","post-kinds-for-indieweb"),value:"card"},{label:(0,f.__)("Inline","post-kinds-for-indieweb"),value:"inline"},{label:(0,f.__)("Compact","post-kinds-for-indieweb"),value:"compact"}],h=()=>({book:"Open Library",movie:"TMDB",music:"MusicBrainz"}[i]||"External API"),_=()=>{t({selectedItem:null,searchQuery:""})};return a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(j.InspectorControls,{children:[(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Display Settings","post-kinds-for-indieweb"),children:[(0,s.jsx)(y.SelectControl,{label:(0,f.__)("Display Style","post-kinds-for-indieweb"),value:n,options:u,onChange:e=>t({displayStyle:e})}),(0,s.jsx)(y.ToggleControl,{label:(0,f.__)("Show Image","post-kinds-for-indieweb"),checked:o,onChange:e=>t({showImage:e})}),(0,s.jsx)(y.ToggleControl,{label:(0,f.__)("Show Description","post-kinds-for-indieweb"),checked:r,onChange:e=>t({showDescription:e})}),(0,s.jsx)(y.ToggleControl,{label:(0,f.__)("Link to Source","post-kinds-for-indieweb"),checked:l,onChange:e=>t({linkToSource:e})})]}),(0,s.jsxs)(y.PanelBody,{title:(0,f.__)("Media Info","post-kinds-for-indieweb"),initialOpen:!1,children:[(0,s.jsxs)("p",{className:"components-base-control__help",children:[(0,f.__)("Data fetched from","post-kinds-for-indieweb")," ",h()]}),a&&(0,s.jsxs)("div",{className:"selected-item-details",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:(0,f.__)("Title:","post-kinds-for-indieweb")})," ",a.title||a.name]}),a.id&&(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:(0,f.__)("ID:","post-kinds-for-indieweb")})," ",a.id]})]}),(0,s.jsx)(y.Button,{variant:"secondary",onClick:_,isDestructive:!0,children:(0,f.__)("Remove & Search Again","post-kinds-for-indieweb")})]})]}),(0,s.jsx)("div",{...c,children:(0,s.jsx)("div",{className:"media-lookup-inner h-cite",children:(()=>{if(!a)return null;const e=a.title||a.name||"",t=a.author||a.artist||a.director||"",i=a.year||a.release_year||a.first_publish_year||"",d=a.cover||a.image||a.poster||"",c=a.description||a.overview||"",p=a.url||a.link||"";return(0,s.jsxs)("div",{className:`media-item-preview style-${n}`,children:[o&&d&&(0,s.jsx)("div",{className:"media-image",children:(0,s.jsx)(S,{src:d,alt:e,size:"compact"===n?"small":"medium"})}),(0,s.jsxs)("div",{className:"media-info",children:[(0,s.jsx)("h3",{className:"media-title",children:l&&p?(0,s.jsx)("a",{href:p,target:"_blank",rel:"noopener noreferrer",children:e}):e}),t&&(0,s.jsx)("p",{className:"media-subtitle",children:t}),i&&(0,s.jsx)("span",{className:"media-year",children:i}),r&&c&&"compact"!==n&&(0,s.jsx)("p",{className:"media-description",children:c.length>200?`${c.substring(0,200)}...`:c}),(0,s.jsx)("div",{className:"media-source",children:(0,s.jsxs)("span",{className:"source-label",children:[(0,f.__)("via","post-kinds-for-indieweb")," ",h()]})})]}),(0,s.jsx)(y.Button,{variant:"secondary",onClick:_,className:"clear-selection",isSmall:!0,children:(0,f.__)("Change","post-kinds-for-indieweb")})]})})()})})]}):(0,s.jsxs)("div",{...c,children:[(0,s.jsx)(j.InspectorControls,{children:(0,s.jsx)(y.PanelBody,{title:(0,f.__)("Media Type","post-kinds-for-indieweb"),children:(0,s.jsx)(y.SelectControl,{label:(0,f.__)("Type","post-kinds-for-indieweb"),value:i,options:p,onChange:e=>t({mediaType:e})})})}),(0,s.jsx)(A,{icon:(0,s.jsx)("span",{className:"media-type-icon",children:{book:"📚",movie:"🎬",music:"🎵"}[i]||"📦"}),label:(0,f.__)("Media Lookup","post-kinds-for-indieweb"),instructions:(0,f.__)("Search for media to embed information about a book, movie, or music.","post-kinds-for-indieweb"),children:(0,s.jsxs)("div",{className:"media-lookup-search",children:[(0,s.jsx)("div",{className:"media-type-selector",children:p.map(e=>(0,s.jsx)(y.Button,{variant:i===e.value?"primary":"secondary",onClick:()=>t({mediaType:e.value}),isSmall:!0,children:e.label},e.value))}),(0,s.jsx)(T,{type:i,placeholder:{book:(0,f.__)("Search by title, author, or ISBN…","post-kinds-for-indieweb"),movie:(0,f.__)("Search by title, year, or actor…","post-kinds-for-indieweb"),music:(0,f.__)("Search by song, artist, or album…","post-kinds-for-indieweb")}[i]||(0,f.__)("Search…","post-kinds-for-indieweb"),onSelect:e=>{t({selectedItem:e,searchQuery:""}),d(!1)}})]})})]})},save:function({attributes:e}){const{mediaType:t,selectedItem:i,displayStyle:a,showImage:n,showDescription:o,linkToSource:r}=e;if(!i)return null;const l=j.useBlockProps.save({className:`media-lookup-block type-${t} style-${a}`}),d=i.title||i.name||"",c=i.author||i.artist||i.director||"",p=i.year||i.release_year||i.first_publish_year||"",u=i.cover||i.image||i.poster||"",h=i.description||i.overview||"",_=i.url||i.link||"",m=i.id||i.key||"",b=(()=>{if(_)return _;switch(t){case"book":if(i.key)return`https://openlibrary.org${i.key}`;if(i.isbn)return`https://openlibrary.org/isbn/${i.isbn}`;break;case"movie":if(i.tmdb_id)return`https://www.themoviedb.org/${"tv"===i.media_type?"tv":"movie"}/${i.tmdb_id}`;if(i.imdb_id)return`https://www.imdb.com/title/${i.imdb_id}`;break;case"music":if(i.musicbrainz_id)return`https://musicbrainz.org/recording/${i.musicbrainz_id}`}return null})();return(0,s.jsx)("div",{...l,children:(0,s.jsxs)("div",{className:`media-lookup-inner ${(()=>{switch(t){case"book":return"h-cite p-read-of";case"movie":return"h-cite p-watch-of";case"music":return"h-cite p-listen-of";default:return"h-cite"}})()}`,children:[n&&u&&(0,s.jsx)("div",{className:"media-image",children:(0,s.jsx)("img",{src:u,alt:d,className:"u-photo",loading:"lazy"})}),(0,s.jsxs)("div",{className:"media-info",children:[(0,s.jsx)("h3",{className:"media-title p-name",children:r&&b?(0,s.jsx)("a",{href:b,className:"u-url",target:"_blank",rel:"noopener noreferrer",children:d}):d}),c&&(0,s.jsx)("p",{className:"media-subtitle p-author h-card",children:(0,s.jsx)("span",{className:"p-name",children:c})}),p&&(0,s.jsx)("span",{className:"media-year",children:(0,s.jsx)("time",{className:"dt-published",children:p})}),o&&h&&"compact"!==a&&(0,s.jsx)("p",{className:"media-description p-summary",children:h.length>200?`${h.substring(0,200)}...`:h}),(0,s.jsxs)("div",{className:"media-meta",children:["book"===t&&i.isbn&&(0,s.jsx)("data",{className:"p-isbn",value:i.isbn,hidden:!0}),"book"===t&&i.publisher&&(0,s.jsx)("span",{className:"p-publisher",children:i.publisher}),"movie"===t&&i.runtime&&(0,s.jsxs)("span",{className:"runtime",children:[i.runtime," min"]}),"music"===t&&i.album&&(0,s.jsx)("span",{className:"album",children:i.album})]})]}),b&&(0,s.jsx)("data",{className:"u-uid",value:b,hidden:!0}),m&&(0,s.jsx)("data",{className:"p-uid",value:m,hidden:!0})]})})}});const $e=(0,s.jsx)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),Re=(0,t.getCategories)();Re.some(e=>"post-kinds-indieweb"===e.slug)||(0,t.setCategories)([{slug:"post-kinds-indieweb",title:"Post Kinds for IndieWeb",icon:$e},...Re]),(0,t.registerBlockCollection)("post-kinds-indieweb",{title:"Post Kinds for IndieWeb",icon:$e})})();