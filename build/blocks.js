(()=>{"use strict";const e=window.wp.blocks,a=window.wp.primitives,t=window.ReactJSXRuntime,i=(0,t.jsx)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,t.jsx)(a.Path,{d:"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6zm-2 16c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"})}),n=(0,t.jsx)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,t.jsx)(a.Path,{d:"M18 4l2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4h-4z"})}),s=(0,t.jsx)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,t.jsx)(a.Path,{d:"M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z"})}),r=(0,t.jsx)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,t.jsx)(a.Path,{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})}),l=(0,t.jsx)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,t.jsx)(a.Path,{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"})}),o=(0,t.jsx)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,t.jsx)(a.Path,{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}),c=(0,t.jsx)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,t.jsx)(a.Path,{d:"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"})}),d=(0,t.jsx)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,t.jsx)(a.Path,{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})}),h=(a.SVG,a.Path,a.SVG,a.Path,a.SVG,a.Path,a.SVG,a.Path,a.SVG,a.Path,a.SVG,a.Path,(0,t.jsx)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,t.jsx)(a.Path,{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"})})),m=(a.SVG,a.Circle,a.Path,a.SVG,a.Path,window.wp.i18n),u=window.wp.blockEditor,p=window.wp.components,b=window.wp.element;function x({value:e=0,onChange:a,max:i=5,readonly:n=!1}){const[s,r]=(0,b.useState)(0),l=s||e;return(0,t.jsxs)("div",{className:"reactions-star-rating",onMouseLeave:()=>{r(0)},role:"group","aria-label":(0,m.__)("Rating","reactions-indieweb"),children:[Array.from({length:i},(e,a)=>a+1).map(i=>(0,t.jsx)("button",{type:"button",className:"star "+(i<=l?"filled":""),onClick:()=>(t=>{!n&&a&&a(t===e?0:t)})(i),onMouseEnter:()=>(e=>{n||r(e)})(i),disabled:n,"aria-label":`${i} ${1===i?(0,m.__)("star","reactions-indieweb"):(0,m.__)("stars","reactions-indieweb")}`,"aria-pressed":i<=e,children:i<=l?o:c},i)),e>0&&(0,t.jsxs)("span",{className:"rating-text","aria-hidden":"true",children:[e,"/",i]})]})}function g({src:e,alt:a="",size:i="medium",className:n=""}){const[s,r]=(0,b.useState)(!1),[l,o]=(0,b.useState)(!0);return!e||s?(0,t.jsx)("div",{className:`reactions-cover-placeholder ${i} ${n}`,children:h}):(0,t.jsxs)("div",{className:`reactions-cover-image ${i} ${n}`,children:[l&&(0,t.jsx)("div",{className:"cover-loading",children:(0,t.jsx)(p.Spinner,{})}),(0,t.jsx)("img",{src:e,alt:a,onLoad:()=>o(!1),onError:()=>{r(!0),o(!1)},style:{opacity:l?0:1}})]})}function v({type:e,placeholder:a,onSelect:i}){const[n,s]=(0,b.useState)(""),[r,l]=(0,b.useState)([]),[o,c]=(0,b.useState)(!1),[d,h]=(0,b.useState)(""),u=async()=>{if(n.trim()){c(!0),h(""),l([]);try{const a=await wp.apiFetch({path:"/reactions-indieweb/v1/lookup",method:"POST",data:{type:e,query:n}});a.results&&a.results.length?l(a.results):h((0,m.__)("No results found.","reactions-indieweb"))}catch(e){h(e.message||(0,m.__)("Search failed.","reactions-indieweb"))}finally{c(!1)}}};return(0,t.jsxs)("div",{className:"reactions-media-search",children:[(0,t.jsxs)("div",{className:"search-input-group",children:[(0,t.jsx)(p.TextControl,{value:n,onChange:s,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),u())},placeholder:a,disabled:o}),(0,t.jsx)(p.Button,{variant:"secondary",onClick:u,disabled:o||!n.trim(),children:o?(0,t.jsx)(p.Spinner,{}):(0,m.__)("Search","reactions-indieweb")})]}),d&&(0,t.jsx)("p",{className:"search-error",children:d}),r.length>0&&(0,t.jsx)("ul",{className:"search-results",children:r.map((e,a)=>(0,t.jsx)("li",{children:(0,t.jsxs)("button",{type:"button",className:"search-result-item",onClick:()=>(e=>{i&&i(e),l([]),s("")})(e),children:[e.image&&(0,t.jsx)("img",{src:e.image,alt:"",className:"result-image"}),(0,t.jsxs)("div",{className:"result-info",children:[(0,t.jsx)("strong",{className:"result-title",children:e.title||e.name}),e.artist&&(0,t.jsx)("span",{className:"result-artist",children:e.artist}),e.author&&(0,t.jsx)("span",{className:"result-author",children:e.author}),e.year&&(0,t.jsxs)("span",{className:"result-year",children:["(",e.year,")"]})]})]})},a))})]})}function _({value:e=0,label:a="",showPercent:i=!0}){const n=Math.max(0,Math.min(100,e));return(0,t.jsxs)("div",{className:"reactions-progress-bar",role:"progressbar","aria-valuenow":n,"aria-valuemin":"0","aria-valuemax":"100",children:[a&&(0,t.jsx)("span",{className:"progress-label",children:a}),(0,t.jsx)("div",{className:"progress-track",children:(0,t.jsx)("div",{className:"progress-fill",style:{width:`${n}%`}})}),i&&(0,t.jsxs)("span",{className:"progress-percent",children:[n,"%"]})]})}function j({icon:e,label:a,instructions:i,children:n}){return(0,t.jsx)(p.Placeholder,{icon:e,label:a,instructions:i,className:"reactions-block-placeholder",children:n})}function w({name:e,address:a,city:i,country:n,latitude:s,longitude:r}){const l=s&&r,o=l?`https://www.openstreetmap.org/?mlat=${s}&mlon=${r}#map=16/${s}/${r}`:null;return(0,t.jsxs)("div",{className:"reactions-location h-adr",children:[e&&(0,t.jsx)("strong",{className:"p-name",children:e}),a&&(0,t.jsx)("span",{className:"p-street-address",children:a}),i&&(0,t.jsx)("span",{className:"p-locality",children:i}),n&&(0,t.jsx)("span",{className:"p-country-name",children:n}),l&&(0,t.jsxs)("span",{className:"coordinates",children:[(0,t.jsx)("data",{className:"p-latitude",value:s}),(0,t.jsx)("data",{className:"p-longitude",value:r}),o&&(0,t.jsx)("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:"map-link",children:(0,m.__)("View on map","reactions-indieweb")})]})]})}const y=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"reactions-indieweb/listen-card","version":"1.0.0","title":"Listen Card","category":"reactions-indieweb","description":"Display a listen/scrobble with track, artist, and album information.","keywords":["listen","music","scrobble","track","song","album","artist"],"textdomain":"reactions-indieweb","attributes":{"trackTitle":{"type":"string","source":"html","selector":".track-title"},"artistName":{"type":"string","source":"html","selector":".artist-name"},"albumTitle":{"type":"string","source":"html","selector":".album-title"},"releaseDate":{"type":"string"},"coverImage":{"type":"string","source":"attribute","selector":".cover-image img","attribute":"src"},"coverImageAlt":{"type":"string","source":"attribute","selector":".cover-image img","attribute":"alt"},"listenUrl":{"type":"string"},"musicbrainzId":{"type":"string"},"rating":{"type":"number","default":0},"listenedAt":{"type":"string"},"layout":{"type":"string","default":"horizontal"}},"supports":{"html":false,"align":["wide","full"],"color":{"background":true,"text":true},"spacing":{"margin":true,"padding":true},"typography":{"fontSize":true},"__experimentalBorder":{"color":true,"radius":true,"width":true}},"example":{"attributes":{"trackTitle":"Bohemian Rhapsody","artistName":"Queen","albumTitle":"A Night at the Opera","releaseDate":"1975-10-31","rating":5}},"editorScript":"file:./index.js","editorStyle":"file:./editor.css","style":"file:./style.css"}');(0,e.registerBlockType)(y.name,{...y,icon:i,edit:function({attributes:e,setAttributes:a}){const{trackTitle:n,artistName:s,albumTitle:r,releaseDate:l,coverImage:o,coverImageAlt:c,listenUrl:d,musicbrainzId:h,rating:_,listenedAt:w,layout:y}=e,[N,k]=(0,b.useState)(!1),[f,C]=(0,b.useState)(!1),S=(0,u.useBlockProps)({className:`listen-card layout-${y}`});return n||s?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(u.InspectorControls,{children:[(0,t.jsxs)(p.PanelBody,{title:(0,m.__)("Track Details","reactions-indieweb"),children:[(0,t.jsx)(p.TextControl,{label:(0,m.__)("Track Title","reactions-indieweb"),value:n||"",onChange:e=>a({trackTitle:e})}),(0,t.jsx)(p.TextControl,{label:(0,m.__)("Artist","reactions-indieweb"),value:s||"",onChange:e=>a({artistName:e})}),(0,t.jsx)(p.TextControl,{label:(0,m.__)("Album","reactions-indieweb"),value:r||"",onChange:e=>a({albumTitle:e})}),(0,t.jsx)(p.TextControl,{label:(0,m.__)("Release Date","reactions-indieweb"),value:l||"",onChange:e=>a({releaseDate:e}),type:"date"})]}),(0,t.jsxs)(p.PanelBody,{title:(0,m.__)("Listen Info","reactions-indieweb"),children:[(0,t.jsxs)("div",{className:"components-base-control",children:[(0,t.jsx)("label",{className:"components-base-control__label",children:(0,m.__)("Rating","reactions-indieweb")}),(0,t.jsx)(x,{value:_,onChange:e=>a({rating:e}),max:5})]}),(0,t.jsxs)("div",{className:"components-base-control",children:[(0,t.jsx)("label",{className:"components-base-control__label",children:(0,m.__)("Listened At","reactions-indieweb")}),(0,t.jsx)(p.Button,{variant:"secondary",onClick:()=>k(!0),children:w?new Date(w).toLocaleString():(0,m.__)("Set date/time","reactions-indieweb")}),N&&(0,t.jsx)(p.Popover,{onClose:()=>k(!1),children:(0,t.jsx)(p.DateTimePicker,{currentDate:w,onChange:e=>{a({listenedAt:e}),k(!1)},is12Hour:!0})})]}),(0,t.jsx)(p.TextControl,{label:(0,m.__)("Listen URL","reactions-indieweb"),value:d||"",onChange:e=>a({listenUrl:e}),type:"url",help:(0,m.__)("Link to the track on a streaming service.","reactions-indieweb")})]}),(0,t.jsx)(p.PanelBody,{title:(0,m.__)("Layout","reactions-indieweb"),children:(0,t.jsx)(p.SelectControl,{label:(0,m.__)("Layout Style","reactions-indieweb"),value:y,options:[{label:(0,m.__)("Horizontal","reactions-indieweb"),value:"horizontal"},{label:(0,m.__)("Vertical","reactions-indieweb"),value:"vertical"},{label:(0,m.__)("Compact","reactions-indieweb"),value:"compact"}],onChange:e=>a({layout:e})})}),(0,t.jsx)(p.PanelBody,{title:(0,m.__)("Metadata","reactions-indieweb"),initialOpen:!1,children:(0,t.jsx)(p.TextControl,{label:(0,m.__)("MusicBrainz ID","reactions-indieweb"),value:h||"",onChange:e=>a({musicbrainzId:e}),help:(0,m.__)("Used for linking to music databases.","reactions-indieweb")})})]}),(0,t.jsx)("div",{...S,children:(0,t.jsxs)("div",{className:"listen-card-inner h-cite",children:[(0,t.jsx)("div",{className:"cover-image",children:(0,t.jsx)(u.MediaUploadCheck,{children:(0,t.jsx)(u.MediaUpload,{onSelect:e=>{a({coverImage:e.url,coverImageAlt:e.alt||`${n} by ${s}`})},allowedTypes:["image"],render:({open:e})=>(0,t.jsx)("div",{onClick:e,role:"button",tabIndex:0,children:(0,t.jsx)(g,{src:o,alt:c,size:"medium"})})})})}),(0,t.jsxs)("div",{className:"listen-info",children:[(0,t.jsx)(u.RichText,{tagName:"h3",className:"track-title p-name",value:n,onChange:e=>a({trackTitle:e}),placeholder:(0,m.__)("Track title","reactions-indieweb")}),(0,t.jsx)(u.RichText,{tagName:"p",className:"artist-name p-author h-card",value:s,onChange:e=>a({artistName:e}),placeholder:(0,m.__)("Artist name","reactions-indieweb")}),(r||"compact"!==y)&&(0,t.jsx)(u.RichText,{tagName:"p",className:"album-title",value:r,onChange:e=>a({albumTitle:e}),placeholder:(0,m.__)("Album title","reactions-indieweb")}),_>0&&(0,t.jsx)("div",{className:"rating-display",children:(0,t.jsx)(x,{value:_,readonly:!0,max:5})})]})]})})]}):(0,t.jsx)("div",{...S,children:(0,t.jsx)(j,{icon:i,label:(0,m.__)("Listen Card","reactions-indieweb"),instructions:(0,m.__)("Add a track you listened to. Search for music or enter details manually.","reactions-indieweb"),children:f?(0,t.jsxs)("div",{className:"search-mode",children:[(0,t.jsx)(v,{type:"music",placeholder:(0,m.__)("Search for a song or album...","reactions-indieweb"),onSelect:e=>{a({trackTitle:e.title||e.name||"",artistName:e.artist||"",albumTitle:e.album||"",releaseDate:e.releaseDate||e.date||"",coverImage:e.cover||e.image||"",coverImageAlt:`${e.title||""} by ${e.artist||""}`,musicbrainzId:e.mbid||e.id||""}),C(!1)}}),(0,t.jsx)(p.Button,{variant:"link",onClick:()=>C(!1),children:(0,m.__)("Enter manually","reactions-indieweb")})]}):(0,t.jsxs)("div",{className:"placeholder-actions",children:[(0,t.jsx)(p.Button,{variant:"primary",onClick:()=>C(!0),children:(0,m.__)("Search Music","reactions-indieweb")}),(0,t.jsx)(p.Button,{variant:"secondary",onClick:()=>a({trackTitle:""}),children:(0,m.__)("Enter Manually","reactions-indieweb")})]})})})},save:function({attributes:e}){const{trackTitle:a,artistName:i,albumTitle:n,releaseDate:s,coverImage:r,coverImageAlt:l,listenUrl:o,musicbrainzId:c,rating:d,listenedAt:h,layout:m}=e,p=u.useBlockProps.save({className:`listen-card layout-${m}`});return(0,t.jsx)("div",{...p,children:(0,t.jsxs)("div",{className:"listen-card-inner h-cite",children:[r&&(0,t.jsx)("div",{className:"cover-image",children:(0,t.jsx)("img",{src:r,alt:l||`${a} by ${i}`,className:"u-photo",loading:"lazy"})}),(0,t.jsxs)("div",{className:"listen-info",children:[a&&(0,t.jsx)("h3",{className:"track-title p-name",children:o?(0,t.jsx)("a",{href:o,className:"u-url",target:"_blank",rel:"noopener noreferrer",children:a}):a}),i&&(0,t.jsx)("p",{className:"artist-name",children:(0,t.jsx)("span",{className:"p-author h-card",children:(0,t.jsx)("span",{className:"p-name",children:i})})}),n&&(0,t.jsxs)("p",{className:"album-title",children:[n,s&&(0,t.jsxs)("span",{className:"release-date",children:[" ","(",new Date(s).getFullYear(),")"]})]}),!d||d<=0?null:(0,t.jsxs)("div",{className:"rating-display p-rating","aria-label":`Rating: ${d} out of 5 stars`,children:[Array.from({length:5},(e,a)=>(0,t.jsx)("span",{className:"star "+(a<d?"filled":""),"aria-hidden":"true",children:"â˜…"},a)),(0,t.jsxs)("span",{className:"rating-value",children:[d,"/5"]})]}),h&&(0,t.jsx)("time",{className:"listened-at dt-published",dateTime:new Date(h).toISOString(),children:new Date(h).toLocaleString()})]}),(0,t.jsx)("data",{className:"u-listen-of",value:o||"",hidden:!0}),c&&(0,t.jsx)("data",{className:"u-uid",value:`https://musicbrainz.org/recording/${c}`,hidden:!0})]})})}});const N=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"reactions-indieweb/watch-card","version":"1.0.0","title":"Watch Card","category":"reactions-indieweb","description":"Display a movie or TV show you watched with poster, rating, and details.","keywords":["watch","movie","tv","film","show","episode","video"],"textdomain":"reactions-indieweb","attributes":{"mediaTitle":{"type":"string","source":"html","selector":".media-title"},"mediaType":{"type":"string","default":"movie"},"showTitle":{"type":"string"},"seasonNumber":{"type":"number"},"episodeNumber":{"type":"number"},"episodeTitle":{"type":"string"},"releaseYear":{"type":"number"},"director":{"type":"string"},"posterImage":{"type":"string","source":"attribute","selector":".poster-image img","attribute":"src"},"posterImageAlt":{"type":"string","source":"attribute","selector":".poster-image img","attribute":"alt"},"watchUrl":{"type":"string"},"tmdbId":{"type":"string"},"imdbId":{"type":"string"},"rating":{"type":"number","default":0},"isRewatch":{"type":"boolean","default":false},"watchedAt":{"type":"string"},"review":{"type":"string","source":"html","selector":".watch-review"},"layout":{"type":"string","default":"horizontal"}},"supports":{"html":false,"align":["wide","full"],"color":{"background":true,"text":true},"spacing":{"margin":true,"padding":true},"typography":{"fontSize":true},"__experimentalBorder":{"color":true,"radius":true,"width":true}},"example":{"attributes":{"mediaTitle":"The Shawshank Redemption","mediaType":"movie","releaseYear":1994,"director":"Frank Darabont","rating":5}},"editorScript":"file:./index.js","editorStyle":"file:./editor.css","style":"file:./style.css"}');(0,e.registerBlockType)(N.name,{...N,icon:n,edit:function({attributes:e,setAttributes:a}){const{mediaTitle:i,mediaType:s,showTitle:r,seasonNumber:l,episodeNumber:o,episodeTitle:c,releaseYear:d,director:h,posterImage:_,posterImageAlt:w,watchUrl:y,tmdbId:N,imdbId:k,rating:f,isRewatch:C,watchedAt:S,review:T,layout:I}=e,[D,$]=(0,b.useState)(!1),[B,P]=(0,b.useState)(!1),[A,R]=(0,b.useState)("movie"),L=(0,u.useBlockProps)({className:`watch-card layout-${I} type-${s}`});return i?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(u.InspectorControls,{children:[(0,t.jsxs)(p.PanelBody,{title:(0,m.__)("Media Details","reactions-indieweb"),children:[(0,t.jsx)(p.SelectControl,{label:(0,m.__)("Type","reactions-indieweb"),value:s,options:[{label:(0,m.__)("Movie","reactions-indieweb"),value:"movie"},{label:(0,m.__)("TV Show","reactions-indieweb"),value:"tv"},{label:(0,m.__)("TV Episode","reactions-indieweb"),value:"episode"}],onChange:e=>a({mediaType:e})}),(0,t.jsx)(p.TextControl,{label:(0,m.__)("Title","reactions-indieweb"),value:i||"",onChange:e=>a({mediaTitle:e})}),"episode"===s&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.TextControl,{label:(0,m.__)("Show Title","reactions-indieweb"),value:r||"",onChange:e=>a({showTitle:e})}),(0,t.jsxs)("div",{className:"episode-numbers",children:[(0,t.jsx)(p.__experimentalNumberControl,{label:(0,m.__)("Season","reactions-indieweb"),value:l,onChange:e=>a({seasonNumber:parseInt(e)||null}),min:1}),(0,t.jsx)(p.__experimentalNumberControl,{label:(0,m.__)("Episode","reactions-indieweb"),value:o,onChange:e=>a({episodeNumber:parseInt(e)||null}),min:1})]})]}),(0,t.jsx)(p.__experimentalNumberControl,{label:(0,m.__)("Year","reactions-indieweb"),value:d,onChange:e=>a({releaseYear:parseInt(e)||null}),min:1900,max:2100}),(0,t.jsx)(p.TextControl,{label:(0,m.__)("Director","reactions-indieweb"),value:h||"",onChange:e=>a({director:e})})]}),(0,t.jsxs)(p.PanelBody,{title:(0,m.__)("Watch Info","reactions-indieweb"),children:[(0,t.jsxs)("div",{className:"components-base-control",children:[(0,t.jsx)("label",{className:"components-base-control__label",children:(0,m.__)("Rating","reactions-indieweb")}),(0,t.jsx)(x,{value:f,onChange:e=>a({rating:e}),max:5})]}),(0,t.jsx)(p.ToggleControl,{label:(0,m.__)("Rewatch","reactions-indieweb"),checked:C,onChange:e=>a({isRewatch:e}),help:(0,m.__)("Check if this is a rewatch.","reactions-indieweb")}),(0,t.jsxs)("div",{className:"components-base-control",children:[(0,t.jsx)("label",{className:"components-base-control__label",children:(0,m.__)("Watched At","reactions-indieweb")}),(0,t.jsx)(p.Button,{variant:"secondary",onClick:()=>$(!0),children:S?new Date(S).toLocaleString():(0,m.__)("Set date/time","reactions-indieweb")}),D&&(0,t.jsx)(p.Popover,{onClose:()=>$(!1),children:(0,t.jsx)(p.DateTimePicker,{currentDate:S,onChange:e=>{a({watchedAt:e}),$(!1)},is12Hour:!0})})]}),(0,t.jsx)(p.TextControl,{label:(0,m.__)("Watch URL","reactions-indieweb"),value:y||"",onChange:e=>a({watchUrl:e}),type:"url",help:(0,m.__)("Link to the content on a streaming service.","reactions-indieweb")})]}),(0,t.jsx)(p.PanelBody,{title:(0,m.__)("Layout","reactions-indieweb"),children:(0,t.jsx)(p.SelectControl,{label:(0,m.__)("Layout Style","reactions-indieweb"),value:I,options:[{label:(0,m.__)("Horizontal","reactions-indieweb"),value:"horizontal"},{label:(0,m.__)("Vertical","reactions-indieweb"),value:"vertical"},{label:(0,m.__)("Poster Focus","reactions-indieweb"),value:"poster"},{label:(0,m.__)("Compact","reactions-indieweb"),value:"compact"}],onChange:e=>a({layout:e})})}),(0,t.jsxs)(p.PanelBody,{title:(0,m.__)("Metadata","reactions-indieweb"),initialOpen:!1,children:[(0,t.jsx)(p.TextControl,{label:(0,m.__)("TMDB ID","reactions-indieweb"),value:N||"",onChange:e=>a({tmdbId:e})}),(0,t.jsx)(p.TextControl,{label:(0,m.__)("IMDb ID","reactions-indieweb"),value:k||"",onChange:e=>a({imdbId:e})})]})]}),(0,t.jsx)("div",{...L,children:(0,t.jsxs)("div",{className:"watch-card-inner h-cite",children:[(0,t.jsx)("div",{className:"poster-image",children:(0,t.jsx)(u.MediaUploadCheck,{children:(0,t.jsx)(u.MediaUpload,{onSelect:e=>{a({posterImage:e.url,posterImageAlt:e.alt||i})},allowedTypes:["image"],render:({open:e})=>(0,t.jsx)("div",{onClick:e,role:"button",tabIndex:0,children:(0,t.jsx)(g,{src:_,alt:w,size:"large"})})})})}),(0,t.jsxs)("div",{className:"watch-info",children:["episode"===s&&r&&(0,t.jsx)("p",{className:"show-title",children:r}),(0,t.jsx)(u.RichText,{tagName:"h3",className:"media-title p-name",value:i,onChange:e=>a({mediaTitle:e}),placeholder:(0,m.__)("Title","reactions-indieweb")}),"episode"===s&&(l||o)&&(0,t.jsxs)("p",{className:"episode-info",children:[l&&`S${String(l).padStart(2,"0")}`,o&&`E${String(o).padStart(2,"0")}`,c&&` - ${c}`]}),(0,t.jsxs)("div",{className:"meta-line",children:[d&&(0,t.jsxs)("span",{className:"year",children:["(",d,")"]}),h&&(0,t.jsxs)("span",{className:"director",children:[(0,m.__)("Dir.","reactions-indieweb")," ",h]}),C&&(0,t.jsx)("span",{className:"rewatch-badge",children:(0,m.__)("Rewatch","reactions-indieweb")})]}),f>0&&(0,t.jsx)("div",{className:"rating-display",children:(0,t.jsx)(x,{value:f,readonly:!0,max:5})}),(0,t.jsx)(u.RichText,{tagName:"p",className:"watch-review",value:T,onChange:e=>a({review:e}),placeholder:(0,m.__)("Write a review...","reactions-indieweb")})]})]})})]}):(0,t.jsx)("div",{...L,children:(0,t.jsx)(j,{icon:n,label:(0,m.__)("Watch Card","reactions-indieweb"),instructions:(0,m.__)("Add a movie or TV show you watched. Search or enter details manually.","reactions-indieweb"),children:B?(0,t.jsxs)("div",{className:"search-mode",children:[(0,t.jsxs)("div",{className:"search-type-toggle",children:[(0,t.jsx)(p.Button,{variant:"movie"===A?"primary":"secondary",onClick:()=>R("movie"),children:(0,m.__)("Movie","reactions-indieweb")}),(0,t.jsx)(p.Button,{variant:"tv"===A?"primary":"secondary",onClick:()=>R("tv"),children:(0,m.__)("TV Show","reactions-indieweb")})]}),(0,t.jsx)(v,{type:A,placeholder:"movie"===A?(0,m.__)("Search for a movie...","reactions-indieweb"):(0,m.__)("Search for a TV show...","reactions-indieweb"),onSelect:e=>{a({mediaTitle:e.title||e.name||"",releaseYear:e.year||e.release_year||null,director:e.director||"",posterImage:e.poster||e.image||"",posterImageAlt:e.title||e.name||"",tmdbId:e.tmdb_id||e.id||"",imdbId:e.imdb_id||"",mediaType:A}),P(!1)}}),(0,t.jsx)(p.Button,{variant:"link",onClick:()=>P(!1),children:(0,m.__)("Enter manually","reactions-indieweb")})]}):(0,t.jsxs)("div",{className:"placeholder-actions",children:[(0,t.jsx)(p.Button,{variant:"primary",onClick:()=>P(!0),children:(0,m.__)("Search Movies & TV","reactions-indieweb")}),(0,t.jsx)(p.Button,{variant:"secondary",onClick:()=>a({mediaTitle:""}),children:(0,m.__)("Enter Manually","reactions-indieweb")})]})})})},save:function({attributes:e}){const{mediaTitle:a,mediaType:i,showTitle:n,seasonNumber:s,episodeNumber:r,episodeTitle:l,releaseYear:o,director:c,posterImage:d,posterImageAlt:h,watchUrl:m,tmdbId:p,imdbId:b,rating:x,isRewatch:g,watchedAt:v,review:_,layout:j}=e,w=u.useBlockProps.save({className:`watch-card layout-${j} type-${i}`}),y=()=>{if("episode"!==i)return null;let e="";return s&&(e+=`S${String(s).padStart(2,"0")}`),r&&(e+=`E${String(r).padStart(2,"0")}`),l&&(e+=` - ${l}`),e||null},N=()=>p?`https://www.themoviedb.org/${"movie"===i?"movie":"tv"}/${p}`:null,k=()=>b?`https://www.imdb.com/title/${b}`:null;return(0,t.jsx)("div",{...w,children:(0,t.jsxs)("div",{className:"watch-card-inner h-cite",children:[d&&(0,t.jsx)("div",{className:"poster-image",children:(0,t.jsx)("img",{src:d,alt:h||a,className:"u-photo",loading:"lazy"})}),(0,t.jsxs)("div",{className:"watch-info",children:["episode"===i&&n&&(0,t.jsx)("p",{className:"show-title",children:n}),a&&(0,t.jsx)("h3",{className:"media-title p-name",children:m?(0,t.jsx)("a",{href:m,className:"u-url",target:"_blank",rel:"noopener noreferrer",children:a}):a}),y()&&(0,t.jsx)("p",{className:"episode-info",children:y()}),(0,t.jsxs)("div",{className:"meta-line",children:[o&&(0,t.jsxs)("span",{className:"year",children:["(",o,")"]}),c&&(0,t.jsx)("span",{className:"director p-author h-card",children:(0,t.jsx)("span",{className:"p-name",children:c})}),g&&(0,t.jsx)("span",{className:"rewatch-badge",children:"Rewatch"})]}),!x||x<=0?null:(0,t.jsxs)("div",{className:"rating-display p-rating","aria-label":`Rating: ${x} out of 5 stars`,children:[Array.from({length:5},(e,a)=>(0,t.jsx)("span",{className:"star "+(a<x?"filled":""),"aria-hidden":"true",children:"â˜…"},a)),(0,t.jsxs)("span",{className:"rating-value",children:[x,"/5"]})]}),_&&(0,t.jsx)("div",{className:"watch-review p-content",children:(0,t.jsx)(u.RichText.Content,{tagName:"p",value:_})}),v&&(0,t.jsx)("time",{className:"watched-at dt-published",dateTime:new Date(v).toISOString(),children:new Date(v).toLocaleString()}),(0,t.jsxs)("div",{className:"external-links",children:[k()&&(0,t.jsx)("a",{href:k(),target:"_blank",rel:"noopener noreferrer",className:"imdb-link",children:"IMDb"}),N()&&(0,t.jsx)("a",{href:N(),target:"_blank",rel:"noopener noreferrer",className:"tmdb-link",children:"TMDB"})]})]}),(0,t.jsx)("data",{className:"u-watch-of",value:m||"",hidden:!0}),p&&(0,t.jsx)("data",{className:"u-uid",value:N(),hidden:!0})]})})}});const k=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"reactions-indieweb/read-card","version":"1.0.0","title":"Read Card","category":"reactions-indieweb","description":"Display a book you\'re reading or have read with cover, author, and progress.","keywords":["read","book","reading","author","isbn","library"],"textdomain":"reactions-indieweb","attributes":{"bookTitle":{"type":"string","source":"html","selector":".book-title"},"authorName":{"type":"string","source":"html","selector":".author-name"},"isbn":{"type":"string"},"publisher":{"type":"string"},"publishDate":{"type":"string"},"pageCount":{"type":"number"},"currentPage":{"type":"number"},"coverImage":{"type":"string","source":"attribute","selector":".cover-image img","attribute":"src"},"coverImageAlt":{"type":"string","source":"attribute","selector":".cover-image img","attribute":"alt"},"bookUrl":{"type":"string"},"openlibraryId":{"type":"string"},"readStatus":{"type":"string","default":"reading"},"rating":{"type":"number","default":0},"startedAt":{"type":"string"},"finishedAt":{"type":"string"},"review":{"type":"string","source":"html","selector":".book-review"},"layout":{"type":"string","default":"horizontal"}},"supports":{"html":false,"align":["wide","full"],"color":{"background":true,"text":true},"spacing":{"margin":true,"padding":true},"typography":{"fontSize":true},"__experimentalBorder":{"color":true,"radius":true,"width":true}},"example":{"attributes":{"bookTitle":"The Hitchhiker\'s Guide to the Galaxy","authorName":"Douglas Adams","readStatus":"finished","rating":5}},"editorScript":"file:./index.js","editorStyle":"file:./editor.css","style":"file:./style.css"}');(0,e.registerBlockType)(k.name,{...k,icon:s,edit:function({attributes:e,setAttributes:a}){const{bookTitle:i,authorName:n,isbn:r,publisher:l,publishDate:o,pageCount:c,currentPage:d,coverImage:h,coverImageAlt:w,bookUrl:y,openlibraryId:N,readStatus:k,rating:f,startedAt:C,finishedAt:S,review:T,layout:I}=e,[D,$]=(0,b.useState)(!1),[B,P]=(0,b.useState)(!1),[A,R]=(0,b.useState)(!1),L=(0,u.useBlockProps)({className:`read-card layout-${I} status-${k}`}),z=c&&d?Math.min(100,Math.round(d/c*100)):0;return i||n?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(u.InspectorControls,{children:[(0,t.jsxs)(p.PanelBody,{title:(0,m.__)("Book Details","reactions-indieweb"),children:[(0,t.jsx)(p.TextControl,{label:(0,m.__)("Title","reactions-indieweb"),value:i||"",onChange:e=>a({bookTitle:e})}),(0,t.jsx)(p.TextControl,{label:(0,m.__)("Author","reactions-indieweb"),value:n||"",onChange:e=>a({authorName:e})}),(0,t.jsx)(p.TextControl,{label:(0,m.__)("ISBN","reactions-indieweb"),value:r||"",onChange:e=>a({isbn:e})}),(0,t.jsx)(p.TextControl,{label:(0,m.__)("Publisher","reactions-indieweb"),value:l||"",onChange:e=>a({publisher:e})}),(0,t.jsx)(p.__experimentalNumberControl,{label:(0,m.__)("Total Pages","reactions-indieweb"),value:c,onChange:e=>a({pageCount:parseInt(e)||null}),min:1})]}),(0,t.jsxs)(p.PanelBody,{title:(0,m.__)("Reading Status","reactions-indieweb"),children:[(0,t.jsx)(p.SelectControl,{label:(0,m.__)("Status","reactions-indieweb"),value:k,options:[{label:(0,m.__)("To Read","reactions-indieweb"),value:"to-read"},{label:(0,m.__)("Currently Reading","reactions-indieweb"),value:"reading"},{label:(0,m.__)("Finished","reactions-indieweb"),value:"finished"},{label:(0,m.__)("Abandoned","reactions-indieweb"),value:"abandoned"}],onChange:e=>a({readStatus:e})}),"reading"===k&&c&&(0,t.jsx)(p.RangeControl,{label:(0,m.__)("Current Page","reactions-indieweb"),value:d||0,onChange:e=>a({currentPage:e}),min:0,max:c,help:`${z}% complete`}),(0,t.jsxs)("div",{className:"components-base-control",children:[(0,t.jsx)("label",{className:"components-base-control__label",children:(0,m.__)("Rating","reactions-indieweb")}),(0,t.jsx)(x,{value:f,onChange:e=>a({rating:e}),max:5})]}),(0,t.jsxs)("div",{className:"components-base-control",children:[(0,t.jsx)("label",{className:"components-base-control__label",children:(0,m.__)("Started","reactions-indieweb")}),(0,t.jsx)(p.Button,{variant:"secondary",onClick:()=>$(!0),children:C?new Date(C).toLocaleDateString():(0,m.__)("Set date","reactions-indieweb")}),D&&(0,t.jsx)(p.Popover,{onClose:()=>$(!1),children:(0,t.jsx)(p.DateTimePicker,{currentDate:C,onChange:e=>{a({startedAt:e}),$(!1)}})})]}),("finished"===k||"abandoned"===k)&&(0,t.jsxs)("div",{className:"components-base-control",children:[(0,t.jsx)("label",{className:"components-base-control__label",children:(0,m.__)("Finished","reactions-indieweb")}),(0,t.jsx)(p.Button,{variant:"secondary",onClick:()=>P(!0),children:S?new Date(S).toLocaleDateString():(0,m.__)("Set date","reactions-indieweb")}),B&&(0,t.jsx)(p.Popover,{onClose:()=>P(!1),children:(0,t.jsx)(p.DateTimePicker,{currentDate:S,onChange:e=>{a({finishedAt:e}),P(!1)}})})]})]}),(0,t.jsx)(p.PanelBody,{title:(0,m.__)("Layout","reactions-indieweb"),children:(0,t.jsx)(p.SelectControl,{label:(0,m.__)("Layout Style","reactions-indieweb"),value:I,options:[{label:(0,m.__)("Horizontal","reactions-indieweb"),value:"horizontal"},{label:(0,m.__)("Vertical","reactions-indieweb"),value:"vertical"},{label:(0,m.__)("Cover Focus","reactions-indieweb"),value:"cover"},{label:(0,m.__)("Compact","reactions-indieweb"),value:"compact"}],onChange:e=>a({layout:e})})}),(0,t.jsxs)(p.PanelBody,{title:(0,m.__)("Links","reactions-indieweb"),initialOpen:!1,children:[(0,t.jsx)(p.TextControl,{label:(0,m.__)("Book URL","reactions-indieweb"),value:y||"",onChange:e=>a({bookUrl:e}),type:"url"}),(0,t.jsx)(p.TextControl,{label:(0,m.__)("Open Library ID","reactions-indieweb"),value:N||"",onChange:e=>a({openlibraryId:e})})]})]}),(0,t.jsx)("div",{...L,children:(0,t.jsxs)("div",{className:"read-card-inner h-cite",children:[(0,t.jsx)("div",{className:"cover-image",children:(0,t.jsx)(u.MediaUploadCheck,{children:(0,t.jsx)(u.MediaUpload,{onSelect:e=>{a({coverImage:e.url,coverImageAlt:e.alt||i})},allowedTypes:["image"],render:({open:e})=>(0,t.jsx)("div",{onClick:e,role:"button",tabIndex:0,children:(0,t.jsx)(g,{src:h,alt:w,size:"large"})})})})}),(0,t.jsxs)("div",{className:"read-info",children:[(0,t.jsxs)("span",{className:`status-badge status-${k}`,children:["to-read"===k&&(0,m.__)("To Read","reactions-indieweb"),"reading"===k&&(0,m.__)("Reading","reactions-indieweb"),"finished"===k&&(0,m.__)("Finished","reactions-indieweb"),"abandoned"===k&&(0,m.__)("Abandoned","reactions-indieweb")]}),(0,t.jsx)(u.RichText,{tagName:"h3",className:"book-title p-name",value:i,onChange:e=>a({bookTitle:e}),placeholder:(0,m.__)("Book title","reactions-indieweb")}),(0,t.jsx)(u.RichText,{tagName:"p",className:"author-name p-author h-card",value:n,onChange:e=>a({authorName:e}),placeholder:(0,m.__)("Author name","reactions-indieweb")}),"reading"===k&&z>0&&(0,t.jsx)(_,{value:z,label:`${d} of ${c} pages`}),f>0&&(0,t.jsx)("div",{className:"rating-display",children:(0,t.jsx)(x,{value:f,readonly:!0,max:5})}),(0,t.jsx)(u.RichText,{tagName:"p",className:"book-review",value:T,onChange:e=>a({review:e}),placeholder:(0,m.__)("Write a review...","reactions-indieweb")})]})]})})]}):(0,t.jsx)("div",{...L,children:(0,t.jsx)(j,{icon:s,label:(0,m.__)("Read Card","reactions-indieweb"),instructions:(0,m.__)("Add a book you're reading or have read. Search or enter details manually.","reactions-indieweb"),children:A?(0,t.jsxs)("div",{className:"search-mode",children:[(0,t.jsx)(v,{type:"book",placeholder:(0,m.__)("Search by title, author, or ISBN...","reactions-indieweb"),onSelect:e=>{a({bookTitle:e.title||"",authorName:e.author||e.authors?.join(", ")||"",isbn:e.isbn||e.isbn_13?.[0]||e.isbn_10?.[0]||"",publisher:e.publisher||e.publishers?.[0]||"",publishDate:e.publish_date||e.first_publish_year?.toString()||"",pageCount:e.number_of_pages||e.pages||null,coverImage:e.cover||e.image||"",coverImageAlt:e.title||"",openlibraryId:e.key||e.olid||""}),R(!1)}}),(0,t.jsx)(p.Button,{variant:"link",onClick:()=>R(!1),children:(0,m.__)("Enter manually","reactions-indieweb")})]}):(0,t.jsxs)("div",{className:"placeholder-actions",children:[(0,t.jsx)(p.Button,{variant:"primary",onClick:()=>R(!0),children:(0,m.__)("Search Books","reactions-indieweb")}),(0,t.jsx)(p.Button,{variant:"secondary",onClick:()=>a({bookTitle:""}),children:(0,m.__)("Enter Manually","reactions-indieweb")})]})})})},save:function({attributes:e}){const{bookTitle:a,authorName:i,isbn:n,publisher:s,publishDate:r,pageCount:l,currentPage:o,coverImage:c,coverImageAlt:d,bookUrl:h,openlibraryId:m,readStatus:p,rating:b,startedAt:x,finishedAt:g,review:v,layout:_}=e,j=u.useBlockProps.save({className:`read-card layout-${_} status-${p}`}),w=l&&o?Math.min(100,Math.round(o/l*100)):0;return(0,t.jsx)("div",{...j,children:(0,t.jsxs)("div",{className:"read-card-inner h-cite",children:[c&&(0,t.jsx)("div",{className:"cover-image",children:(0,t.jsx)("img",{src:c,alt:d||`Cover of ${a}`,className:"u-photo",loading:"lazy"})}),(0,t.jsxs)("div",{className:"read-info",children:[(0,t.jsx)("span",{className:`status-badge status-${p}`,children:(()=>{switch(p){case"to-read":return"To Read";case"reading":return"Currently Reading";case"finished":return"Finished";case"abandoned":return"Abandoned";default:return""}})()}),a&&(0,t.jsx)("h3",{className:"book-title p-name",children:h?(0,t.jsx)("a",{href:h,className:"u-url",target:"_blank",rel:"noopener noreferrer",children:a}):a}),i&&(0,t.jsx)("p",{className:"author-name",children:(0,t.jsx)("span",{className:"p-author h-card",children:(0,t.jsx)("span",{className:"p-name",children:i})})}),(s||r)&&(0,t.jsxs)("p",{className:"publication-info",children:[s&&(0,t.jsx)("span",{className:"publisher",children:s}),s&&r&&", ",r&&(0,t.jsx)("span",{className:"publish-date",children:r})]}),"reading"===p&&w>0&&(0,t.jsxs)("div",{className:"progress-container",children:[(0,t.jsx)("div",{className:"progress-bar",children:(0,t.jsx)("div",{className:"progress-fill",style:{width:`${w}%`},role:"progressbar","aria-valuenow":w,"aria-valuemin":"0","aria-valuemax":"100"})}),(0,t.jsxs)("span",{className:"progress-text",children:[o," of ",l," pages (",w,"%)"]})]}),!b||b<=0?null:(0,t.jsxs)("div",{className:"rating-display p-rating","aria-label":`Rating: ${b} out of 5 stars`,children:[Array.from({length:5},(e,a)=>(0,t.jsx)("span",{className:"star "+(a<b?"filled":""),"aria-hidden":"true",children:"â˜…"},a)),(0,t.jsxs)("span",{className:"rating-value",children:[b,"/5"]})]}),v&&(0,t.jsx)("div",{className:"book-review p-content",children:(0,t.jsx)(u.RichText.Content,{tagName:"p",value:v})}),(0,t.jsxs)("div",{className:"reading-dates",children:[x&&(0,t.jsxs)("time",{className:"started-at",dateTime:new Date(x).toISOString(),children:["Started: ",new Date(x).toLocaleDateString()]}),g&&("finished"===p||"abandoned"===p)&&(0,t.jsxs)("time",{className:"finished-at dt-published",dateTime:new Date(g).toISOString(),children:["Finished: ",new Date(g).toLocaleDateString()]})]})]}),(0,t.jsx)("data",{className:"u-read-of",value:h||"",hidden:!0}),n&&(0,t.jsx)("data",{className:"p-isbn",value:n,hidden:!0}),m&&(0,t.jsx)("data",{className:"u-uid",value:`https://openlibrary.org${m}`,hidden:!0})]})})}});const f=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"reactions-indieweb/checkin-card","version":"1.0.0","title":"Checkin Card","category":"reactions-indieweb","description":"Display a location checkin with venue details, map, and optional notes.","keywords":["checkin","location","venue","place","map","travel"],"textdomain":"reactions-indieweb","attributes":{"venueName":{"type":"string","source":"html","selector":".venue-name"},"venueType":{"type":"string","default":"place"},"address":{"type":"string"},"locality":{"type":"string"},"region":{"type":"string"},"country":{"type":"string"},"postalCode":{"type":"string"},"latitude":{"type":"number"},"longitude":{"type":"number"},"venueUrl":{"type":"string"},"foursquareId":{"type":"string"},"checkinAt":{"type":"string"},"note":{"type":"string","source":"html","selector":".checkin-note"},"photo":{"type":"string","source":"attribute","selector":".checkin-photo img","attribute":"src"},"photoAlt":{"type":"string","source":"attribute","selector":".checkin-photo img","attribute":"alt"},"showMap":{"type":"boolean","default":true},"layout":{"type":"string","default":"horizontal"}},"supports":{"html":false,"align":["wide","full"],"color":{"background":true,"text":true},"spacing":{"margin":true,"padding":true},"typography":{"fontSize":true},"__experimentalBorder":{"color":true,"radius":true,"width":true}},"example":{"attributes":{"venueName":"Central Park","venueType":"park","locality":"New York","region":"NY","country":"United States"}},"editorScript":"file:./index.js","editorStyle":"file:./editor.css","style":"file:./style.css"}');(0,e.registerBlockType)(f.name,{...f,icon:r,edit:function({attributes:e,setAttributes:a}){const{venueName:i,venueType:n,address:s,locality:l,region:o,country:c,postalCode:d,latitude:h,longitude:x,venueUrl:g,foursquareId:v,checkinAt:_,note:y,photo:N,photoAlt:k,showMap:f,layout:C}=e,[S,T]=(0,b.useState)(!1),I=(0,u.useBlockProps)({className:`checkin-card layout-${C}`}),D=[{label:(0,m.__)("Place","reactions-indieweb"),value:"place"},{label:(0,m.__)("Restaurant","reactions-indieweb"),value:"restaurant"},{label:(0,m.__)("Cafe","reactions-indieweb"),value:"cafe"},{label:(0,m.__)("Bar","reactions-indieweb"),value:"bar"},{label:(0,m.__)("Hotel","reactions-indieweb"),value:"hotel"},{label:(0,m.__)("Airport","reactions-indieweb"),value:"airport"},{label:(0,m.__)("Park","reactions-indieweb"),value:"park"},{label:(0,m.__)("Museum","reactions-indieweb"),value:"museum"},{label:(0,m.__)("Theater","reactions-indieweb"),value:"theater"},{label:(0,m.__)("Store","reactions-indieweb"),value:"store"},{label:(0,m.__)("Office","reactions-indieweb"),value:"office"},{label:(0,m.__)("Home","reactions-indieweb"),value:"home"},{label:(0,m.__)("Other","reactions-indieweb"),value:"other"}],$=()=>{const e={place:"ðŸ“",restaurant:"ðŸ½ï¸",cafe:"â˜•",bar:"ðŸº",hotel:"ðŸ¨",airport:"âœˆï¸",park:"ðŸŒ³",museum:"ðŸ›ï¸",theater:"ðŸŽ­",store:"ðŸ›ï¸",office:"ðŸ¢",home:"ðŸ ",other:"ðŸ“Œ"};return e[n]||e.place};return i||l?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(u.InspectorControls,{children:[(0,t.jsxs)(p.PanelBody,{title:(0,m.__)("Venue Details","reactions-indieweb"),children:[(0,t.jsx)(p.TextControl,{label:(0,m.__)("Venue Name","reactions-indieweb"),value:i||"",onChange:e=>a({venueName:e})}),(0,t.jsx)(p.SelectControl,{label:(0,m.__)("Venue Type","reactions-indieweb"),value:n,options:D,onChange:e=>a({venueType:e})}),(0,t.jsx)(p.TextControl,{label:(0,m.__)("Street Address","reactions-indieweb"),value:s||"",onChange:e=>a({address:e})}),(0,t.jsx)(p.TextControl,{label:(0,m.__)("City/Locality","reactions-indieweb"),value:l||"",onChange:e=>a({locality:e})}),(0,t.jsx)(p.TextControl,{label:(0,m.__)("State/Region","reactions-indieweb"),value:o||"",onChange:e=>a({region:e})}),(0,t.jsx)(p.TextControl,{label:(0,m.__)("Country","reactions-indieweb"),value:c||"",onChange:e=>a({country:e})}),(0,t.jsx)(p.TextControl,{label:(0,m.__)("Postal Code","reactions-indieweb"),value:d||"",onChange:e=>a({postalCode:e})})]}),(0,t.jsxs)(p.PanelBody,{title:(0,m.__)("Coordinates","reactions-indieweb"),initialOpen:!1,children:[(0,t.jsx)(p.TextControl,{label:(0,m.__)("Latitude","reactions-indieweb"),value:h||"",onChange:e=>a({latitude:parseFloat(e)||null}),type:"number",step:"any"}),(0,t.jsx)(p.TextControl,{label:(0,m.__)("Longitude","reactions-indieweb"),value:x||"",onChange:e=>a({longitude:parseFloat(e)||null}),type:"number",step:"any"}),(0,t.jsx)(p.ToggleControl,{label:(0,m.__)("Show Map","reactions-indieweb"),checked:f,onChange:e=>a({showMap:e}),help:(0,m.__)("Display an embedded OpenStreetMap","reactions-indieweb")})]}),(0,t.jsx)(p.PanelBody,{title:(0,m.__)("Checkin Details","reactions-indieweb"),children:(0,t.jsxs)("div",{className:"components-base-control",children:[(0,t.jsx)("label",{className:"components-base-control__label",children:(0,m.__)("Checkin Time","reactions-indieweb")}),(0,t.jsx)(p.Button,{variant:"secondary",onClick:()=>T(!0),children:_?new Date(_).toLocaleString():(0,m.__)("Set time","reactions-indieweb")}),S&&(0,t.jsx)(p.Popover,{onClose:()=>T(!1),children:(0,t.jsx)(p.DateTimePicker,{currentDate:_,onChange:e=>{a({checkinAt:e}),T(!1)}})})]})}),(0,t.jsx)(p.PanelBody,{title:(0,m.__)("Layout","reactions-indieweb"),children:(0,t.jsx)(p.SelectControl,{label:(0,m.__)("Layout Style","reactions-indieweb"),value:C,options:[{label:(0,m.__)("Horizontal","reactions-indieweb"),value:"horizontal"},{label:(0,m.__)("Vertical","reactions-indieweb"),value:"vertical"},{label:(0,m.__)("Map Focus","reactions-indieweb"),value:"map"},{label:(0,m.__)("Compact","reactions-indieweb"),value:"compact"}],onChange:e=>a({layout:e})})}),(0,t.jsxs)(p.PanelBody,{title:(0,m.__)("Links","reactions-indieweb"),initialOpen:!1,children:[(0,t.jsx)(p.TextControl,{label:(0,m.__)("Venue URL","reactions-indieweb"),value:g||"",onChange:e=>a({venueUrl:e}),type:"url"}),(0,t.jsx)(p.TextControl,{label:(0,m.__)("Foursquare ID","reactions-indieweb"),value:v||"",onChange:e=>a({foursquareId:e})})]})]}),(0,t.jsx)("div",{...I,children:(0,t.jsxs)("div",{className:"checkin-card-inner h-entry",children:[(0,t.jsx)("div",{className:"checkin-photo",children:(0,t.jsx)(u.MediaUploadCheck,{children:(0,t.jsx)(u.MediaUpload,{onSelect:e=>{a({photo:e.url,photoAlt:e.alt||i})},allowedTypes:["image"],render:({open:e})=>(0,t.jsx)("div",{onClick:e,role:"button",tabIndex:0,children:N?(0,t.jsx)("img",{src:N,alt:k,className:"u-photo"}):(0,t.jsxs)("div",{className:"photo-placeholder",children:[(0,t.jsx)("span",{className:"venue-icon",children:$()}),(0,t.jsx)("span",{children:(0,m.__)("Add photo","reactions-indieweb")})]})})})})}),(0,t.jsxs)("div",{className:"checkin-info",children:[(0,t.jsxs)("span",{className:"venue-type-badge",children:[(0,t.jsx)("span",{className:"venue-icon",children:$()}),D.find(e=>e.value===n)?.label]}),(0,t.jsx)(u.RichText,{tagName:"h3",className:"venue-name p-name",value:i,onChange:e=>a({venueName:e}),placeholder:(0,m.__)("Venue name","reactions-indieweb")}),(0,t.jsx)("div",{className:"venue-location p-location h-card",children:(0,t.jsx)(w,{address:s,locality:l,region:o,country:c})}),_&&(0,t.jsx)("time",{className:"checkin-time dt-published",dateTime:new Date(_).toISOString(),children:new Date(_).toLocaleString()}),(0,t.jsx)(u.RichText,{tagName:"p",className:"checkin-note p-content",value:y,onChange:e=>a({note:e}),placeholder:(0,m.__)("Add a note about this checkin...","reactions-indieweb")})]}),f&&h&&x&&(0,t.jsx)("div",{className:"checkin-map",children:(0,t.jsx)("iframe",{title:(0,m.__)("Location map","reactions-indieweb"),width:"100%",height:"200",frameBorder:"0",scrolling:"no",marginHeight:"0",marginWidth:"0",src:h&&x?`https://www.openstreetmap.org/export/embed.html?bbox=${x-.01},${h-.01},${x+.01},${h+.01}&layer=mapnik&marker=${h},${x}`:null})})]})})]}):(0,t.jsx)("div",{...I,children:(0,t.jsx)(j,{icon:r,label:(0,m.__)("Checkin Card","reactions-indieweb"),instructions:(0,m.__)("Add a location checkin. Enter the venue details manually.","reactions-indieweb"),children:(0,t.jsx)("div",{className:"placeholder-actions",children:(0,t.jsx)(p.Button,{variant:"primary",onClick:()=>a({venueName:""}),children:(0,m.__)("Add Checkin","reactions-indieweb")})})})})},save:function({attributes:e}){const{venueName:a,venueType:i,address:n,locality:s,region:r,country:l,postalCode:o,latitude:c,longitude:d,venueUrl:h,foursquareId:m,checkinAt:p,note:b,photo:x,photoAlt:g,showMap:v,layout:_}=e,j=u.useBlockProps.save({className:`checkin-card layout-${_}`});return(0,t.jsx)("div",{...j,children:(0,t.jsxs)("div",{className:"checkin-card-inner h-entry",children:[x&&(0,t.jsx)("div",{className:"checkin-photo",children:(0,t.jsx)("img",{src:x,alt:g||`Photo at ${a}`,className:"u-photo",loading:"lazy"})}),(0,t.jsxs)("div",{className:"checkin-info",children:[(0,t.jsxs)("span",{className:"venue-type-badge",children:[(0,t.jsx)("span",{className:"venue-icon","aria-hidden":"true",children:(()=>{const e={place:"ðŸ“",restaurant:"ðŸ½ï¸",cafe:"â˜•",bar:"ðŸº",hotel:"ðŸ¨",airport:"âœˆï¸",park:"ðŸŒ³",museum:"ðŸ›ï¸",theater:"ðŸŽ­",store:"ðŸ›ï¸",office:"ðŸ¢",home:"ðŸ ",other:"ðŸ“Œ"};return e[i]||e.place})()}),(()=>{const e={place:"Place",restaurant:"Restaurant",cafe:"Cafe",bar:"Bar",hotel:"Hotel",airport:"Airport",park:"Park",museum:"Museum",theater:"Theater",store:"Store",office:"Office",home:"Home",other:"Other"};return e[i]||e.place})()]}),a&&(0,t.jsx)("h3",{className:"venue-name",children:h?(0,t.jsx)("a",{href:h,className:"p-name u-url",target:"_blank",rel:"noopener noreferrer",children:a}):(0,t.jsx)("span",{className:"p-name",children:a})}),(0,t.jsxs)("div",{className:"venue-location p-location h-card",children:[n&&(0,t.jsx)("span",{className:"p-street-address",children:n}),(s||r||l)&&(0,t.jsxs)("span",{className:"location-parts",children:[s&&(0,t.jsx)("span",{className:"p-locality",children:s}),s&&r&&", ",r&&(0,t.jsx)("span",{className:"p-region",children:r}),(s||r)&&l&&", ",l&&(0,t.jsx)("span",{className:"p-country-name",children:l})]}),o&&(0,t.jsx)("span",{className:"p-postal-code",children:o}),c&&d&&(0,t.jsxs)("data",{className:"p-geo h-geo",value:c&&d?`geo:${c},${d}`:null,children:[(0,t.jsx)("data",{className:"p-latitude",value:c,hidden:!0}),(0,t.jsx)("data",{className:"p-longitude",value:d,hidden:!0})]})]}),p&&(0,t.jsx)("time",{className:"checkin-time dt-published",dateTime:new Date(p).toISOString(),children:new Date(p).toLocaleString()}),b&&(0,t.jsx)("div",{className:"checkin-note p-content",children:(0,t.jsx)(u.RichText.Content,{tagName:"p",value:b})})]}),v&&c&&d&&(0,t.jsxs)("div",{className:"checkin-map",children:[(0,t.jsx)("iframe",{title:`Map of ${a||"location"}`,width:"100%",height:"200",frameBorder:"0",scrolling:"no",marginHeight:"0",marginWidth:"0",src:c&&d?`https://www.openstreetmap.org/export/embed.html?bbox=${d-.01},${c-.01},${d+.01},${c+.01}&layer=mapnik&marker=${c},${d}`:null,loading:"lazy"}),(0,t.jsx)("a",{href:`https://www.openstreetmap.org/?mlat=${c}&mlon=${d}#map=16/${c}/${d}`,className:"map-link",target:"_blank",rel:"noopener noreferrer",children:"View larger map"})]}),(0,t.jsx)("data",{className:"u-checkin",value:h||"",hidden:!0}),m&&(0,t.jsx)("data",{className:"u-uid",value:`https://foursquare.com/v/${m}`,hidden:!0})]})})}});const C=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"reactions-indieweb/rsvp-card","version":"1.0.0","title":"RSVP Card","category":"reactions-indieweb","description":"Display an RSVP response to an event with status, event details, and optional note.","keywords":["rsvp","event","attend","interested","maybe","response"],"textdomain":"reactions-indieweb","attributes":{"eventName":{"type":"string","source":"html","selector":".event-name"},"eventUrl":{"type":"string"},"eventStart":{"type":"string"},"eventEnd":{"type":"string"},"eventLocation":{"type":"string"},"eventDescription":{"type":"string"},"rsvpStatus":{"type":"string","default":"yes"},"rsvpNote":{"type":"string","source":"html","selector":".rsvp-note"},"rsvpAt":{"type":"string"},"eventImage":{"type":"string","source":"attribute","selector":".event-image img","attribute":"src"},"eventImageAlt":{"type":"string","source":"attribute","selector":".event-image img","attribute":"alt"},"layout":{"type":"string","default":"horizontal"}},"supports":{"html":false,"align":["wide","full"],"color":{"background":true,"text":true},"spacing":{"margin":true,"padding":true},"typography":{"fontSize":true},"__experimentalBorder":{"color":true,"radius":true,"width":true}},"example":{"attributes":{"eventName":"IndieWebCamp 2025","rsvpStatus":"yes","eventLocation":"Portland, OR"}},"editorScript":"file:./index.js","editorStyle":"file:./editor.css","style":"file:./style.css"}');(0,e.registerBlockType)(C.name,{...C,icon:l,edit:function({attributes:e,setAttributes:a}){const{eventName:i,eventUrl:n,eventStart:s,eventEnd:r,eventLocation:o,eventDescription:c,rsvpStatus:d,rsvpNote:h,rsvpAt:x,eventImage:g,eventImageAlt:v,layout:_}=e,[w,y]=(0,b.useState)(!1),[N,k]=(0,b.useState)(!1),[f,C]=(0,b.useState)(!1),S=(0,u.useBlockProps)({className:`rsvp-card layout-${_} rsvp-${d}`}),T=[{label:(0,m.__)("Yes","reactions-indieweb"),value:"yes"},{label:(0,m.__)("No","reactions-indieweb"),value:"no"},{label:(0,m.__)("Maybe","reactions-indieweb"),value:"maybe"},{label:(0,m.__)("Interested","reactions-indieweb"),value:"interested"},{label:(0,m.__)("Remote","reactions-indieweb"),value:"remote"}],I=()=>{const e={yes:"âœ…",no:"âŒ",maybe:"ðŸ¤”",interested:"ðŸ‘€",remote:"ðŸ’»"};return e[d]||e.yes};return i||n?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(u.InspectorControls,{children:[(0,t.jsxs)(p.PanelBody,{title:(0,m.__)("Event Details","reactions-indieweb"),children:[(0,t.jsx)(p.TextControl,{label:(0,m.__)("Event Name","reactions-indieweb"),value:i||"",onChange:e=>a({eventName:e})}),(0,t.jsx)(p.TextControl,{label:(0,m.__)("Event URL","reactions-indieweb"),value:n||"",onChange:e=>a({eventUrl:e}),type:"url"}),(0,t.jsx)(p.TextControl,{label:(0,m.__)("Location","reactions-indieweb"),value:o||"",onChange:e=>a({eventLocation:e})}),(0,t.jsx)(p.TextareaControl,{label:(0,m.__)("Description","reactions-indieweb"),value:c||"",onChange:e=>a({eventDescription:e}),rows:3})]}),(0,t.jsxs)(p.PanelBody,{title:(0,m.__)("Event Date & Time","reactions-indieweb"),children:[(0,t.jsxs)("div",{className:"components-base-control",children:[(0,t.jsx)("label",{className:"components-base-control__label",children:(0,m.__)("Start","reactions-indieweb")}),(0,t.jsx)(p.Button,{variant:"secondary",onClick:()=>y(!0),children:s?new Date(s).toLocaleString():(0,m.__)("Set start time","reactions-indieweb")}),w&&(0,t.jsx)(p.Popover,{onClose:()=>y(!1),children:(0,t.jsx)(p.DateTimePicker,{currentDate:s,onChange:e=>{a({eventStart:e}),y(!1)}})})]}),(0,t.jsxs)("div",{className:"components-base-control",children:[(0,t.jsx)("label",{className:"components-base-control__label",children:(0,m.__)("End","reactions-indieweb")}),(0,t.jsx)(p.Button,{variant:"secondary",onClick:()=>k(!0),children:r?new Date(r).toLocaleString():(0,m.__)("Set end time","reactions-indieweb")}),N&&(0,t.jsx)(p.Popover,{onClose:()=>k(!1),children:(0,t.jsx)(p.DateTimePicker,{currentDate:r,onChange:e=>{a({eventEnd:e}),k(!1)}})})]})]}),(0,t.jsxs)(p.PanelBody,{title:(0,m.__)("Your RSVP","reactions-indieweb"),children:[(0,t.jsx)(p.SelectControl,{label:(0,m.__)("Response","reactions-indieweb"),value:d,options:T,onChange:e=>a({rsvpStatus:e})}),(0,t.jsxs)("div",{className:"components-base-control",children:[(0,t.jsx)("label",{className:"components-base-control__label",children:(0,m.__)("RSVP Time","reactions-indieweb")}),(0,t.jsx)(p.Button,{variant:"secondary",onClick:()=>C(!0),children:x?new Date(x).toLocaleString():(0,m.__)("Set time","reactions-indieweb")}),f&&(0,t.jsx)(p.Popover,{onClose:()=>C(!1),children:(0,t.jsx)(p.DateTimePicker,{currentDate:x,onChange:e=>{a({rsvpAt:e}),C(!1)}})})]})]}),(0,t.jsx)(p.PanelBody,{title:(0,m.__)("Layout","reactions-indieweb"),children:(0,t.jsx)(p.SelectControl,{label:(0,m.__)("Layout Style","reactions-indieweb"),value:_,options:[{label:(0,m.__)("Horizontal","reactions-indieweb"),value:"horizontal"},{label:(0,m.__)("Vertical","reactions-indieweb"),value:"vertical"},{label:(0,m.__)("Compact","reactions-indieweb"),value:"compact"}],onChange:e=>a({layout:e})})})]}),(0,t.jsx)("div",{...S,children:(0,t.jsxs)("div",{className:"rsvp-card-inner h-entry",children:[(0,t.jsx)("div",{className:"event-image",children:(0,t.jsx)(u.MediaUploadCheck,{children:(0,t.jsx)(u.MediaUpload,{onSelect:e=>{a({eventImage:e.url,eventImageAlt:e.alt||i})},allowedTypes:["image"],render:({open:e})=>(0,t.jsx)("div",{onClick:e,role:"button",tabIndex:0,children:g?(0,t.jsx)("img",{src:g,alt:v,className:"u-photo"}):(0,t.jsxs)("div",{className:"image-placeholder",children:[(0,t.jsx)("span",{className:"rsvp-icon",children:I()}),(0,t.jsx)("span",{children:(0,m.__)("Add event image","reactions-indieweb")})]})})})})}),(0,t.jsxs)("div",{className:"rsvp-info",children:[(0,t.jsxs)("span",{className:`rsvp-status-badge status-${d}`,children:[(0,t.jsx)("span",{className:"status-icon","aria-hidden":"true",children:I()}),(()=>{const e={yes:(0,m.__)("Going","reactions-indieweb"),no:(0,m.__)("Not Going","reactions-indieweb"),maybe:(0,m.__)("Maybe","reactions-indieweb"),interested:(0,m.__)("Interested","reactions-indieweb"),remote:(0,m.__)("Attending Remotely","reactions-indieweb")};return e[d]||e.yes})()]}),(0,t.jsx)("div",{className:"rsvp-quick-buttons",children:(0,t.jsx)(p.ButtonGroup,{children:T.map(e=>(0,t.jsx)(p.Button,{variant:d===e.value?"primary":"secondary",onClick:()=>a({rsvpStatus:e.value}),isSmall:!0,children:e.label},e.value))})}),(0,t.jsx)(u.RichText,{tagName:"h3",className:"event-name p-name",value:i,onChange:e=>a({eventName:e}),placeholder:(0,m.__)("Event name","reactions-indieweb")}),s&&(0,t.jsxs)("div",{className:"event-datetime",children:[(0,t.jsx)("span",{className:"datetime-icon","aria-hidden":"true",children:"ðŸ“…"}),(0,t.jsx)("time",{dateTime:new Date(s).toISOString(),children:(()=>{if(!s)return null;const e=new Date(s),a=r?new Date(r):null,t=e.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"});return a?e.toDateString()===a.toDateString()?`${t} - ${a.toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"})}`:`${t} - ${a.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}`:t})()})]}),o&&(0,t.jsxs)("div",{className:"event-location p-location",children:[(0,t.jsx)("span",{className:"location-icon","aria-hidden":"true",children:"ðŸ“"}),o]}),(0,t.jsx)(u.RichText,{tagName:"p",className:"rsvp-note p-content",value:h,onChange:e=>a({rsvpNote:e}),placeholder:(0,m.__)("Add a note about your RSVP...","reactions-indieweb")})]})]})})]}):(0,t.jsx)("div",{...S,children:(0,t.jsx)(j,{icon:l,label:(0,m.__)("RSVP Card","reactions-indieweb"),instructions:(0,m.__)("Respond to an event with your RSVP status.","reactions-indieweb"),children:(0,t.jsxs)("div",{className:"placeholder-actions",children:[(0,t.jsx)(p.TextControl,{label:(0,m.__)("Event URL","reactions-indieweb"),value:n||"",onChange:e=>a({eventUrl:e}),type:"url",placeholder:"https://..."}),(0,t.jsx)(p.Button,{variant:"primary",onClick:()=>a({eventName:""}),children:(0,m.__)("Add RSVP","reactions-indieweb")})]})})})},save:function({attributes:e}){const{eventName:a,eventUrl:i,eventStart:n,eventEnd:s,eventLocation:r,eventDescription:l,rsvpStatus:o,rsvpNote:c,rsvpAt:d,eventImage:h,eventImageAlt:m,layout:p}=e,b=u.useBlockProps.save({className:`rsvp-card layout-${p} rsvp-${o}`});return(0,t.jsx)("div",{...b,children:(0,t.jsxs)("div",{className:"rsvp-card-inner h-entry",children:[h&&(0,t.jsx)("div",{className:"event-image",children:(0,t.jsx)("img",{src:h,alt:m||`${a} event`,className:"u-photo",loading:"lazy"})}),(0,t.jsxs)("div",{className:"rsvp-info",children:[(0,t.jsxs)("span",{className:`rsvp-status-badge status-${o}`,children:[(0,t.jsx)("span",{className:"status-icon","aria-hidden":"true",children:(()=>{const e={yes:"âœ…",no:"âŒ",maybe:"ðŸ¤”",interested:"ðŸ‘€",remote:"ðŸ’»"};return e[o]||e.yes})()}),(0,t.jsx)("data",{className:"p-rsvp",value:o,children:(()=>{const e={yes:"Going",no:"Not Going",maybe:"Maybe",interested:"Interested",remote:"Attending Remotely"};return e[o]||e.yes})()})]}),(0,t.jsxs)("div",{className:"event-details p-in-reply-to h-event",children:[a&&(0,t.jsx)("h3",{className:"event-name",children:i?(0,t.jsx)("a",{href:i,className:"p-name u-url",target:"_blank",rel:"noopener noreferrer",children:a}):(0,t.jsx)("span",{className:"p-name",children:a})}),n&&(0,t.jsxs)("div",{className:"event-datetime",children:[(0,t.jsx)("span",{className:"datetime-icon","aria-hidden":"true",children:"ðŸ“…"}),(0,t.jsx)("time",{className:"dt-start",dateTime:new Date(n).toISOString(),children:(()=>{if(!n)return null;const e=new Date(n),a=s?new Date(s):null,t=e.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"});return a?e.toDateString()===a.toDateString()?`${t} - ${a.toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"})}`:`${t} - ${a.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}`:t})()}),s&&(0,t.jsx)("data",{className:"dt-end",value:new Date(s).toISOString(),hidden:!0})]}),r&&(0,t.jsxs)("div",{className:"event-location",children:[(0,t.jsx)("span",{className:"location-icon","aria-hidden":"true",children:"ðŸ“"}),(0,t.jsx)("span",{className:"p-location",children:r})]}),l&&(0,t.jsx)("p",{className:"event-description p-summary",children:l})]}),c&&(0,t.jsx)("div",{className:"rsvp-note p-content",children:(0,t.jsx)(u.RichText.Content,{tagName:"p",value:c})}),d&&(0,t.jsxs)("time",{className:"rsvp-time dt-published",dateTime:new Date(d).toISOString(),children:["RSVPed ",new Date(d).toLocaleDateString()]})]}),i&&(0,t.jsx)("data",{className:"u-in-reply-to",value:i,hidden:!0})]})})}});const S=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"reactions-indieweb/star-rating","version":"1.0.0","title":"Star Rating","category":"reactions-indieweb","description":"Add an interactive star rating to any content with customizable scale and style.","keywords":["rating","stars","review","score","feedback"],"textdomain":"reactions-indieweb","attributes":{"rating":{"type":"number","default":0},"maxRating":{"type":"number","default":5},"showLabel":{"type":"boolean","default":true},"label":{"type":"string","default":"Rating"},"showValue":{"type":"boolean","default":true},"size":{"type":"string","default":"medium"},"style":{"type":"string","default":"stars"},"allowHalf":{"type":"boolean","default":false},"itemUrl":{"type":"string"},"itemName":{"type":"string"}},"supports":{"html":false,"align":["left","center","right"],"color":{"text":true},"spacing":{"margin":true,"padding":true},"typography":{"fontSize":true}},"example":{"attributes":{"rating":4,"maxRating":5,"label":"My Rating"}},"editorScript":"file:./index.js","editorStyle":"file:./editor.css","style":"file:./style.css"}');(0,e.registerBlockType)(S.name,{...S,icon:o,edit:function({attributes:e,setAttributes:a}){const{rating:i,maxRating:n,showLabel:s,label:r,showValue:l,size:o,style:c,allowHalf:d,itemUrl:h,itemName:b}=e,x=(0,u.useBlockProps)({className:`star-rating-block size-${o} style-${c}`}),g=[{label:(0,m.__)("Small","reactions-indieweb"),value:"small"},{label:(0,m.__)("Medium","reactions-indieweb"),value:"medium"},{label:(0,m.__)("Large","reactions-indieweb"),value:"large"}],v=[{label:(0,m.__)("Stars","reactions-indieweb"),value:"stars"},{label:(0,m.__)("Hearts","reactions-indieweb"),value:"hearts"},{label:(0,m.__)("Circles","reactions-indieweb"),value:"circles"},{label:(0,m.__)("Numeric","reactions-indieweb"),value:"numeric"}],_=e=>{const a={stars:{filled:"â˜…",empty:"â˜†"},hearts:{filled:"â¤ï¸",empty:"ðŸ¤"},circles:{filled:"â—",empty:"â—‹"},numeric:{filled:null,empty:null}};return e?a[c]?.filled:a[c]?.empty},j=e=>{a(e===i?{rating:0}:{rating:e})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(u.InspectorControls,{children:[(0,t.jsxs)(p.PanelBody,{title:(0,m.__)("Rating Settings","reactions-indieweb"),children:[(0,t.jsx)(p.RangeControl,{label:(0,m.__)("Current Rating","reactions-indieweb"),value:i,onChange:e=>a({rating:e}),min:0,max:n,step:d?.5:1}),(0,t.jsx)(p.RangeControl,{label:(0,m.__)("Maximum Rating","reactions-indieweb"),value:n,onChange:e=>a({maxRating:e}),min:3,max:10}),(0,t.jsx)(p.ToggleControl,{label:(0,m.__)("Allow Half Stars","reactions-indieweb"),checked:d,onChange:e=>a({allowHalf:e})})]}),(0,t.jsxs)(p.PanelBody,{title:(0,m.__)("Display Options","reactions-indieweb"),children:[(0,t.jsx)(p.SelectControl,{label:(0,m.__)("Style","reactions-indieweb"),value:c,options:v,onChange:e=>a({style:e})}),(0,t.jsx)(p.SelectControl,{label:(0,m.__)("Size","reactions-indieweb"),value:o,options:g,onChange:e=>a({size:e})}),(0,t.jsx)(p.ToggleControl,{label:(0,m.__)("Show Label","reactions-indieweb"),checked:s,onChange:e=>a({showLabel:e})}),s&&(0,t.jsx)(p.TextControl,{label:(0,m.__)("Label Text","reactions-indieweb"),value:r,onChange:e=>a({label:e})}),(0,t.jsx)(p.ToggleControl,{label:(0,m.__)("Show Value","reactions-indieweb"),checked:l,onChange:e=>a({showValue:e})})]}),(0,t.jsxs)(p.PanelBody,{title:(0,m.__)("Rated Item","reactions-indieweb"),initialOpen:!1,children:[(0,t.jsx)(p.TextControl,{label:(0,m.__)("Item Name","reactions-indieweb"),value:b||"",onChange:e=>a({itemName:e}),help:(0,m.__)("What are you rating?","reactions-indieweb")}),(0,t.jsx)(p.TextControl,{label:(0,m.__)("Item URL","reactions-indieweb"),value:h||"",onChange:e=>a({itemUrl:e}),type:"url"})]})]}),(0,t.jsx)("div",{...x,children:(0,t.jsxs)("div",{className:"star-rating-inner",children:[s&&r&&(0,t.jsx)("span",{className:"rating-label",children:r}),"numeric"===c?(0,t.jsxs)("div",{className:"rating-numeric",children:[(0,t.jsx)(p.RangeControl,{value:i,onChange:e=>a({rating:e}),min:0,max:n,step:d?.5:1,withInputField:!0}),(0,t.jsxs)("span",{className:"rating-display",children:[i," / ",n]})]}):(0,t.jsx)("div",{className:"rating-icons",role:"radiogroup","aria-label":r||(0,m.__)("Rating","reactions-indieweb"),children:Array.from({length:n},(e,s)=>{const r=s+1,l=r<=i,o=d&&r-.5===i;return(0,t.jsx)("button",{type:"button",className:`rating-icon ${l?"filled":""} ${o?"half-filled":""}`,onClick:()=>j(r),onKeyDown:e=>((e,t)=>{const s=t+1;"Enter"===e.key||" "===e.key?(e.preventDefault(),j(s)):"ArrowRight"===e.key||"ArrowUp"===e.key?(e.preventDefault(),i<n&&a({rating:i+(d?.5:1)})):"ArrowLeft"!==e.key&&"ArrowDown"!==e.key||(e.preventDefault(),i>0&&a({rating:i-(d?.5:1)}))})(e,s),role:"radio","aria-checked":l,"aria-label":`${r} ${1===r?(0,m.__)("star","reactions-indieweb"):(0,m.__)("stars","reactions-indieweb")}`,tabIndex:0===s?0:-1,children:o?(0,t.jsxs)("span",{className:"half-star",children:[(0,t.jsx)("span",{className:"half-filled-part",children:_(!0)}),(0,t.jsx)("span",{className:"half-empty-part",children:_(!1)})]}):(0,t.jsx)("span",{children:_(l)})},s)})}),l&&"numeric"!==c&&(0,t.jsxs)("span",{className:"rating-value",children:[i," / ",n]})]})})]})},save:function({attributes:e}){const{rating:a,maxRating:i,showLabel:n,label:s,showValue:r,size:l,style:o,allowHalf:c,itemUrl:d,itemName:h}=e,m=u.useBlockProps.save({className:`star-rating-block size-${l} style-${o}`}),p=e=>{const a={stars:{filled:"â˜…",empty:"â˜†"},hearts:{filled:"â¤ï¸",empty:"ðŸ¤"},circles:{filled:"â—",empty:"â—‹"},numeric:{filled:null,empty:null}};return e?a[o]?.filled:a[o]?.empty};return Math.round(a/i*100),(0,t.jsx)("div",{...m,children:(0,t.jsxs)("div",{className:"star-rating-inner h-review","aria-label":`Rating: ${a} out of ${i}`,children:[n&&s&&(0,t.jsx)("span",{className:"rating-label",children:s}),(0,t.jsx)("div",{className:"rating-display",children:"numeric"===o?(0,t.jsxs)("span",{className:"rating-numeric-display",children:[a," / ",i]}):(()=>{const e=[];for(let n=0;n<i;n++){const i=n+1,s=i<=a,r=c&&i-.5===a;e.push((0,t.jsx)("span",{className:`rating-icon ${s?"filled":""} ${r?"half-filled":""}`,"aria-hidden":"true",children:r?(0,t.jsxs)("span",{className:"half-star",children:[(0,t.jsx)("span",{className:"half-filled-part",children:p(!0)}),(0,t.jsx)("span",{className:"half-empty-part",children:p(!1)})]}):p(s)},n))}return e})()}),r&&"numeric"!==o&&(0,t.jsxs)("span",{className:"rating-value",children:[a," / ",i]}),(0,t.jsxs)("data",{className:"p-rating",value:a,children:[(0,t.jsx)("data",{className:"p-best",value:i,hidden:!0}),(0,t.jsx)("data",{className:"p-worst",value:"0",hidden:!0})]}),h&&(0,t.jsx)("span",{className:"p-item h-product",hidden:!0,children:d?(0,t.jsx)("a",{href:d,className:"p-name u-url",children:h}):(0,t.jsx)("span",{className:"p-name",children:h})}),(0,t.jsxs)("span",{itemProp:"reviewRating",itemScope:!0,itemType:"https://schema.org/Rating",hidden:!0,children:[(0,t.jsx)("meta",{itemProp:"worstRating",content:"0"}),(0,t.jsx)("meta",{itemProp:"ratingValue",content:a.toString()}),(0,t.jsx)("meta",{itemProp:"bestRating",content:i.toString()})]})]})})}});const T=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"reactions-indieweb/media-lookup","version":"1.0.0","title":"Media Lookup","category":"reactions-indieweb","description":"Search and embed media info from external APIs (books, movies, music).","keywords":["lookup","search","media","book","movie","music","api"],"textdomain":"reactions-indieweb","attributes":{"mediaType":{"type":"string","default":"book"},"searchQuery":{"type":"string"},"selectedItem":{"type":"object"},"displayStyle":{"type":"string","default":"card"},"showImage":{"type":"boolean","default":true},"showDescription":{"type":"boolean","default":true},"linkToSource":{"type":"boolean","default":true}},"supports":{"html":false,"align":["wide","full"],"color":{"background":true,"text":true},"spacing":{"margin":true,"padding":true},"typography":{"fontSize":true},"__experimentalBorder":{"color":true,"radius":true,"width":true}},"example":{"attributes":{"mediaType":"book","selectedItem":{"title":"The Great Gatsby","author":"F. Scott Fitzgerald","year":"1925"}}},"editorScript":"file:./index.js","editorStyle":"file:./editor.css","style":"file:./style.css"}');(0,e.registerBlockType)(T.name,{...T,icon:d,edit:function({attributes:e,setAttributes:a}){const{mediaType:i,searchQuery:n,selectedItem:s,displayStyle:r,showImage:l,showDescription:o,linkToSource:c}=e,[d,h]=(0,b.useState)(!1),x=(0,u.useBlockProps)({className:`media-lookup-block type-${i} style-${r}`}),_=[{label:(0,m.__)("Book","reactions-indieweb"),value:"book"},{label:(0,m.__)("Movie/TV","reactions-indieweb"),value:"movie"},{label:(0,m.__)("Music","reactions-indieweb"),value:"music"}],w=[{label:(0,m.__)("Card","reactions-indieweb"),value:"card"},{label:(0,m.__)("Inline","reactions-indieweb"),value:"inline"},{label:(0,m.__)("Compact","reactions-indieweb"),value:"compact"}],y=()=>({book:"Open Library",movie:"TMDB",music:"MusicBrainz"}[i]||"External API"),N=()=>{a({selectedItem:null,searchQuery:""})};return s?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(u.InspectorControls,{children:[(0,t.jsxs)(p.PanelBody,{title:(0,m.__)("Display Settings","reactions-indieweb"),children:[(0,t.jsx)(p.SelectControl,{label:(0,m.__)("Display Style","reactions-indieweb"),value:r,options:w,onChange:e=>a({displayStyle:e})}),(0,t.jsx)(p.ToggleControl,{label:(0,m.__)("Show Image","reactions-indieweb"),checked:l,onChange:e=>a({showImage:e})}),(0,t.jsx)(p.ToggleControl,{label:(0,m.__)("Show Description","reactions-indieweb"),checked:o,onChange:e=>a({showDescription:e})}),(0,t.jsx)(p.ToggleControl,{label:(0,m.__)("Link to Source","reactions-indieweb"),checked:c,onChange:e=>a({linkToSource:e})})]}),(0,t.jsxs)(p.PanelBody,{title:(0,m.__)("Media Info","reactions-indieweb"),initialOpen:!1,children:[(0,t.jsxs)("p",{className:"components-base-control__help",children:[(0,m.__)("Data fetched from","reactions-indieweb")," ",y()]}),s&&(0,t.jsxs)("div",{className:"selected-item-details",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:(0,m.__)("Title:","reactions-indieweb")})," ",s.title||s.name]}),s.id&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:(0,m.__)("ID:","reactions-indieweb")})," ",s.id]})]}),(0,t.jsx)(p.Button,{variant:"secondary",onClick:N,isDestructive:!0,children:(0,m.__)("Remove & Search Again","reactions-indieweb")})]})]}),(0,t.jsx)("div",{...x,children:(0,t.jsx)("div",{className:"media-lookup-inner h-cite",children:(()=>{if(!s)return null;const e=s.title||s.name||"",a=s.author||s.artist||s.director||"",i=s.year||s.release_year||s.first_publish_year||"",n=s.cover||s.image||s.poster||"",d=s.description||s.overview||"",h=s.url||s.link||"";return(0,t.jsxs)("div",{className:`media-item-preview style-${r}`,children:[l&&n&&(0,t.jsx)("div",{className:"media-image",children:(0,t.jsx)(g,{src:n,alt:e,size:"compact"===r?"small":"medium"})}),(0,t.jsxs)("div",{className:"media-info",children:[(0,t.jsx)("h3",{className:"media-title",children:c&&h?(0,t.jsx)("a",{href:h,target:"_blank",rel:"noopener noreferrer",children:e}):e}),a&&(0,t.jsx)("p",{className:"media-subtitle",children:a}),i&&(0,t.jsx)("span",{className:"media-year",children:i}),o&&d&&"compact"!==r&&(0,t.jsx)("p",{className:"media-description",children:d.length>200?`${d.substring(0,200)}...`:d}),(0,t.jsx)("div",{className:"media-source",children:(0,t.jsxs)("span",{className:"source-label",children:[(0,m.__)("via","reactions-indieweb")," ",y()]})})]}),(0,t.jsx)(p.Button,{variant:"secondary",onClick:N,className:"clear-selection",isSmall:!0,children:(0,m.__)("Change","reactions-indieweb")})]})})()})})]}):(0,t.jsxs)("div",{...x,children:[(0,t.jsx)(u.InspectorControls,{children:(0,t.jsx)(p.PanelBody,{title:(0,m.__)("Media Type","reactions-indieweb"),children:(0,t.jsx)(p.SelectControl,{label:(0,m.__)("Type","reactions-indieweb"),value:i,options:_,onChange:e=>a({mediaType:e})})})}),(0,t.jsx)(j,{icon:(0,t.jsx)("span",{className:"media-type-icon",children:{book:"ðŸ“š",movie:"ðŸŽ¬",music:"ðŸŽµ"}[i]||"ðŸ“¦"}),label:(0,m.__)("Media Lookup","reactions-indieweb"),instructions:(0,m.__)("Search for media to embed information about a book, movie, or music.","reactions-indieweb"),children:(0,t.jsxs)("div",{className:"media-lookup-search",children:[(0,t.jsx)("div",{className:"media-type-selector",children:_.map(e=>(0,t.jsx)(p.Button,{variant:i===e.value?"primary":"secondary",onClick:()=>a({mediaType:e.value}),isSmall:!0,children:e.label},e.value))}),(0,t.jsx)(v,{type:i,placeholder:{book:(0,m.__)("Search by title, author, or ISBN...","reactions-indieweb"),movie:(0,m.__)("Search by title, year, or actor...","reactions-indieweb"),music:(0,m.__)("Search by song, artist, or album...","reactions-indieweb")}[i]||(0,m.__)("Search...","reactions-indieweb"),onSelect:e=>{a({selectedItem:e,searchQuery:""}),h(!1)}})]})})]})},save:function({attributes:e}){const{mediaType:a,selectedItem:i,displayStyle:n,showImage:s,showDescription:r,linkToSource:l}=e;if(!i)return null;const o=u.useBlockProps.save({className:`media-lookup-block type-${a} style-${n}`}),c=i.title||i.name||"",d=i.author||i.artist||i.director||"",h=i.year||i.release_year||i.first_publish_year||"",m=i.cover||i.image||i.poster||"",p=i.description||i.overview||"",b=i.url||i.link||"",x=i.id||i.key||"",g=(()=>{if(b)return b;switch(a){case"book":if(i.key)return`https://openlibrary.org${i.key}`;if(i.isbn)return`https://openlibrary.org/isbn/${i.isbn}`;break;case"movie":if(i.tmdb_id)return`https://www.themoviedb.org/${"tv"===i.media_type?"tv":"movie"}/${i.tmdb_id}`;if(i.imdb_id)return`https://www.imdb.com/title/${i.imdb_id}`;break;case"music":if(i.musicbrainz_id)return`https://musicbrainz.org/recording/${i.musicbrainz_id}`}return null})();return(0,t.jsx)("div",{...o,children:(0,t.jsxs)("div",{className:`media-lookup-inner ${(()=>{switch(a){case"book":return"h-cite p-read-of";case"movie":return"h-cite p-watch-of";case"music":return"h-cite p-listen-of";default:return"h-cite"}})()}`,children:[s&&m&&(0,t.jsx)("div",{className:"media-image",children:(0,t.jsx)("img",{src:m,alt:c,className:"u-photo",loading:"lazy"})}),(0,t.jsxs)("div",{className:"media-info",children:[(0,t.jsx)("h3",{className:"media-title p-name",children:l&&g?(0,t.jsx)("a",{href:g,className:"u-url",target:"_blank",rel:"noopener noreferrer",children:c}):c}),d&&(0,t.jsx)("p",{className:"media-subtitle p-author h-card",children:(0,t.jsx)("span",{className:"p-name",children:d})}),h&&(0,t.jsx)("span",{className:"media-year",children:(0,t.jsx)("time",{className:"dt-published",children:h})}),r&&p&&"compact"!==n&&(0,t.jsx)("p",{className:"media-description p-summary",children:p.length>200?`${p.substring(0,200)}...`:p}),(0,t.jsxs)("div",{className:"media-meta",children:["book"===a&&i.isbn&&(0,t.jsx)("data",{className:"p-isbn",value:i.isbn,hidden:!0}),"book"===a&&i.publisher&&(0,t.jsx)("span",{className:"p-publisher",children:i.publisher}),"movie"===a&&i.runtime&&(0,t.jsxs)("span",{className:"runtime",children:[i.runtime," min"]}),"music"===a&&i.album&&(0,t.jsx)("span",{className:"album",children:i.album})]})]}),g&&(0,t.jsx)("data",{className:"u-uid",value:g,hidden:!0}),x&&(0,t.jsx)("data",{className:"p-uid",value:x,hidden:!0})]})})}}),(0,e.registerBlockCollection)("reactions-indieweb",{title:"Reactions for IndieWeb",icon:"heart"})})();