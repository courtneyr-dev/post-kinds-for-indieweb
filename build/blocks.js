(()=>{"use strict";var e={n:a=>{var t=a&&a.__esModule?()=>a.default:()=>a;return e.d(t,{a:t}),t},d:(a,t)=>{for(var i in t)e.o(t,i)&&!e.o(a,i)&&Object.defineProperty(a,i,{enumerable:!0,get:t[i]})},o:(e,a)=>Object.prototype.hasOwnProperty.call(e,a)};const a=window.wp.blocks,t=window.wp.primitives,i=window.ReactJSXRuntime,r=(0,i.jsx)(t.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,i.jsx)(t.Path,{d:"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6zm-2 16c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"})}),n=(0,i.jsx)(t.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,i.jsx)(t.Path,{d:"M18 4l2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4h-4z"})}),s=(0,i.jsx)(t.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,i.jsx)(t.Path,{d:"M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z"})}),o=(0,i.jsx)(t.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,i.jsx)(t.Path,{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})}),l=(0,i.jsx)(t.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,i.jsx)(t.Path,{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"})}),c=(0,i.jsx)(t.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,i.jsx)(t.Path,{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}),d=(0,i.jsx)(t.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,i.jsx)(t.Path,{d:"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"})}),u=(0,i.jsx)(t.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,i.jsx)(t.Path,{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})}),m=(t.SVG,t.Path,t.SVG,t.Path,t.SVG,t.Path,t.SVG,t.Path,t.SVG,t.Path,t.SVG,t.Path,(0,i.jsx)(t.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,i.jsx)(t.Path,{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"})})),h=(t.SVG,t.Circle,t.Path,t.SVG,t.Path,(0,i.jsx)(t.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,i.jsx)(t.Path,{d:"M21.58 16.09l-1.09-7.66A3.996 3.996 0 0016.53 5H7.47c-1.88 0-3.5 1.32-3.89 3.16l-1.09 7.66A3.007 3.007 0 005.46 19c.9 0 1.75-.4 2.32-1.09l1.78-2.13c.39-.47.96-.73 1.56-.73h1.77c.6 0 1.17.26 1.56.73l1.78 2.13c.57.69 1.42 1.09 2.32 1.09a3.007 3.007 0 002.97-3.04zM11 11H9v2H8v-2H6v-1h2V8h1v2h2v1zm4-1c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm2 3c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z"})})),_=(0,i.jsx)(t.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,i.jsx)(t.Path,{d:"M11 9H9V2H7v7H5V2H3v7c0 2.12 1.66 3.84 3.75 3.97V22h2.5v-9.03C11.34 12.84 13 11.12 13 9V2h-2v7zm5-3v8h2.5v8H21V2c-2.76 0-5 2.24-5 4z"})}),p=(0,i.jsx)(t.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,i.jsx)(t.Path,{d:"M20 3H4v10c0 2.21 1.79 4 4 4h6c2.21 0 4-1.79 4-4v-3h2c1.11 0 2-.89 2-2V5c0-1.11-.89-2-2-2zm0 5h-2V5h2v3zM4 19h16v2H4z"})}),b=(0,i.jsx)(t.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,i.jsx)(t.Path,{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}),g=(0,i.jsx)(t.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,i.jsx)(t.Path,{d:"M12 3l.01 10.55c-.59-.34-1.27-.55-2.01-.55C7.79 13 6 14.79 6 17s1.79 4 4 4 4-1.79 4-4V7h4V3h-6zm-2 16c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"})}),x=(0,i.jsx)(t.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,i.jsx)(t.Path,{d:"M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z"})}),v=(0,i.jsx)(t.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,i.jsx)(t.Path,{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"})}),w=(0,i.jsx)(t.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,i.jsx)(t.Path,{d:"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"})}),j=window.wp.i18n,f=window.wp.blockEditor,y=window.wp.components,N=window.wp.element;function k({value:e=0,onChange:a,max:t=5,readonly:r=!1}){const[n,s]=(0,N.useState)(0),o=n||e;return(0,i.jsxs)("div",{className:"reactions-star-rating",onMouseLeave:()=>{s(0)},role:"group","aria-label":(0,j.__)("Rating","reactions-for-indieweb"),children:[Array.from({length:t},(e,a)=>a+1).map(t=>(0,i.jsx)("button",{type:"button",className:"star "+(t<=o?"filled":""),onClick:()=>(t=>{!r&&a&&a(t===e?0:t)})(t),onMouseEnter:()=>(e=>{r||s(e)})(t),disabled:r,"aria-label":`${t} ${1===t?(0,j.__)("star","reactions-for-indieweb"):(0,j.__)("stars","reactions-for-indieweb")}`,"aria-pressed":t<=e,children:t<=o?c:d},t)),e>0&&(0,i.jsxs)("span",{className:"rating-text","aria-hidden":"true",children:[e,"/",t]})]})}function C({src:e,alt:a="",size:t="medium",className:r=""}){const[n,s]=(0,N.useState)(!1),[o,l]=(0,N.useState)(!0);return!e||n?(0,i.jsx)("div",{className:`reactions-cover-placeholder ${t} ${r}`,children:m}):(0,i.jsxs)("div",{className:`reactions-cover-image ${t} ${r}`,children:[o&&(0,i.jsx)("div",{className:"cover-loading",children:(0,i.jsx)(y.Spinner,{})}),(0,i.jsx)("img",{src:e,alt:a,onLoad:()=>l(!1),onError:()=>{s(!0),l(!1)},style:{opacity:o?0:1}})]})}function S({type:e,placeholder:a,onSelect:t}){const[r,n]=(0,N.useState)(""),[s,o]=(0,N.useState)([]),[l,c]=(0,N.useState)(!1),[d,u]=(0,N.useState)(""),m=async()=>{if(r.trim()){c(!0),u(""),o([]);try{const a=(()=>{switch(e){case"movie":case"tv":default:return"/reactions-indieweb/v1/lookup/video";case"music":return"/reactions-indieweb/v1/lookup/music";case"book":return"/reactions-indieweb/v1/lookup/book";case"podcast":return"/reactions-indieweb/v1/lookup/podcast";case"venue":return"/reactions-indieweb/v1/lookup/venue";case"game":return"/reactions-indieweb/v1/lookup/game"}})(),t=(()=>{const a=new URLSearchParams;return a.append("q",r.trim()),"movie"!==e&&"tv"!==e||a.append("type",e),a.toString()})(),i=await wp.apiFetch({path:`${a}?${t}`}),n=Array.isArray(i)?i:i.results||[];n.length>0?o(n):u((0,j.__)("No results found.","reactions-for-indieweb"))}catch(e){let a=(0,j.__)("Search failed.","reactions-for-indieweb");e.message?a=e.message.includes("<")||e.message.includes("critical error")?(0,j.__)("Search service unavailable. Please try again.","reactions-for-indieweb"):e.message:e.code&&(a=`${(0,j.__)("Error","reactions-for-indieweb")}: ${e.code}`),u(a)}finally{c(!1)}}};return(0,i.jsxs)("div",{className:"reactions-media-search",children:[(0,i.jsxs)("div",{className:"search-input-group",children:[(0,i.jsx)(y.TextControl,{value:r,onChange:n,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),m())},placeholder:a,disabled:l}),(0,i.jsx)(y.Button,{variant:"secondary",onClick:m,disabled:l||!r.trim(),children:l?(0,i.jsx)(y.Spinner,{}):(0,j.__)("Search","reactions-for-indieweb")})]}),d&&(0,i.jsx)("p",{className:"search-error",children:d}),s.length>0&&(0,i.jsx)("ul",{className:"search-results",children:s.map((e,a)=>(0,i.jsx)("li",{children:(0,i.jsxs)("button",{type:"button",className:"search-result-item",onClick:()=>(e=>{t&&t(e),o([]),n("")})(e),children:[(e.image||e.cover)&&(0,i.jsx)("img",{src:e.image||e.cover,alt:"",className:"result-image"}),(0,i.jsxs)("div",{className:"result-info",children:[(0,i.jsx)("strong",{className:"result-title",children:e.track||e.title||e.name}),e.artist&&(0,i.jsx)("span",{className:"result-artist",children:e.artist}),e.author&&(0,i.jsx)("span",{className:"result-author",children:e.author}),e.year&&(0,i.jsxs)("span",{className:"result-year",children:["(",e.year,")"]})]})]})},a))})]})}function T({value:e=0,label:a="",showPercent:t=!0}){const r=Math.max(0,Math.min(100,e));return(0,i.jsxs)("div",{className:"reactions-progress-bar",role:"progressbar","aria-valuenow":r,"aria-valuemin":"0","aria-valuemax":"100",children:[a&&(0,i.jsx)("span",{className:"progress-label",children:a}),(0,i.jsx)("div",{className:"progress-track",children:(0,i.jsx)("div",{className:"progress-fill",style:{width:`${r}%`}})}),t&&(0,i.jsxs)("span",{className:"progress-percent",children:[r,"%"]})]})}function P({icon:e,label:a,instructions:t,children:r}){return(0,i.jsx)(y.Placeholder,{icon:e,label:a,instructions:t,className:"reactions-block-placeholder",children:r})}function D({name:e,address:a,city:t,country:r,latitude:n,longitude:s}){const o=n&&s,l=o?`https://www.openstreetmap.org/?mlat=${n}&mlon=${s}#map=16/${n}/${s}`:null;return(0,i.jsxs)("div",{className:"reactions-location h-adr",children:[e&&(0,i.jsx)("strong",{className:"p-name",children:e}),a&&(0,i.jsx)("span",{className:"p-street-address",children:a}),t&&(0,i.jsx)("span",{className:"p-locality",children:t}),r&&(0,i.jsx)("span",{className:"p-country-name",children:r}),o&&(0,i.jsxs)("span",{className:"coordinates",children:[(0,i.jsx)("data",{className:"p-latitude",value:n}),(0,i.jsx)("data",{className:"p-longitude",value:s}),l&&(0,i.jsx)("a",{href:l,target:"_blank",rel:"noopener noreferrer",className:"map-link",children:(0,j.__)("View on map","reactions-for-indieweb")})]})]})}const A=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"reactions-indieweb/listen-card","version":"1.0.0","title":"Listen Card","category":"reactions-indieweb","description":"Display a listen/scrobble with track, artist, and album information.","keywords":["listen","music","scrobble","track","song","album","artist"],"textdomain":"reactions-indieweb","attributes":{"trackTitle":{"type":"string","source":"html","selector":".track-title"},"artistName":{"type":"string","source":"html","selector":".artist-name"},"albumTitle":{"type":"string","source":"html","selector":".album-title"},"releaseDate":{"type":"string"},"coverImage":{"type":"string","source":"attribute","selector":".cover-image img","attribute":"src"},"coverImageAlt":{"type":"string","source":"attribute","selector":".cover-image img","attribute":"alt"},"listenUrl":{"type":"string"},"musicbrainzId":{"type":"string"},"rating":{"type":"number","default":0},"listenedAt":{"type":"string"},"layout":{"type":"string","default":"horizontal"}},"supports":{"html":false,"align":["wide","full"],"color":{"background":true,"text":true,"gradients":true,"link":true},"spacing":{"margin":true,"padding":true,"blockGap":true},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontFamily":true,"__experimentalFontWeight":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true},"__experimentalBorder":{"color":true,"radius":true,"width":true,"style":true,"__experimentalDefaultControls":{"color":true,"radius":true,"width":true,"style":true}},"shadow":true,"dimensions":{"minHeight":true}},"example":{"attributes":{"trackTitle":"Bohemian Rhapsody","artistName":"Queen","albumTitle":"A Night at the Opera","releaseDate":"1975-10-31","rating":5}},"editorStyle":"file:./editor.css"}');(0,a.registerBlockType)(A.name,{...A,icon:r,edit:function({attributes:e,setAttributes:a}){const{trackTitle:t,artistName:n,albumTitle:s,releaseDate:o,coverImage:l,coverImageAlt:c,listenUrl:d,musicbrainzId:u,rating:m,listenedAt:h,layout:_}=e,[p,b]=(0,N.useState)(!1),[g,x]=(0,N.useState)(!1),v=(0,f.useBlockProps)({className:`listen-card layout-${_}`}),w=e=>{const t=e.track||e.title||e.name||"";a({trackTitle:t,artistName:e.artist||"",albumTitle:e.album||"",releaseDate:e.releaseDate||e.date||"",coverImage:e.cover||e.image||"",coverImageAlt:`${t} by ${e.artist||""}`,musicbrainzId:e.mbid||e.id||""}),x(!1)};return t||n?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(f.InspectorControls,{children:[(0,i.jsxs)(y.PanelBody,{title:(0,j.__)("Search Music","reactions-for-indieweb"),initialOpen:!1,children:[(0,i.jsx)(S,{type:"music",placeholder:(0,j.__)("Search for a song or album...","reactions-for-indieweb"),onSelect:w}),(0,i.jsx)("p",{className:"components-base-control__help",style:{marginTop:"8px"},children:(0,j.__)("Search MusicBrainz to auto-fill track details.","reactions-for-indieweb")})]}),(0,i.jsxs)(y.PanelBody,{title:(0,j.__)("Track Details","reactions-for-indieweb"),children:[(0,i.jsx)(y.TextControl,{label:(0,j.__)("Track Title","reactions-for-indieweb"),value:t||"",onChange:e=>a({trackTitle:e})}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("Artist","reactions-for-indieweb"),value:n||"",onChange:e=>a({artistName:e})}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("Album","reactions-for-indieweb"),value:s||"",onChange:e=>a({albumTitle:e})}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("Release Date","reactions-for-indieweb"),value:o||"",onChange:e=>a({releaseDate:e}),type:"date"})]}),(0,i.jsxs)(y.PanelBody,{title:(0,j.__)("Listen Info","reactions-for-indieweb"),children:[(0,i.jsxs)("div",{className:"components-base-control",children:[(0,i.jsx)("label",{className:"components-base-control__label",children:(0,j.__)("Rating","reactions-for-indieweb")}),(0,i.jsx)(k,{value:m,onChange:e=>a({rating:e}),max:5})]}),(0,i.jsxs)("div",{className:"components-base-control",children:[(0,i.jsx)("label",{className:"components-base-control__label",children:(0,j.__)("Listened At","reactions-for-indieweb")}),(0,i.jsx)(y.Button,{variant:"secondary",onClick:()=>b(!0),children:h?new Date(h).toLocaleString():(0,j.__)("Set date/time","reactions-for-indieweb")}),p&&(0,i.jsx)(y.Popover,{onClose:()=>b(!1),children:(0,i.jsx)(y.DateTimePicker,{currentDate:h,onChange:e=>{a({listenedAt:e}),b(!1)},is12Hour:!0})})]}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("Listen URL","reactions-for-indieweb"),value:d||"",onChange:e=>a({listenUrl:e}),type:"url",help:(0,j.__)("Link to the track on a streaming service.","reactions-for-indieweb")})]}),(0,i.jsx)(y.PanelBody,{title:(0,j.__)("Layout","reactions-for-indieweb"),children:(0,i.jsx)(y.SelectControl,{label:(0,j.__)("Layout Style","reactions-for-indieweb"),value:_,options:[{label:(0,j.__)("Horizontal","reactions-for-indieweb"),value:"horizontal"},{label:(0,j.__)("Vertical","reactions-for-indieweb"),value:"vertical"},{label:(0,j.__)("Compact","reactions-for-indieweb"),value:"compact"}],onChange:e=>a({layout:e})})}),(0,i.jsx)(y.PanelBody,{title:(0,j.__)("Metadata","reactions-for-indieweb"),initialOpen:!1,children:(0,i.jsx)(y.TextControl,{label:(0,j.__)("MusicBrainz ID","reactions-for-indieweb"),value:u||"",onChange:e=>a({musicbrainzId:e}),help:(0,j.__)("Used for linking to music databases.","reactions-for-indieweb")})})]}),(0,i.jsx)("div",{...v,children:(0,i.jsxs)("div",{className:"reactions-card h-cite",children:[(0,i.jsx)("div",{className:"cover-image",children:(0,i.jsx)(f.MediaUploadCheck,{children:(0,i.jsx)(f.MediaUpload,{onSelect:e=>{a({coverImage:e.url,coverImageAlt:e.alt||`${t} by ${n}`})},allowedTypes:["image"],render:({open:e})=>(0,i.jsx)("div",{onClick:e,role:"button",tabIndex:0,children:(0,i.jsx)(C,{src:l,alt:c,size:"medium"})})})})}),(0,i.jsxs)("div",{className:"listen-info",children:[(0,i.jsx)(f.RichText,{tagName:"h3",className:"track-title p-name",value:t,onChange:e=>a({trackTitle:e}),placeholder:(0,j.__)("Track title","reactions-for-indieweb")}),(0,i.jsx)(f.RichText,{tagName:"p",className:"artist-name p-author h-card",value:n,onChange:e=>a({artistName:e}),placeholder:(0,j.__)("Artist name","reactions-for-indieweb")}),(s||"compact"!==_)&&(0,i.jsx)(f.RichText,{tagName:"p",className:"album-title",value:s,onChange:e=>a({albumTitle:e}),placeholder:(0,j.__)("Album title","reactions-for-indieweb")}),m>0&&(0,i.jsx)("div",{className:"rating-display",children:(0,i.jsx)(k,{value:m,readonly:!0,max:5})})]})]})})]}):(0,i.jsx)("div",{...v,children:(0,i.jsx)(P,{icon:r,label:(0,j.__)("Listen Card","reactions-for-indieweb"),instructions:(0,j.__)("Add a track you listened to. Search for music or enter details manually.","reactions-for-indieweb"),children:g?(0,i.jsxs)("div",{className:"search-mode",children:[(0,i.jsx)(S,{type:"music",placeholder:(0,j.__)("Search for a song or album...","reactions-for-indieweb"),onSelect:w}),(0,i.jsx)(y.Button,{variant:"link",onClick:()=>x(!1),children:(0,j.__)("Enter manually","reactions-for-indieweb")})]}):(0,i.jsxs)("div",{className:"placeholder-actions",children:[(0,i.jsx)(y.Button,{variant:"primary",onClick:()=>x(!0),children:(0,j.__)("Search Music","reactions-for-indieweb")}),(0,i.jsx)(y.Button,{variant:"secondary",onClick:()=>a({trackTitle:""}),children:(0,j.__)("Enter Manually","reactions-for-indieweb")})]})})})},save:function({attributes:e}){const{trackTitle:a,artistName:t,albumTitle:r,releaseDate:n,coverImage:s,coverImageAlt:o,listenUrl:l,musicbrainzId:c,rating:d,listenedAt:u,layout:m}=e,h=f.useBlockProps.save({className:`listen-card layout-${m}`});return(0,i.jsx)("div",{...h,children:(0,i.jsxs)("div",{className:"reactions-card h-cite",children:[s&&(0,i.jsx)("div",{className:"reactions-card__media",children:(0,i.jsx)("img",{src:s,alt:o||`${a} by ${t}`,className:"reactions-card__image u-photo",loading:"lazy"})}),(0,i.jsxs)("div",{className:"reactions-card__content",children:[a&&(0,i.jsx)("h3",{className:"reactions-card__title p-name",children:l?(0,i.jsx)("a",{href:l,className:"u-url",target:"_blank",rel:"noopener noreferrer",children:a}):a}),t&&(0,i.jsx)("p",{className:"reactions-card__subtitle",children:(0,i.jsx)("span",{className:"p-author h-card",children:(0,i.jsx)("span",{className:"p-name",children:t})})}),r&&(0,i.jsxs)("p",{className:"reactions-card__meta",children:[r,n&&(0,i.jsxs)("span",{className:"reactions-card__meta-detail",children:[" ","(",new Date(n).getFullYear(),")"]})]}),!d||d<=0?null:(0,i.jsxs)("div",{className:"reactions-card__rating p-rating","aria-label":`Rating: ${d} out of 5 stars`,children:[Array.from({length:5},(e,a)=>(0,i.jsx)("span",{className:"star "+(a<d?"filled":""),"aria-hidden":"true",children:"★"},a)),(0,i.jsxs)("span",{className:"reactions-card__rating-value",children:[d,"/5"]})]}),u&&(0,i.jsx)("time",{className:"reactions-card__timestamp dt-published",dateTime:new Date(u).toISOString(),children:new Date(u).toLocaleString()})]}),(0,i.jsx)("data",{className:"u-listen-of",value:l||"",hidden:!0}),c&&(0,i.jsx)("data",{className:"u-uid",value:`https://musicbrainz.org/recording/${c}`,hidden:!0})]})})}});const B=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"reactions-indieweb/watch-card","version":"1.0.0","title":"Watch Card","category":"reactions-indieweb","description":"Display a movie or TV show you watched with poster, rating, and details.","keywords":["watch","movie","tv","film","show","episode","video"],"textdomain":"reactions-indieweb","attributes":{"mediaTitle":{"type":"string","source":"html","selector":".media-title"},"mediaType":{"type":"string","default":"movie"},"showTitle":{"type":"string"},"seasonNumber":{"type":"number"},"episodeNumber":{"type":"number"},"episodeTitle":{"type":"string"},"releaseYear":{"type":"number"},"director":{"type":"string"},"posterImage":{"type":"string","source":"attribute","selector":".poster-image img","attribute":"src"},"posterImageAlt":{"type":"string","source":"attribute","selector":".poster-image img","attribute":"alt"},"watchUrl":{"type":"string"},"tmdbId":{"type":"string"},"imdbId":{"type":"string"},"rating":{"type":"number","default":0},"isRewatch":{"type":"boolean","default":false},"watchedAt":{"type":"string"},"review":{"type":"string","source":"html","selector":".watch-review"},"layout":{"type":"string","default":"horizontal"}},"supports":{"html":false,"align":["wide","full"],"color":{"background":true,"text":true,"gradients":true,"link":true},"spacing":{"margin":true,"padding":true,"blockGap":true},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontFamily":true,"__experimentalFontWeight":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true},"__experimentalBorder":{"color":true,"radius":true,"width":true,"style":true,"__experimentalDefaultControls":{"color":true,"radius":true,"width":true,"style":true}},"shadow":true,"dimensions":{"minHeight":true}},"example":{"attributes":{"mediaTitle":"The Shawshank Redemption","mediaType":"movie","releaseYear":1994,"director":"Frank Darabont","rating":5}},"editorStyle":"file:./editor.css"}');(0,a.registerBlockType)(B.name,{...B,icon:n,edit:function({attributes:e,setAttributes:a}){const{mediaTitle:t,mediaType:r,showTitle:s,seasonNumber:o,episodeNumber:l,episodeTitle:c,releaseYear:d,director:u,posterImage:m,posterImageAlt:h,watchUrl:_,tmdbId:p,imdbId:b,rating:g,isRewatch:x,watchedAt:v,review:w,layout:T}=e,[D,A]=(0,N.useState)(!1),[B,I]=(0,N.useState)(!1),[$,R]=(0,N.useState)("movie"),L=(0,f.useBlockProps)({className:`watch-card layout-${T} type-${r}`}),M=e=>{a({mediaTitle:e.title||e.name||"",releaseYear:e.year||e.release_year||null,director:e.director||"",posterImage:e.poster||e.image||"",posterImageAlt:e.title||e.name||"",tmdbId:e.tmdb_id||e.id||"",imdbId:e.imdb_id||"",mediaType:$}),I(!1)};return t?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(f.InspectorControls,{children:[(0,i.jsxs)(y.PanelBody,{title:(0,j.__)("Search","reactions-for-indieweb"),initialOpen:!1,children:[(0,i.jsxs)("div",{className:"search-type-toggle",style:{marginBottom:"12px",display:"flex",gap:"8px"},children:[(0,i.jsx)(y.Button,{variant:"movie"===$?"primary":"secondary",onClick:()=>R("movie"),size:"small",children:(0,j.__)("Movie","reactions-for-indieweb")}),(0,i.jsx)(y.Button,{variant:"tv"===$?"primary":"secondary",onClick:()=>R("tv"),size:"small",children:(0,j.__)("TV Show","reactions-for-indieweb")})]}),(0,i.jsx)(S,{type:$,placeholder:"movie"===$?(0,j.__)("Search for a movie...","reactions-for-indieweb"):(0,j.__)("Search for a TV show...","reactions-for-indieweb"),onSelect:M}),(0,i.jsx)("p",{className:"components-base-control__help",style:{marginTop:"8px"},children:(0,j.__)("Search to auto-fill details from TMDB.","reactions-for-indieweb")})]}),(0,i.jsxs)(y.PanelBody,{title:(0,j.__)("Media Details","reactions-for-indieweb"),children:[(0,i.jsx)(y.SelectControl,{label:(0,j.__)("Type","reactions-for-indieweb"),value:r,options:[{label:(0,j.__)("Movie","reactions-for-indieweb"),value:"movie"},{label:(0,j.__)("TV Show","reactions-for-indieweb"),value:"tv"},{label:(0,j.__)("TV Episode","reactions-for-indieweb"),value:"episode"}],onChange:e=>a({mediaType:e})}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("Title","reactions-for-indieweb"),value:t||"",onChange:e=>a({mediaTitle:e})}),"episode"===r&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y.TextControl,{label:(0,j.__)("Show Title","reactions-for-indieweb"),value:s||"",onChange:e=>a({showTitle:e})}),(0,i.jsxs)("div",{className:"episode-numbers",children:[(0,i.jsx)(y.__experimentalNumberControl,{label:(0,j.__)("Season","reactions-for-indieweb"),value:o,onChange:e=>a({seasonNumber:parseInt(e)||null}),min:1}),(0,i.jsx)(y.__experimentalNumberControl,{label:(0,j.__)("Episode","reactions-for-indieweb"),value:l,onChange:e=>a({episodeNumber:parseInt(e)||null}),min:1})]})]}),(0,i.jsx)(y.__experimentalNumberControl,{label:(0,j.__)("Year","reactions-for-indieweb"),value:d,onChange:e=>a({releaseYear:parseInt(e)||null}),min:1900,max:2100}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("Director","reactions-for-indieweb"),value:u||"",onChange:e=>a({director:e})})]}),(0,i.jsxs)(y.PanelBody,{title:(0,j.__)("Watch Info","reactions-for-indieweb"),children:[(0,i.jsxs)("div",{className:"components-base-control",children:[(0,i.jsx)("label",{className:"components-base-control__label",children:(0,j.__)("Rating","reactions-for-indieweb")}),(0,i.jsx)(k,{value:g,onChange:e=>a({rating:e}),max:5})]}),(0,i.jsx)(y.ToggleControl,{label:(0,j.__)("Rewatch","reactions-for-indieweb"),checked:x,onChange:e=>a({isRewatch:e}),help:(0,j.__)("Check if this is a rewatch.","reactions-for-indieweb")}),(0,i.jsxs)("div",{className:"components-base-control",children:[(0,i.jsx)("label",{className:"components-base-control__label",children:(0,j.__)("Watched At","reactions-for-indieweb")}),(0,i.jsx)(y.Button,{variant:"secondary",onClick:()=>A(!0),children:v?new Date(v).toLocaleString():(0,j.__)("Set date/time","reactions-for-indieweb")}),D&&(0,i.jsx)(y.Popover,{onClose:()=>A(!1),children:(0,i.jsx)(y.DateTimePicker,{currentDate:v,onChange:e=>{a({watchedAt:e}),A(!1)},is12Hour:!0})})]}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("Watch URL","reactions-for-indieweb"),value:_||"",onChange:e=>a({watchUrl:e}),type:"url",help:(0,j.__)("Link to the content on a streaming service.","reactions-for-indieweb")})]}),(0,i.jsx)(y.PanelBody,{title:(0,j.__)("Layout","reactions-for-indieweb"),children:(0,i.jsx)(y.SelectControl,{label:(0,j.__)("Layout Style","reactions-for-indieweb"),value:T,options:[{label:(0,j.__)("Horizontal","reactions-for-indieweb"),value:"horizontal"},{label:(0,j.__)("Vertical","reactions-for-indieweb"),value:"vertical"},{label:(0,j.__)("Poster Focus","reactions-for-indieweb"),value:"poster"},{label:(0,j.__)("Compact","reactions-for-indieweb"),value:"compact"}],onChange:e=>a({layout:e})})}),(0,i.jsxs)(y.PanelBody,{title:(0,j.__)("Metadata","reactions-for-indieweb"),initialOpen:!1,children:[(0,i.jsx)(y.TextControl,{label:(0,j.__)("TMDB ID","reactions-for-indieweb"),value:p||"",onChange:e=>a({tmdbId:e})}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("IMDb ID","reactions-for-indieweb"),value:b||"",onChange:e=>a({imdbId:e})})]})]}),(0,i.jsx)("div",{...L,children:(0,i.jsxs)("div",{className:"reactions-card h-cite",children:[(0,i.jsx)("div",{className:"poster-image",children:(0,i.jsx)(f.MediaUploadCheck,{children:(0,i.jsx)(f.MediaUpload,{onSelect:e=>{a({posterImage:e.url,posterImageAlt:e.alt||t})},allowedTypes:["image"],render:({open:e})=>(0,i.jsx)("div",{onClick:e,role:"button",tabIndex:0,children:(0,i.jsx)(C,{src:m,alt:h,size:"large"})})})})}),(0,i.jsxs)("div",{className:"watch-info",children:["episode"===r&&s&&(0,i.jsx)("p",{className:"show-title",children:s}),(0,i.jsx)(f.RichText,{tagName:"h3",className:"media-title p-name",value:t,onChange:e=>a({mediaTitle:e}),placeholder:(0,j.__)("Title","reactions-for-indieweb")}),"episode"===r&&(o||l)&&(0,i.jsxs)("p",{className:"episode-info",children:[o&&`S${String(o).padStart(2,"0")}`,l&&`E${String(l).padStart(2,"0")}`,c&&` - ${c}`]}),(0,i.jsxs)("div",{className:"meta-line",children:[d&&(0,i.jsxs)("span",{className:"year",children:["(",d,")"]}),u&&(0,i.jsxs)("span",{className:"director",children:[(0,j.__)("Dir.","reactions-for-indieweb")," ",u]}),x&&(0,i.jsx)("span",{className:"rewatch-badge",children:(0,j.__)("Rewatch","reactions-for-indieweb")})]}),g>0&&(0,i.jsx)("div",{className:"rating-display",children:(0,i.jsx)(k,{value:g,readonly:!0,max:5})}),(0,i.jsx)(f.RichText,{tagName:"p",className:"watch-review",value:w,onChange:e=>a({review:e}),placeholder:(0,j.__)("Write a review...","reactions-for-indieweb")})]})]})})]}):(0,i.jsx)("div",{...L,children:(0,i.jsx)(P,{icon:n,label:(0,j.__)("Watch Card","reactions-for-indieweb"),instructions:(0,j.__)("Add a movie or TV show you watched. Search or enter details manually.","reactions-for-indieweb"),children:B?(0,i.jsxs)("div",{className:"search-mode",children:[(0,i.jsxs)("div",{className:"search-type-toggle",children:[(0,i.jsx)(y.Button,{variant:"movie"===$?"primary":"secondary",onClick:()=>R("movie"),children:(0,j.__)("Movie","reactions-for-indieweb")}),(0,i.jsx)(y.Button,{variant:"tv"===$?"primary":"secondary",onClick:()=>R("tv"),children:(0,j.__)("TV Show","reactions-for-indieweb")})]}),(0,i.jsx)(S,{type:$,placeholder:"movie"===$?(0,j.__)("Search for a movie...","reactions-for-indieweb"):(0,j.__)("Search for a TV show...","reactions-for-indieweb"),onSelect:M}),(0,i.jsx)(y.Button,{variant:"link",onClick:()=>I(!1),children:(0,j.__)("Enter manually","reactions-for-indieweb")})]}):(0,i.jsxs)("div",{className:"placeholder-actions",children:[(0,i.jsx)(y.Button,{variant:"primary",onClick:()=>I(!0),children:(0,j.__)("Search Movies & TV","reactions-for-indieweb")}),(0,i.jsx)(y.Button,{variant:"secondary",onClick:()=>a({mediaTitle:""}),children:(0,j.__)("Enter Manually","reactions-for-indieweb")})]})})})},save:function({attributes:e}){const{mediaTitle:a,mediaType:t,showTitle:r,seasonNumber:n,episodeNumber:s,episodeTitle:o,releaseYear:l,director:c,posterImage:d,posterImageAlt:u,watchUrl:m,tmdbId:h,imdbId:_,rating:p,isRewatch:b,watchedAt:g,review:x,layout:v}=e,w=f.useBlockProps.save({className:`watch-card layout-${v} type-${t}`}),j=()=>{if("episode"!==t)return null;let e="";return n&&(e+=`S${String(n).padStart(2,"0")}`),s&&(e+=`E${String(s).padStart(2,"0")}`),o&&(e+=` - ${o}`),e||null},y=()=>h?`https://www.themoviedb.org/${"movie"===t?"movie":"tv"}/${h}`:null,N=()=>_?`https://www.imdb.com/title/${_}`:null;return(0,i.jsx)("div",{...w,children:(0,i.jsxs)("div",{className:"reactions-card h-cite",children:[d&&(0,i.jsx)("div",{className:"reactions-card__media reactions-card__media--portrait",children:(0,i.jsx)("img",{src:d,alt:u||a,className:"reactions-card__image u-photo",loading:"lazy"})}),(0,i.jsxs)("div",{className:"reactions-card__content",children:[(0,i.jsxs)("div",{className:"reactions-card__badges",children:[(0,i.jsx)("span",{className:`reactions-card__badge reactions-card__badge--${t}`,children:"movie"===t?"Movie":"tv"===t?"TV":"Episode"}),b&&(0,i.jsx)("span",{className:"reactions-card__badge reactions-card__badge--rewatch",children:"Rewatch"})]}),"episode"===t&&r&&(0,i.jsx)("p",{className:"reactions-card__meta",children:r}),a&&(0,i.jsx)("h3",{className:"reactions-card__title p-name",children:m?(0,i.jsx)("a",{href:m,className:"u-url",target:"_blank",rel:"noopener noreferrer",children:a}):a}),j()&&(0,i.jsx)("p",{className:"reactions-card__subtitle",children:j()}),(l||c)&&(0,i.jsxs)("p",{className:"reactions-card__meta",children:[l&&(0,i.jsxs)("span",{children:["(",l,")"]}),l&&c&&" • ",c&&(0,i.jsx)("span",{className:"p-author h-card",children:(0,i.jsx)("span",{className:"p-name",children:c})})]}),!p||p<=0?null:(0,i.jsxs)("div",{className:"reactions-card__rating p-rating","aria-label":`Rating: ${p} out of 5 stars`,children:[Array.from({length:5},(e,a)=>(0,i.jsx)("span",{className:"star "+(a<p?"filled":""),"aria-hidden":"true",children:"★"},a)),(0,i.jsxs)("span",{className:"reactions-card__rating-value",children:[p,"/5"]})]}),x&&(0,i.jsx)("div",{className:"reactions-card__notes p-content",children:(0,i.jsx)(f.RichText.Content,{tagName:"p",value:x})}),g&&(0,i.jsx)("time",{className:"reactions-card__timestamp dt-published",dateTime:new Date(g).toISOString(),children:new Date(g).toLocaleString()}),(N()||y())&&(0,i.jsxs)("div",{className:"reactions-card__links",children:[N()&&(0,i.jsx)("a",{href:N(),target:"_blank",rel:"noopener noreferrer",children:"IMDb"}),y()&&(0,i.jsx)("a",{href:y(),target:"_blank",rel:"noopener noreferrer",children:"TMDB"})]})]}),(0,i.jsx)("data",{className:"u-watch-of",value:m||"",hidden:!0}),h&&(0,i.jsx)("data",{className:"u-uid",value:y(),hidden:!0})]})})}});const I=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"reactions-indieweb/read-card","version":"1.0.0","title":"Read Card","category":"reactions-indieweb","description":"Display a book you\'re reading or have read with cover, author, and progress.","keywords":["read","book","reading","author","isbn","library"],"textdomain":"reactions-indieweb","attributes":{"bookTitle":{"type":"string","source":"html","selector":".book-title"},"authorName":{"type":"string","source":"html","selector":".author-name"},"isbn":{"type":"string"},"publisher":{"type":"string"},"publishDate":{"type":"string"},"pageCount":{"type":"number"},"currentPage":{"type":"number"},"coverImage":{"type":"string","source":"attribute","selector":".cover-image img","attribute":"src"},"coverImageAlt":{"type":"string","source":"attribute","selector":".cover-image img","attribute":"alt"},"bookUrl":{"type":"string"},"openlibraryId":{"type":"string"},"readStatus":{"type":"string","default":"reading"},"rating":{"type":"number","default":0},"startedAt":{"type":"string"},"finishedAt":{"type":"string"},"review":{"type":"string","source":"html","selector":".book-review"},"layout":{"type":"string","default":"horizontal"}},"supports":{"html":false,"align":["wide","full"],"color":{"background":true,"text":true,"gradients":true,"link":true},"spacing":{"margin":true,"padding":true,"blockGap":true},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontFamily":true,"__experimentalFontWeight":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true},"__experimentalBorder":{"color":true,"radius":true,"width":true,"style":true,"__experimentalDefaultControls":{"color":true,"radius":true,"width":true,"style":true}},"shadow":true,"dimensions":{"minHeight":true}},"example":{"attributes":{"bookTitle":"The Hitchhiker\'s Guide to the Galaxy","authorName":"Douglas Adams","readStatus":"finished","rating":5}},"editorStyle":"file:./editor.css"}');(0,a.registerBlockType)(I.name,{...I,icon:s,edit:function({attributes:e,setAttributes:a}){const{bookTitle:t,authorName:r,isbn:n,publisher:o,publishDate:l,pageCount:c,currentPage:d,coverImage:u,coverImageAlt:m,bookUrl:h,openlibraryId:_,readStatus:p,rating:b,startedAt:g,finishedAt:x,review:v,layout:w}=e,[D,A]=(0,N.useState)(!1),[B,I]=(0,N.useState)(!1),[$,R]=(0,N.useState)(!1),L=(0,f.useBlockProps)({className:`read-card layout-${w} status-${p}`}),M=c&&d?Math.min(100,Math.round(d/c*100)):0,z=e=>{a({bookTitle:e.title||"",authorName:e.author||e.authors?.join(", ")||"",isbn:e.isbn||e.isbn_13?.[0]||e.isbn_10?.[0]||"",publisher:e.publisher||e.publishers?.[0]||"",publishDate:e.publish_date||e.first_publish_year?.toString()||"",pageCount:e.number_of_pages||e.pages||null,coverImage:e.cover||e.image||"",coverImageAlt:e.title||"",openlibraryId:e.key||e.olid||""}),R(!1)};return t||r?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(f.InspectorControls,{children:[(0,i.jsxs)(y.PanelBody,{title:(0,j.__)("Search Books","reactions-for-indieweb"),initialOpen:!1,children:[(0,i.jsx)(S,{type:"book",placeholder:(0,j.__)("Search by title, author, or ISBN...","reactions-for-indieweb"),onSelect:z}),(0,i.jsx)("p",{className:"components-base-control__help",style:{marginTop:"8px"},children:(0,j.__)("Search Open Library to auto-fill book details.","reactions-for-indieweb")})]}),(0,i.jsxs)(y.PanelBody,{title:(0,j.__)("Book Details","reactions-for-indieweb"),children:[(0,i.jsx)(y.TextControl,{label:(0,j.__)("Title","reactions-for-indieweb"),value:t||"",onChange:e=>a({bookTitle:e})}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("Author","reactions-for-indieweb"),value:r||"",onChange:e=>a({authorName:e})}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("ISBN","reactions-for-indieweb"),value:n||"",onChange:e=>a({isbn:e})}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("Publisher","reactions-for-indieweb"),value:o||"",onChange:e=>a({publisher:e})}),(0,i.jsx)(y.__experimentalNumberControl,{label:(0,j.__)("Total Pages","reactions-for-indieweb"),value:c,onChange:e=>a({pageCount:parseInt(e)||null}),min:1})]}),(0,i.jsxs)(y.PanelBody,{title:(0,j.__)("Reading Status","reactions-for-indieweb"),children:[(0,i.jsx)(y.SelectControl,{label:(0,j.__)("Status","reactions-for-indieweb"),value:p,options:[{label:(0,j.__)("To Read","reactions-for-indieweb"),value:"to-read"},{label:(0,j.__)("Currently Reading","reactions-for-indieweb"),value:"reading"},{label:(0,j.__)("Finished","reactions-for-indieweb"),value:"finished"},{label:(0,j.__)("Abandoned","reactions-for-indieweb"),value:"abandoned"}],onChange:e=>a({readStatus:e})}),"reading"===p&&c&&(0,i.jsx)(y.RangeControl,{label:(0,j.__)("Current Page","reactions-for-indieweb"),value:d||0,onChange:e=>a({currentPage:e}),min:0,max:c,help:`${M}% complete`}),(0,i.jsxs)("div",{className:"components-base-control",children:[(0,i.jsx)("label",{className:"components-base-control__label",children:(0,j.__)("Rating","reactions-for-indieweb")}),(0,i.jsx)(k,{value:b,onChange:e=>a({rating:e}),max:5})]}),(0,i.jsxs)("div",{className:"components-base-control",children:[(0,i.jsx)("label",{className:"components-base-control__label",children:(0,j.__)("Started","reactions-for-indieweb")}),(0,i.jsx)(y.Button,{variant:"secondary",onClick:()=>A(!0),children:g?new Date(g).toLocaleDateString():(0,j.__)("Set date","reactions-for-indieweb")}),D&&(0,i.jsx)(y.Popover,{onClose:()=>A(!1),children:(0,i.jsx)(y.DateTimePicker,{currentDate:g,onChange:e=>{a({startedAt:e}),A(!1)}})})]}),("finished"===p||"abandoned"===p)&&(0,i.jsxs)("div",{className:"components-base-control",children:[(0,i.jsx)("label",{className:"components-base-control__label",children:(0,j.__)("Finished","reactions-for-indieweb")}),(0,i.jsx)(y.Button,{variant:"secondary",onClick:()=>I(!0),children:x?new Date(x).toLocaleDateString():(0,j.__)("Set date","reactions-for-indieweb")}),B&&(0,i.jsx)(y.Popover,{onClose:()=>I(!1),children:(0,i.jsx)(y.DateTimePicker,{currentDate:x,onChange:e=>{a({finishedAt:e}),I(!1)}})})]})]}),(0,i.jsx)(y.PanelBody,{title:(0,j.__)("Layout","reactions-for-indieweb"),children:(0,i.jsx)(y.SelectControl,{label:(0,j.__)("Layout Style","reactions-for-indieweb"),value:w,options:[{label:(0,j.__)("Horizontal","reactions-for-indieweb"),value:"horizontal"},{label:(0,j.__)("Vertical","reactions-for-indieweb"),value:"vertical"},{label:(0,j.__)("Cover Focus","reactions-for-indieweb"),value:"cover"},{label:(0,j.__)("Compact","reactions-for-indieweb"),value:"compact"}],onChange:e=>a({layout:e})})}),(0,i.jsxs)(y.PanelBody,{title:(0,j.__)("Links","reactions-for-indieweb"),initialOpen:!1,children:[(0,i.jsx)(y.TextControl,{label:(0,j.__)("Book URL","reactions-for-indieweb"),value:h||"",onChange:e=>a({bookUrl:e}),type:"url"}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("Open Library ID","reactions-for-indieweb"),value:_||"",onChange:e=>a({openlibraryId:e})})]})]}),(0,i.jsx)("div",{...L,children:(0,i.jsxs)("div",{className:"reactions-card h-cite",children:[(0,i.jsx)("div",{className:"cover-image",children:(0,i.jsx)(f.MediaUploadCheck,{children:(0,i.jsx)(f.MediaUpload,{onSelect:e=>{a({coverImage:e.url,coverImageAlt:e.alt||t})},allowedTypes:["image"],render:({open:e})=>(0,i.jsx)("div",{onClick:e,role:"button",tabIndex:0,children:(0,i.jsx)(C,{src:u,alt:m,size:"large"})})})})}),(0,i.jsxs)("div",{className:"read-info",children:[(0,i.jsxs)("span",{className:`status-badge status-${p}`,children:["to-read"===p&&(0,j.__)("To Read","reactions-for-indieweb"),"reading"===p&&(0,j.__)("Reading","reactions-for-indieweb"),"finished"===p&&(0,j.__)("Finished","reactions-for-indieweb"),"abandoned"===p&&(0,j.__)("Abandoned","reactions-for-indieweb")]}),(0,i.jsx)(f.RichText,{tagName:"h3",className:"book-title p-name",value:t,onChange:e=>a({bookTitle:e}),placeholder:(0,j.__)("Book title","reactions-for-indieweb")}),(0,i.jsx)(f.RichText,{tagName:"p",className:"author-name p-author h-card",value:r,onChange:e=>a({authorName:e}),placeholder:(0,j.__)("Author name","reactions-for-indieweb")}),"reading"===p&&M>0&&(0,i.jsx)(T,{value:M,label:`${d} of ${c} pages`}),b>0&&(0,i.jsx)("div",{className:"rating-display",children:(0,i.jsx)(k,{value:b,readonly:!0,max:5})}),(0,i.jsx)(f.RichText,{tagName:"p",className:"book-review",value:v,onChange:e=>a({review:e}),placeholder:(0,j.__)("Write a review...","reactions-for-indieweb")})]})]})})]}):(0,i.jsx)("div",{...L,children:(0,i.jsx)(P,{icon:s,label:(0,j.__)("Read Card","reactions-for-indieweb"),instructions:(0,j.__)("Add a book you're reading or have read. Search or enter details manually.","reactions-for-indieweb"),children:$?(0,i.jsxs)("div",{className:"search-mode",children:[(0,i.jsx)(S,{type:"book",placeholder:(0,j.__)("Search by title, author, or ISBN...","reactions-for-indieweb"),onSelect:z}),(0,i.jsx)(y.Button,{variant:"link",onClick:()=>R(!1),children:(0,j.__)("Enter manually","reactions-for-indieweb")})]}):(0,i.jsxs)("div",{className:"placeholder-actions",children:[(0,i.jsx)(y.Button,{variant:"primary",onClick:()=>R(!0),children:(0,j.__)("Search Books","reactions-for-indieweb")}),(0,i.jsx)(y.Button,{variant:"secondary",onClick:()=>a({bookTitle:""}),children:(0,j.__)("Enter Manually","reactions-for-indieweb")})]})})})},save:function({attributes:e}){const{bookTitle:a,authorName:t,isbn:r,publisher:n,publishDate:s,pageCount:o,currentPage:l,coverImage:c,coverImageAlt:d,bookUrl:u,openlibraryId:m,readStatus:h,rating:_,startedAt:p,finishedAt:b,review:g,layout:x}=e,v=f.useBlockProps.save({className:`read-card layout-${x} status-${h}`}),w=o&&l?Math.min(100,Math.round(l/o*100)):0;return(0,i.jsx)("div",{...v,children:(0,i.jsxs)("div",{className:"reactions-card h-cite",children:[c&&(0,i.jsx)("div",{className:"reactions-card__media reactions-card__media--portrait",children:(0,i.jsx)("img",{src:c,alt:d||`Cover of ${a}`,className:"reactions-card__image u-photo",loading:"lazy"})}),(0,i.jsxs)("div",{className:"reactions-card__content",children:[(0,i.jsx)("span",{className:`reactions-card__badge reactions-card__badge--${h}`,children:(()=>{switch(h){case"to-read":return"To Read";case"reading":return"Currently Reading";case"finished":return"Finished";case"abandoned":return"Abandoned";default:return""}})()}),a&&(0,i.jsx)("h3",{className:"reactions-card__title p-name",children:u?(0,i.jsx)("a",{href:u,className:"u-url",target:"_blank",rel:"noopener noreferrer",children:a}):a}),t&&(0,i.jsx)("p",{className:"reactions-card__subtitle",children:(0,i.jsx)("span",{className:"p-author h-card",children:(0,i.jsx)("span",{className:"p-name",children:t})})}),(n||s)&&(0,i.jsxs)("p",{className:"reactions-card__meta",children:[n&&(0,i.jsx)("span",{children:n}),n&&s&&", ",s&&(0,i.jsx)("span",{children:s})]}),"reading"===h&&w>0&&(0,i.jsxs)("div",{className:"reactions-card__progress",children:[(0,i.jsx)("div",{className:"reactions-card__progress-bar",children:(0,i.jsx)("div",{className:"reactions-card__progress-fill",style:{width:`${w}%`},role:"progressbar","aria-valuenow":w,"aria-valuemin":"0","aria-valuemax":"100"})}),(0,i.jsxs)("span",{className:"reactions-card__progress-text",children:[l," of ",o," pages (",w,"%)"]})]}),!_||_<=0?null:(0,i.jsxs)("div",{className:"reactions-card__rating p-rating","aria-label":`Rating: ${_} out of 5 stars`,children:[Array.from({length:5},(e,a)=>(0,i.jsx)("span",{className:"star "+(a<_?"filled":""),"aria-hidden":"true",children:"★"},a)),(0,i.jsxs)("span",{className:"reactions-card__rating-value",children:[_,"/5"]})]}),g&&(0,i.jsx)("div",{className:"reactions-card__notes p-content",children:(0,i.jsx)(f.RichText.Content,{tagName:"p",value:g})}),(p||b)&&(0,i.jsxs)("div",{className:"reactions-card__dates",children:[p&&(0,i.jsxs)("time",{className:"reactions-card__timestamp",dateTime:new Date(p).toISOString(),children:["Started: ",new Date(p).toLocaleDateString()]}),b&&("finished"===h||"abandoned"===h)&&(0,i.jsxs)("time",{className:"reactions-card__timestamp dt-published",dateTime:new Date(b).toISOString(),children:["Finished: ",new Date(b).toLocaleDateString()]})]})]}),(0,i.jsx)("data",{className:"u-read-of",value:u||"",hidden:!0}),r&&(0,i.jsx)("data",{className:"p-isbn",value:r,hidden:!0}),m&&(0,i.jsx)("data",{className:"u-uid",value:`https://openlibrary.org${m}`,hidden:!0})]})})}});const $=window.wp.apiFetch;var R=e.n($);const L=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"reactions-indieweb/checkin-card","version":"1.0.0","title":"Checkin Card","category":"reactions-indieweb","description":"Display a location checkin with venue details, map, and optional notes.","keywords":["checkin","location","venue","place","map","travel"],"textdomain":"reactions-indieweb","attributes":{"venueName":{"type":"string","source":"html","selector":".venue-name"},"venueType":{"type":"string","default":"place"},"address":{"type":"string"},"locality":{"type":"string"},"region":{"type":"string"},"country":{"type":"string"},"postalCode":{"type":"string"},"latitude":{"type":"number"},"longitude":{"type":"number"},"locationPrivacy":{"type":"string","default":"approximate","enum":["public","approximate","private"]},"osmId":{"type":"string"},"venueUrl":{"type":"string"},"foursquareId":{"type":"string"},"checkinAt":{"type":"string"},"note":{"type":"string","source":"html","selector":".checkin-note"},"photo":{"type":"string","source":"attribute","selector":".checkin-photo img","attribute":"src"},"photoAlt":{"type":"string","source":"attribute","selector":".checkin-photo img","attribute":"alt"},"showMap":{"type":"boolean","default":true},"layout":{"type":"string","default":"horizontal"}},"supports":{"html":false,"align":["wide","full"],"color":{"background":true,"text":true,"gradients":true,"link":true},"spacing":{"margin":true,"padding":true,"blockGap":true},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontFamily":true,"__experimentalFontWeight":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true},"__experimentalBorder":{"color":true,"radius":true,"width":true,"style":true,"__experimentalDefaultControls":{"color":true,"radius":true,"width":true,"style":true}},"shadow":true,"dimensions":{"minHeight":true}},"example":{"attributes":{"venueName":"Central Park","venueType":"park","locality":"New York","region":"NY","country":"United States"}},"editorStyle":"file:./editor.css"}');(0,a.registerBlockType)(L.name,{...L,icon:o,edit:function({attributes:e,setAttributes:a}){const{venueName:t,venueType:r,address:n,locality:s,region:l,country:c,postalCode:d,latitude:u,longitude:m,locationPrivacy:h,osmId:_,venueUrl:p,foursquareId:b,checkinAt:g,note:x,photo:v,photoAlt:w,showMap:k,layout:C}=e,[S,T]=(0,N.useState)(!1),[A,B]=(0,N.useState)(""),[I,$]=(0,N.useState)([]),[L,M]=(0,N.useState)(!1),[z,F]=(0,N.useState)(!1),[V,O]=(0,N.useState)(null),[U,H]=(0,N.useState)(!1),G=(0,N.useRef)(null),E=(0,f.useBlockProps)({className:`checkin-card layout-${C}`}),W=[{label:(0,j.__)("Place","reactions-for-indieweb"),value:"place"},{label:(0,j.__)("Restaurant","reactions-for-indieweb"),value:"restaurant"},{label:(0,j.__)("Cafe","reactions-for-indieweb"),value:"cafe"},{label:(0,j.__)("Bar","reactions-for-indieweb"),value:"bar"},{label:(0,j.__)("Hotel","reactions-for-indieweb"),value:"hotel"},{label:(0,j.__)("Airport","reactions-for-indieweb"),value:"airport"},{label:(0,j.__)("Park","reactions-for-indieweb"),value:"park"},{label:(0,j.__)("Museum","reactions-for-indieweb"),value:"museum"},{label:(0,j.__)("Theater","reactions-for-indieweb"),value:"theater"},{label:(0,j.__)("Store","reactions-for-indieweb"),value:"store"},{label:(0,j.__)("Office","reactions-for-indieweb"),value:"office"},{label:(0,j.__)("Home","reactions-for-indieweb"),value:"home"},{label:(0,j.__)("Other","reactions-for-indieweb"),value:"other"}],q=[{label:(0,j.__)("Public (exact location)","reactions-for-indieweb"),value:"public"},{label:(0,j.__)("Approximate (city level)","reactions-for-indieweb"),value:"approximate"},{label:(0,j.__)("Private (hidden)","reactions-for-indieweb"),value:"private"}],Y=(0,N.useCallback)(function(){let e;return function(...a){clearTimeout(e),e=setTimeout(()=>{clearTimeout(e),(async e=>{if(!e||e.trim().length<3)$([]);else{M(!0),O(null);try{const a=await R()({path:`/reactions-indieweb/v1/location/search?query=${encodeURIComponent(e)}`});$(a||[])}catch(e){O(e.message||(0,j.__)("Search failed. Please try again.","reactions-for-indieweb")),$([])}finally{M(!1)}}})(...a)},500)}}(),[]),J=async()=>{navigator.geolocation?(F(!0),O(null),navigator.geolocation.getCurrentPosition(async e=>{const t=e.coords.latitude,i=e.coords.longitude;try{const e=await R()({path:`/reactions-indieweb/v1/location/reverse?lat=${t}&lon=${i}`});e?K(e):a({latitude:t,longitude:i,venueName:(0,j.__)("Current Location","reactions-for-indieweb")})}catch(e){a({latitude:t,longitude:i,venueName:(0,j.__)("Current Location","reactions-for-indieweb")})}finally{F(!1),H(!1)}},e=>{switch(F(!1),e.code){case e.PERMISSION_DENIED:O((0,j.__)("Location access was denied.","reactions-for-indieweb"));break;case e.POSITION_UNAVAILABLE:O((0,j.__)("Location information is unavailable.","reactions-for-indieweb"));break;case e.TIMEOUT:O((0,j.__)("Location request timed out.","reactions-for-indieweb"));break;default:O((0,j.__)("Could not detect your location.","reactions-for-indieweb"))}},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})):O((0,j.__)("Geolocation is not supported by your browser.","reactions-for-indieweb"))},K=e=>{const t=e.address||{};a({venueName:e.name||e.display_name?.split(",")[0]||"",address:[t.house_number,t.road].filter(Boolean).join(" ")||t.road||"",locality:t.locality||t.city||t.town||t.village||"",region:t.region||t.state||"",country:t.country||"",postalCode:t.postcode||"",latitude:e.latitude||parseFloat(e.lat)||null,longitude:e.longitude||parseFloat(e.lon)||null,osmId:e.osm_full_id||"",venueUrl:e.extra?.website||""}),B(""),$([]),H(!1)},Q=()=>{const e={place:"📍",restaurant:"🍽️",cafe:"☕",bar:"🍺",hotel:"🏨",airport:"✈️",park:"🌳",museum:"🏛️",theater:"🎭",store:"🛍️",office:"🏢",home:"🏠",other:"📌"};return e[r]||e.place};return t||s||U?U&&!t?(0,i.jsx)("div",{...E,children:(0,i.jsxs)("div",{className:"checkin-search-state",children:[(0,i.jsx)("h3",{children:(0,j.__)("Search for a location","reactions-for-indieweb")}),V&&(0,i.jsx)(y.Notice,{status:"error",isDismissible:!0,onDismiss:()=>O(null),children:V}),(0,i.jsxs)("div",{className:"checkin-search-wrapper",children:[(0,i.jsx)(y.TextControl,{ref:G,value:A,onChange:e=>{B(e),Y(e)},placeholder:(0,j.__)("Search for a venue or address...","reactions-for-indieweb"),autoFocus:!0}),L&&(0,i.jsx)(y.Spinner,{}),I.length>0&&(0,i.jsx)("ul",{className:"checkin-search-results",role:"listbox",children:I.map((e,a)=>(0,i.jsx)("li",{children:(0,i.jsxs)("button",{type:"button",className:"checkin-result-item",onClick:()=>K(e),children:[(0,i.jsx)("strong",{className:"result-name",children:e.name||e.display_name?.split(",")[0]}),(0,i.jsx)("span",{className:"result-address",children:e.formatted_address||e.display_name}),e.type&&(0,i.jsx)("span",{className:"result-type",children:e.type})]})},e.place_id||a))})]}),(0,i.jsxs)("div",{className:"checkin-search-actions",children:[(0,i.jsx)(y.Button,{variant:"secondary",onClick:J,disabled:z,children:z?(0,j.__)("Detecting...","reactions-for-indieweb"):(0,j.__)("Use Current Location","reactions-for-indieweb")}),(0,i.jsx)(y.Button,{variant:"tertiary",onClick:()=>{H(!1),a({venueName:""})},children:(0,j.__)("Enter Manually","reactions-for-indieweb")}),(0,i.jsx)(y.Button,{variant:"link",onClick:()=>H(!1),children:(0,j.__)("Cancel","reactions-for-indieweb")})]})]})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(f.InspectorControls,{children:[(0,i.jsxs)(y.PanelBody,{title:(0,j.__)("Privacy Settings","reactions-for-indieweb"),children:[(0,i.jsx)(y.RadioControl,{label:(0,j.__)("Location Privacy","reactions-for-indieweb"),help:(0,j.__)("Control how much location detail is shown publicly.","reactions-for-indieweb"),selected:h||"approximate",options:q,onChange:e=>{("public"!==e||"public"===h||window.confirm((0,j.__)("You are about to make your precise location public. Are you sure?","reactions-for-indieweb")))&&a({locationPrivacy:e})}}),(0,i.jsxs)("div",{className:"privacy-explanations",children:["public"===h&&(0,i.jsx)(y.Notice,{status:"warning",isDismissible:!1,children:(0,j.__)("Your exact coordinates will be visible to everyone.","reactions-for-indieweb")}),"approximate"===h&&(0,i.jsx)("p",{className:"description",children:(0,j.__)("Only city/region will be shown. Coordinates are stored but not displayed.","reactions-for-indieweb")}),"private"===h&&(0,i.jsx)("p",{className:"description",children:(0,j.__)("Location is saved for your records but not shown publicly.","reactions-for-indieweb")})]})]}),(0,i.jsxs)(y.PanelBody,{title:(0,j.__)("Venue Details","reactions-for-indieweb"),children:[(0,i.jsx)(y.TextControl,{label:(0,j.__)("Venue Name","reactions-for-indieweb"),value:t||"",onChange:e=>a({venueName:e})}),(0,i.jsx)(y.SelectControl,{label:(0,j.__)("Venue Type","reactions-for-indieweb"),value:r,options:W,onChange:e=>a({venueType:e})}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("Street Address","reactions-for-indieweb"),value:n||"",onChange:e=>a({address:e})}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("City/Locality","reactions-for-indieweb"),value:s||"",onChange:e=>a({locality:e})}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("State/Region","reactions-for-indieweb"),value:l||"",onChange:e=>a({region:e})}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("Country","reactions-for-indieweb"),value:c||"",onChange:e=>a({country:e})}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("Postal Code","reactions-for-indieweb"),value:d||"",onChange:e=>a({postalCode:e})}),(0,i.jsx)(y.Button,{variant:"secondary",onClick:()=>H(!0),style:{marginTop:"12px"},children:(0,j.__)("Search Different Location","reactions-for-indieweb")})]}),(0,i.jsxs)(y.PanelBody,{title:(0,j.__)("Coordinates","reactions-for-indieweb"),initialOpen:!1,children:[(0,i.jsx)(y.TextControl,{label:(0,j.__)("Latitude","reactions-for-indieweb"),value:u||"",onChange:e=>a({latitude:parseFloat(e)||null}),type:"number",step:"any"}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("Longitude","reactions-for-indieweb"),value:m||"",onChange:e=>a({longitude:parseFloat(e)||null}),type:"number",step:"any"}),(0,i.jsx)(y.ToggleControl,{label:(0,j.__)("Show Map","reactions-for-indieweb"),checked:k,onChange:e=>a({showMap:e}),help:"private"===h?(0,j.__)("Map is hidden when privacy is set to private.","reactions-for-indieweb"):(0,j.__)("Display an embedded OpenStreetMap.","reactions-for-indieweb"),disabled:"private"===h})]}),(0,i.jsx)(y.PanelBody,{title:(0,j.__)("Checkin Details","reactions-for-indieweb"),children:(0,i.jsxs)("div",{className:"components-base-control",children:[(0,i.jsx)("label",{className:"components-base-control__label",children:(0,j.__)("Checkin Time","reactions-for-indieweb")}),(0,i.jsx)(y.Button,{variant:"secondary",onClick:()=>T(!0),children:g?new Date(g).toLocaleString():(0,j.__)("Set time","reactions-for-indieweb")}),S&&(0,i.jsx)(y.Popover,{onClose:()=>T(!1),children:(0,i.jsx)(y.DateTimePicker,{currentDate:g,onChange:e=>{a({checkinAt:e}),T(!1)}})})]})}),(0,i.jsx)(y.PanelBody,{title:(0,j.__)("Layout","reactions-for-indieweb"),children:(0,i.jsx)(y.SelectControl,{label:(0,j.__)("Layout Style","reactions-for-indieweb"),value:C,options:[{label:(0,j.__)("Horizontal","reactions-for-indieweb"),value:"horizontal"},{label:(0,j.__)("Vertical","reactions-for-indieweb"),value:"vertical"},{label:(0,j.__)("Map Focus","reactions-for-indieweb"),value:"map"},{label:(0,j.__)("Compact","reactions-for-indieweb"),value:"compact"}],onChange:e=>a({layout:e})})}),(0,i.jsxs)(y.PanelBody,{title:(0,j.__)("Links","reactions-for-indieweb"),initialOpen:!1,children:[(0,i.jsx)(y.TextControl,{label:(0,j.__)("Venue URL","reactions-for-indieweb"),value:p||"",onChange:e=>a({venueUrl:e}),type:"url"}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("Foursquare ID","reactions-for-indieweb"),value:b||"",onChange:e=>a({foursquareId:e})}),_&&(0,i.jsxs)("p",{className:"description",children:[(0,j.__)("OSM ID:","reactions-for-indieweb")," ",_]})]})]}),(0,i.jsx)("div",{...E,children:(0,i.jsxs)("div",{className:"reactions-card h-entry",children:[(0,i.jsx)("div",{className:"checkin-photo",children:(0,i.jsx)(f.MediaUploadCheck,{children:(0,i.jsx)(f.MediaUpload,{onSelect:e=>{a({photo:e.url,photoAlt:e.alt||t})},allowedTypes:["image"],render:({open:e})=>(0,i.jsx)("div",{onClick:e,role:"button",tabIndex:0,children:v?(0,i.jsx)("img",{src:v,alt:w,className:"u-photo"}):(0,i.jsxs)("div",{className:"photo-placeholder",children:[(0,i.jsx)("span",{className:"venue-icon",children:Q()}),(0,i.jsx)("span",{children:(0,j.__)("Add photo","reactions-for-indieweb")})]})})})})}),(0,i.jsxs)("div",{className:"checkin-info",children:[(0,i.jsxs)("div",{className:"checkin-header",children:[(0,i.jsxs)("span",{className:"venue-type-badge",children:[(0,i.jsx)("span",{className:"venue-icon",children:Q()}),W.find(e=>e.value===r)?.label]}),"private"===h&&(0,i.jsxs)("span",{className:"privacy-badge private",children:["🔒 ",(0,j.__)("Private","reactions-for-indieweb")]}),"approximate"===h&&(0,i.jsxs)("span",{className:"privacy-badge approximate",children:["📍 ",(0,j.__)("Approximate","reactions-for-indieweb")]})]}),(0,i.jsx)(f.RichText,{tagName:"h3",className:"venue-name p-name",value:t,onChange:e=>a({venueName:e}),placeholder:(0,j.__)("Venue name","reactions-for-indieweb")}),(0,i.jsx)("div",{className:"venue-location p-location h-card",children:(0,i.jsx)(D,{address:"public"===h?n:"",locality:s,region:l,country:c})}),g&&(0,i.jsx)("time",{className:"checkin-time dt-published",dateTime:new Date(g).toISOString(),children:new Date(g).toLocaleString()}),(0,i.jsx)(f.RichText,{tagName:"p",className:"checkin-note p-content",value:x,onChange:e=>a({note:e}),placeholder:(0,j.__)("Add a note about this checkin...","reactions-for-indieweb")}),(0,i.jsx)(y.Button,{variant:"link",isDestructive:!0,onClick:()=>{a({venueName:"",address:"",locality:"",region:"",country:"",postalCode:"",latitude:null,longitude:null,osmId:""}),H(!0)},className:"change-venue-button",children:(0,j.__)("Change venue","reactions-for-indieweb")})]}),k&&u&&m&&"private"!==h&&(0,i.jsxs)("div",{className:"checkin-map",children:[(0,i.jsx)("iframe",{title:(0,j.__)("Location map","reactions-for-indieweb"),width:"100%",height:"200",frameBorder:"0",scrolling:"no",marginHeight:"0",marginWidth:"0",src:(()=>{if(!u||!m)return null;const e="public"===h?.01:.1;return`https://www.openstreetmap.org/export/embed.html?bbox=${m-e},${u-e},${m+e},${u+e}&layer=mapnik&marker=${u},${m}`})()}),"approximate"===h&&(0,i.jsx)("p",{className:"map-note",children:(0,j.__)("Showing approximate area. Exact location hidden.","reactions-for-indieweb")})]}),"private"===h&&u&&m&&(0,i.jsxs)("div",{className:"checkin-private-notice",children:[(0,i.jsx)("span",{className:"dashicons dashicons-lock"}),(0,j.__)("Location saved privately","reactions-for-indieweb")]})]})})]}):(0,i.jsx)("div",{...E,children:(0,i.jsxs)(P,{icon:o,label:(0,j.__)("Checkin Card","reactions-for-indieweb"),instructions:(0,j.__)("Check in to a location. Use your current location or search for a venue.","reactions-for-indieweb"),children:[V&&(0,i.jsx)(y.Notice,{status:"error",isDismissible:!0,onDismiss:()=>O(null),children:V}),(0,i.jsxs)("div",{className:"checkin-placeholder-actions",children:[(0,i.jsx)(y.Button,{variant:"primary",onClick:J,disabled:z,icon:z?null:"location",children:z?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y.Spinner,{}),(0,j.__)("Detecting...","reactions-for-indieweb")]}):(0,j.__)("Use Current Location","reactions-for-indieweb")}),(0,i.jsx)(y.Button,{variant:"secondary",onClick:()=>H(!0),icon:"search",children:(0,j.__)("Search for Venue","reactions-for-indieweb")}),(0,i.jsx)(y.Button,{variant:"tertiary",onClick:()=>a({venueName:""}),children:(0,j.__)("Enter Manually","reactions-for-indieweb")})]})]})})},save:function({attributes:e}){const{venueName:a,venueType:t,address:r,locality:n,region:s,country:o,postalCode:l,latitude:c,longitude:d,locationPrivacy:u="approximate",osmId:m,venueUrl:h,foursquareId:_,checkinAt:p,note:b,photo:g,photoAlt:x,showMap:v,layout:w}=e,j=f.useBlockProps.save({className:`checkin-card layout-${w}`}),y="private"===u,N="public"===u,k=N&&c&&d,C=N&&r,S=v&&c&&d&&!y,T=()=>{const e={place:"📍",restaurant:"🍽️",cafe:"☕",bar:"🍺",hotel:"🏨",airport:"✈️",park:"🌳",museum:"🏛️",theater:"🎭",store:"🛍️",office:"🏢",home:"🏠",other:"📌"};return e[t]||e.place},P=()=>{const e={place:"Place",restaurant:"Restaurant",cafe:"Cafe",bar:"Bar",hotel:"Hotel",airport:"Airport",park:"Park",museum:"Museum",theater:"Theater",store:"Store",office:"Office",home:"Home",other:"Other"};return e[t]||e.place};return y?(0,i.jsx)("div",{...j,children:(0,i.jsxs)("div",{className:"reactions-card reactions-card--private h-entry",children:[g&&(0,i.jsx)("div",{className:"reactions-card__media",children:(0,i.jsx)("img",{src:g,alt:x||"Photo",className:"reactions-card__image u-photo",loading:"lazy"})}),(0,i.jsxs)("div",{className:"reactions-card__content",children:[(0,i.jsxs)("span",{className:"reactions-card__badge",children:[(0,i.jsx)("span",{className:"reactions-card__badge-icon","aria-hidden":"true",children:T()}),P()]}),(0,i.jsxs)("p",{className:"reactions-card__private-notice",children:[(0,i.jsx)("span",{className:"dashicons dashicons-lock","aria-hidden":"true"}),"Location saved privately"]}),p&&(0,i.jsx)("time",{className:"reactions-card__timestamp dt-published",dateTime:new Date(p).toISOString(),children:new Date(p).toLocaleString()}),b&&(0,i.jsx)("div",{className:"reactions-card__notes p-content",children:(0,i.jsx)(f.RichText.Content,{tagName:"p",value:b})})]})]})}):(0,i.jsx)("div",{...j,children:(0,i.jsxs)("div",{className:"reactions-card h-entry",children:[g&&(0,i.jsx)("div",{className:"reactions-card__media",children:(0,i.jsx)("img",{src:g,alt:x||`Photo at ${a}`,className:"reactions-card__image u-photo",loading:"lazy"})}),(0,i.jsxs)("div",{className:"reactions-card__content",children:[(0,i.jsxs)("span",{className:"reactions-card__badge",children:[(0,i.jsx)("span",{className:"reactions-card__badge-icon","aria-hidden":"true",children:T()}),P()]}),a&&(0,i.jsx)("h3",{className:"reactions-card__title",children:h?(0,i.jsx)("a",{href:h,className:"p-name u-url",target:"_blank",rel:"noopener noreferrer",children:a}):(0,i.jsx)("span",{className:"p-name",children:a})}),(0,i.jsxs)("div",{className:"reactions-card__location p-location h-card",children:[C&&(0,i.jsx)("span",{className:"p-street-address",children:r}),(n||s||o)&&(0,i.jsxs)("span",{className:"reactions-card__location-parts",children:[n&&(0,i.jsx)("span",{className:"p-locality",children:n}),n&&s&&", ",s&&(0,i.jsx)("span",{className:"p-region",children:s}),(n||s)&&o&&", ",o&&(0,i.jsx)("span",{className:"p-country-name",children:o})]}),N&&l&&(0,i.jsx)("span",{className:"p-postal-code",children:l}),k&&(0,i.jsxs)("data",{className:"p-geo h-geo",value:c&&d?`geo:${c},${d}`:null,children:[(0,i.jsx)("data",{className:"p-latitude",value:c,hidden:!0}),(0,i.jsx)("data",{className:"p-longitude",value:d,hidden:!0})]})]}),p&&(0,i.jsx)("time",{className:"reactions-card__timestamp dt-published",dateTime:new Date(p).toISOString(),children:new Date(p).toLocaleString()}),b&&(0,i.jsx)("div",{className:"reactions-card__notes p-content",children:(0,i.jsx)(f.RichText.Content,{tagName:"p",value:b})})]}),S&&(0,i.jsxs)("div",{className:"reactions-card__map",children:[(0,i.jsx)("iframe",{title:`Map of ${a||"location"}`,width:"100%",height:"200",frameBorder:"0",scrolling:"no",marginHeight:"0",marginWidth:"0",src:(()=>{if(!c||!d)return null;const e=N?.01:.1;return`https://www.openstreetmap.org/export/embed.html?bbox=${d-e},${c-e},${d+e},${c+e}&layer=mapnik&marker=${c},${d}`})(),loading:"lazy"}),N&&(0,i.jsx)("a",{href:`https://www.openstreetmap.org/?mlat=${c}&mlon=${d}#map=16/${c}/${d}`,className:"reactions-card__map-link",target:"_blank",rel:"noopener noreferrer",children:"View larger map"}),!N&&(0,i.jsx)("p",{className:"reactions-card__map-note",children:"Showing approximate area"})]}),(0,i.jsx)("data",{className:"u-checkin",value:h||"",hidden:!0}),_&&(0,i.jsx)("data",{className:"u-uid",value:`https://foursquare.com/v/${_}`,hidden:!0}),m&&(0,i.jsx)("data",{className:"u-uid",value:`https://www.openstreetmap.org/${m}`,hidden:!0})]})})}});const M=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"reactions-indieweb/rsvp-card","version":"1.0.0","title":"RSVP Card","category":"reactions-indieweb","description":"Display an RSVP response to an event with status, event details, and optional note.","keywords":["rsvp","event","attend","interested","maybe","response"],"textdomain":"reactions-indieweb","attributes":{"eventName":{"type":"string","source":"html","selector":".event-name"},"eventUrl":{"type":"string"},"eventStart":{"type":"string"},"eventEnd":{"type":"string"},"eventLocation":{"type":"string"},"eventDescription":{"type":"string"},"rsvpStatus":{"type":"string","default":"yes"},"rsvpNote":{"type":"string","source":"html","selector":".rsvp-note"},"rsvpAt":{"type":"string"},"eventImage":{"type":"string","source":"attribute","selector":".event-image img","attribute":"src"},"eventImageAlt":{"type":"string","source":"attribute","selector":".event-image img","attribute":"alt"},"layout":{"type":"string","default":"horizontal"}},"supports":{"html":false,"align":["wide","full"],"color":{"background":true,"text":true,"gradients":true,"link":true},"spacing":{"margin":true,"padding":true,"blockGap":true},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontFamily":true,"__experimentalFontWeight":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true},"__experimentalBorder":{"color":true,"radius":true,"width":true,"style":true,"__experimentalDefaultControls":{"color":true,"radius":true,"width":true,"style":true}},"shadow":true,"dimensions":{"minHeight":true}},"example":{"attributes":{"eventName":"IndieWebCamp 2025","rsvpStatus":"yes","eventLocation":"Portland, OR"}},"editorStyle":"file:./editor.css"}');(0,a.registerBlockType)(M.name,{...M,icon:l,edit:function({attributes:e,setAttributes:a}){const{eventName:t,eventUrl:r,eventStart:n,eventEnd:s,eventLocation:o,eventDescription:c,rsvpStatus:d,rsvpNote:u,rsvpAt:m,eventImage:h,eventImageAlt:_,layout:p}=e,[b,g]=(0,N.useState)(!1),[x,v]=(0,N.useState)(!1),[w,k]=(0,N.useState)(!1),C=(0,f.useBlockProps)({className:`rsvp-card layout-${p} rsvp-${d}`}),S=[{label:(0,j.__)("Yes","reactions-for-indieweb"),value:"yes"},{label:(0,j.__)("No","reactions-for-indieweb"),value:"no"},{label:(0,j.__)("Maybe","reactions-for-indieweb"),value:"maybe"},{label:(0,j.__)("Interested","reactions-for-indieweb"),value:"interested"},{label:(0,j.__)("Remote","reactions-for-indieweb"),value:"remote"}],T=()=>{const e={yes:"✅",no:"❌",maybe:"🤔",interested:"👀",remote:"💻"};return e[d]||e.yes};return t||r?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(f.InspectorControls,{children:[(0,i.jsxs)(y.PanelBody,{title:(0,j.__)("Event Details","reactions-for-indieweb"),children:[(0,i.jsx)(y.TextControl,{label:(0,j.__)("Event Name","reactions-for-indieweb"),value:t||"",onChange:e=>a({eventName:e})}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("Event URL","reactions-for-indieweb"),value:r||"",onChange:e=>a({eventUrl:e}),type:"url"}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("Location","reactions-for-indieweb"),value:o||"",onChange:e=>a({eventLocation:e})}),(0,i.jsx)(y.TextareaControl,{label:(0,j.__)("Description","reactions-for-indieweb"),value:c||"",onChange:e=>a({eventDescription:e}),rows:3})]}),(0,i.jsxs)(y.PanelBody,{title:(0,j.__)("Event Date & Time","reactions-for-indieweb"),children:[(0,i.jsxs)("div",{className:"components-base-control",children:[(0,i.jsx)("label",{className:"components-base-control__label",children:(0,j.__)("Start","reactions-for-indieweb")}),(0,i.jsx)(y.Button,{variant:"secondary",onClick:()=>g(!0),children:n?new Date(n).toLocaleString():(0,j.__)("Set start time","reactions-for-indieweb")}),b&&(0,i.jsx)(y.Popover,{onClose:()=>g(!1),children:(0,i.jsx)(y.DateTimePicker,{currentDate:n,onChange:e=>{a({eventStart:e}),g(!1)}})})]}),(0,i.jsxs)("div",{className:"components-base-control",children:[(0,i.jsx)("label",{className:"components-base-control__label",children:(0,j.__)("End","reactions-for-indieweb")}),(0,i.jsx)(y.Button,{variant:"secondary",onClick:()=>v(!0),children:s?new Date(s).toLocaleString():(0,j.__)("Set end time","reactions-for-indieweb")}),x&&(0,i.jsx)(y.Popover,{onClose:()=>v(!1),children:(0,i.jsx)(y.DateTimePicker,{currentDate:s,onChange:e=>{a({eventEnd:e}),v(!1)}})})]})]}),(0,i.jsxs)(y.PanelBody,{title:(0,j.__)("Your RSVP","reactions-for-indieweb"),children:[(0,i.jsx)(y.SelectControl,{label:(0,j.__)("Response","reactions-for-indieweb"),value:d,options:S,onChange:e=>a({rsvpStatus:e})}),(0,i.jsxs)("div",{className:"components-base-control",children:[(0,i.jsx)("label",{className:"components-base-control__label",children:(0,j.__)("RSVP Time","reactions-for-indieweb")}),(0,i.jsx)(y.Button,{variant:"secondary",onClick:()=>k(!0),children:m?new Date(m).toLocaleString():(0,j.__)("Set time","reactions-for-indieweb")}),w&&(0,i.jsx)(y.Popover,{onClose:()=>k(!1),children:(0,i.jsx)(y.DateTimePicker,{currentDate:m,onChange:e=>{a({rsvpAt:e}),k(!1)}})})]})]}),(0,i.jsx)(y.PanelBody,{title:(0,j.__)("Layout","reactions-for-indieweb"),children:(0,i.jsx)(y.SelectControl,{label:(0,j.__)("Layout Style","reactions-for-indieweb"),value:p,options:[{label:(0,j.__)("Horizontal","reactions-for-indieweb"),value:"horizontal"},{label:(0,j.__)("Vertical","reactions-for-indieweb"),value:"vertical"},{label:(0,j.__)("Compact","reactions-for-indieweb"),value:"compact"}],onChange:e=>a({layout:e})})})]}),(0,i.jsx)("div",{...C,children:(0,i.jsxs)("div",{className:"reactions-card h-entry",children:[(0,i.jsx)("div",{className:"event-image",children:(0,i.jsx)(f.MediaUploadCheck,{children:(0,i.jsx)(f.MediaUpload,{onSelect:e=>{a({eventImage:e.url,eventImageAlt:e.alt||t})},allowedTypes:["image"],render:({open:e})=>(0,i.jsx)("div",{onClick:e,role:"button",tabIndex:0,children:h?(0,i.jsx)("img",{src:h,alt:_,className:"u-photo"}):(0,i.jsxs)("div",{className:"image-placeholder",children:[(0,i.jsx)("span",{className:"rsvp-icon",children:T()}),(0,i.jsx)("span",{children:(0,j.__)("Add event image","reactions-for-indieweb")})]})})})})}),(0,i.jsxs)("div",{className:"rsvp-info",children:[(0,i.jsxs)("span",{className:`rsvp-status-badge status-${d}`,children:[(0,i.jsx)("span",{className:"status-icon","aria-hidden":"true",children:T()}),(()=>{const e={yes:(0,j.__)("Going","reactions-for-indieweb"),no:(0,j.__)("Not Going","reactions-for-indieweb"),maybe:(0,j.__)("Maybe","reactions-for-indieweb"),interested:(0,j.__)("Interested","reactions-for-indieweb"),remote:(0,j.__)("Attending Remotely","reactions-for-indieweb")};return e[d]||e.yes})()]}),(0,i.jsx)("div",{className:"rsvp-quick-buttons",children:(0,i.jsx)(y.ButtonGroup,{children:S.map(e=>(0,i.jsx)(y.Button,{variant:d===e.value?"primary":"secondary",onClick:()=>a({rsvpStatus:e.value}),isSmall:!0,children:e.label},e.value))})}),(0,i.jsx)(f.RichText,{tagName:"h3",className:"event-name p-name",value:t,onChange:e=>a({eventName:e}),placeholder:(0,j.__)("Event name","reactions-for-indieweb")}),n&&(0,i.jsxs)("div",{className:"event-datetime",children:[(0,i.jsx)("span",{className:"datetime-icon","aria-hidden":"true",children:"📅"}),(0,i.jsx)("time",{dateTime:new Date(n).toISOString(),children:(()=>{if(!n)return null;const e=new Date(n),a=s?new Date(s):null,t=e.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"});return a?e.toDateString()===a.toDateString()?`${t} - ${a.toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"})}`:`${t} - ${a.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}`:t})()})]}),o&&(0,i.jsxs)("div",{className:"event-location p-location",children:[(0,i.jsx)("span",{className:"location-icon","aria-hidden":"true",children:"📍"}),o]}),(0,i.jsx)(f.RichText,{tagName:"p",className:"rsvp-note p-content",value:u,onChange:e=>a({rsvpNote:e}),placeholder:(0,j.__)("Add a note about your RSVP...","reactions-for-indieweb")})]})]})})]}):(0,i.jsx)("div",{...C,children:(0,i.jsx)(P,{icon:l,label:(0,j.__)("RSVP Card","reactions-for-indieweb"),instructions:(0,j.__)("Respond to an event with your RSVP status.","reactions-for-indieweb"),children:(0,i.jsxs)("div",{className:"placeholder-actions",children:[(0,i.jsx)(y.TextControl,{label:(0,j.__)("Event URL","reactions-for-indieweb"),value:r||"",onChange:e=>a({eventUrl:e}),type:"url",placeholder:"https://..."}),(0,i.jsx)(y.Button,{variant:"primary",onClick:()=>a({eventName:""}),children:(0,j.__)("Add RSVP","reactions-for-indieweb")})]})})})},save:function({attributes:e}){const{eventName:a,eventUrl:t,eventStart:r,eventEnd:n,eventLocation:s,eventDescription:o,rsvpStatus:l,rsvpNote:c,rsvpAt:d,eventImage:u,eventImageAlt:m,layout:h}=e,_=f.useBlockProps.save({className:`rsvp-card layout-${h} rsvp-${l}`});return(0,i.jsx)("div",{..._,children:(0,i.jsxs)("div",{className:"reactions-card h-entry",children:[u&&(0,i.jsx)("div",{className:"reactions-card__media",children:(0,i.jsx)("img",{src:u,alt:m||`${a} event`,className:"reactions-card__image u-photo",loading:"lazy"})}),(0,i.jsxs)("div",{className:"reactions-card__content",children:[(0,i.jsxs)("span",{className:`reactions-card__badge reactions-card__badge--${l}`,children:[(0,i.jsx)("span",{className:"reactions-card__badge-icon","aria-hidden":"true",children:(()=>{const e={yes:"✅",no:"❌",maybe:"🤔",interested:"👀",remote:"💻"};return e[l]||e.yes})()}),(0,i.jsx)("data",{className:"p-rsvp",value:l,children:(()=>{const e={yes:"Going",no:"Not Going",maybe:"Maybe",interested:"Interested",remote:"Attending Remotely"};return e[l]||e.yes})()})]}),(0,i.jsxs)("div",{className:"reactions-card__event p-in-reply-to h-event",children:[a&&(0,i.jsx)("h3",{className:"reactions-card__title",children:t?(0,i.jsx)("a",{href:t,className:"p-name u-url",target:"_blank",rel:"noopener noreferrer",children:a}):(0,i.jsx)("span",{className:"p-name",children:a})}),r&&(0,i.jsxs)("div",{className:"reactions-card__meta-row",children:[(0,i.jsx)("span",{className:"reactions-card__meta-icon","aria-hidden":"true",children:"📅"}),(0,i.jsx)("time",{className:"dt-start",dateTime:new Date(r).toISOString(),children:(()=>{if(!r)return null;const e=new Date(r),a=n?new Date(n):null,t=e.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"});return a?e.toDateString()===a.toDateString()?`${t} - ${a.toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"})}`:`${t} - ${a.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}`:t})()}),n&&(0,i.jsx)("data",{className:"dt-end",value:new Date(n).toISOString(),hidden:!0})]}),s&&(0,i.jsxs)("div",{className:"reactions-card__meta-row",children:[(0,i.jsx)("span",{className:"reactions-card__meta-icon","aria-hidden":"true",children:"📍"}),(0,i.jsx)("span",{className:"p-location",children:s})]}),o&&(0,i.jsx)("p",{className:"reactions-card__meta p-summary",children:o})]}),c&&(0,i.jsx)("div",{className:"reactions-card__notes p-content",children:(0,i.jsx)(f.RichText.Content,{tagName:"p",value:c})}),d&&(0,i.jsxs)("time",{className:"reactions-card__timestamp dt-published",dateTime:new Date(d).toISOString(),children:["RSVPed ",new Date(d).toLocaleDateString()]})]}),t&&(0,i.jsx)("data",{className:"u-in-reply-to",value:t,hidden:!0})]})})}});const z=window.wp.data,F=[{label:(0,j.__)("Playing","reactions-for-indieweb"),value:"playing",emoji:"🎮"},{label:(0,j.__)("Completed","reactions-for-indieweb"),value:"completed",emoji:"✅"},{label:(0,j.__)("Abandoned","reactions-for-indieweb"),value:"abandoned",emoji:"⏸️"},{label:(0,j.__)("Backlog","reactions-for-indieweb"),value:"backlog",emoji:"📋"},{label:(0,j.__)("Wishlist","reactions-for-indieweb"),value:"wishlist",emoji:"⭐"}],V={playing:"Playing",completed:"Completed",abandoned:"Abandoned",backlog:"Backlog",wishlist:"Wishlist"},O=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"reactions-indieweb/play-card","version":"1.0.0","title":"Play Card","category":"reactions-indieweb","description":"Display a game you played with cover art, platform, status, and rating.","keywords":["play","game","gaming","video game","board game"],"textdomain":"reactions-indieweb","attributes":{"title":{"type":"string","source":"html","selector":".game-title"},"platform":{"type":"string"},"cover":{"type":"string","source":"attribute","selector":".game-cover img","attribute":"src"},"coverAlt":{"type":"string","source":"attribute","selector":".game-cover img","attribute":"alt"},"status":{"type":"string","default":"playing","enum":["playing","completed","abandoned","backlog","wishlist"]},"hoursPlayed":{"type":"number","default":0},"rating":{"type":"number","default":0},"playedAt":{"type":"string"},"review":{"type":"string","source":"html","selector":".game-review"},"gameUrl":{"type":"string"},"bggId":{"type":"string"},"rawgId":{"type":"string"},"steamId":{"type":"string"},"developer":{"type":"string"},"publisher":{"type":"string"},"releaseYear":{"type":"string"},"layout":{"type":"string","default":"horizontal"}},"supports":{"html":false,"align":["wide","full"],"color":{"background":true,"text":true,"gradients":true,"link":true},"spacing":{"margin":true,"padding":true,"blockGap":true},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontFamily":true,"__experimentalFontWeight":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true},"__experimentalBorder":{"color":true,"radius":true,"width":true,"style":true,"__experimentalDefaultControls":{"color":true,"radius":true,"width":true,"style":true}},"shadow":true,"dimensions":{"minHeight":true}},"example":{"attributes":{"title":"The Legend of Zelda: Breath of the Wild","platform":"Nintendo Switch","status":"completed","rating":5,"hoursPlayed":120}}}');(0,a.registerBlockType)(O.name,{...O,icon:h,edit:function({attributes:e,setAttributes:a}){const{title:t,platform:r,cover:n,coverAlt:s,status:o,hoursPlayed:l,rating:c,review:d,gameUrl:u,bggId:m,rawgId:h,steamId:_,developer:p,publisher:b,releaseYear:g}=e,[x,v]=(0,N.useState)(!1),w=(0,f.useBlockProps)({className:"play-card-block"}),{editPost:C}=(0,z.useDispatch)("core/editor"),{currentKind:T,postMeta:P}=(0,z.useSelect)(e=>{const a=e("core/editor").getEditedPostAttribute("indieblocks_kind"),t=e("core/editor").getEditedPostAttribute("meta")||{};return{currentKind:a&&a.length>0?a[0]:null,postMeta:t}},[]);(0,N.useEffect)(()=>{T||wp.apiFetch({path:"/wp/v2/kind?slug=play"}).then(e=>{e&&e.length>0&&C({indieblocks_kind:[e[0].id]})}).catch(()=>{})},[]),(0,N.useEffect)(()=>{var e,i,s,d,u,p,b,g,x;const v={},w=null!==(e=P._reactions_play_title)&&void 0!==e?e:"",j=null!==(i=P._reactions_play_platform)&&void 0!==i?i:"",f=null!==(s=P._reactions_play_cover)&&void 0!==s?s:"",y=null!==(d=P._reactions_play_status)&&void 0!==d?d:"",N=null!==(u=P._reactions_play_hours)&&void 0!==u?u:0,k=null!==(p=P._reactions_play_rating)&&void 0!==p?p:0,C=null!==(b=P._reactions_play_bgg_id)&&void 0!==b?b:"",S=null!==(g=P._reactions_play_rawg_id)&&void 0!==g?g:"",T=null!==(x=P._reactions_play_steam_id)&&void 0!==x?x:"";w!==(t||"")&&(v.title=w),j!==(r||"")&&(v.platform=j),f!==(n||"")&&(v.cover=f),y!==(o||"")&&(v.status=y),N!==(l||0)&&(v.hoursPlayed=N),k!==(c||0)&&(v.rating=k),C!==(m||"")&&(v.bggId=C),S!==(h||"")&&(v.rawgId=S),T!==(_||"")&&(v.steamId=T),Object.keys(v).length>0&&a(v)},[P._reactions_play_title,P._reactions_play_platform,P._reactions_play_cover,P._reactions_play_status,P._reactions_play_hours,P._reactions_play_rating,P._reactions_play_bgg_id,P._reactions_play_rawg_id,P._reactions_play_steam_id]),(0,N.useEffect)(()=>{var e,a,i,s,d,u,p,b,g;const x={};(t||"")!==(null!==(e=P._reactions_play_title)&&void 0!==e?e:"")&&(x._reactions_play_title=t||""),(r||"")!==(null!==(a=P._reactions_play_platform)&&void 0!==a?a:"")&&(x._reactions_play_platform=r||""),(n||"")!==(null!==(i=P._reactions_play_cover)&&void 0!==i?i:"")&&(x._reactions_play_cover=n||""),(o||"")!==(null!==(s=P._reactions_play_status)&&void 0!==s?s:"")&&(x._reactions_play_status=o||""),(l||0)!==(null!==(d=P._reactions_play_hours)&&void 0!==d?d:0)&&(x._reactions_play_hours=l||0),(c||0)!==(null!==(u=P._reactions_play_rating)&&void 0!==u?u:0)&&(x._reactions_play_rating=c||0),(m||"")!==(null!==(p=P._reactions_play_bgg_id)&&void 0!==p?p:"")&&(x._reactions_play_bgg_id=m||""),(h||"")!==(null!==(b=P._reactions_play_rawg_id)&&void 0!==b?b:"")&&(x._reactions_play_rawg_id=h||""),(_||"")!==(null!==(g=P._reactions_play_steam_id)&&void 0!==g?g:"")&&(x._reactions_play_steam_id=_||""),Object.keys(x).length>0&&C({meta:x})},[t,r,n,o,l,c,m,h,_]);const D=e=>{const t=e.designers?Array.isArray(e.designers)?e.designers.join(", "):e.designers:e.developers?Array.isArray(e.developers)?e.developers.join(", "):e.developers:"",i=e.publishers?Array.isArray(e.publishers)?e.publishers.join(", "):e.publishers:"";a({title:e.title||e.name||"",cover:e.cover||e.image||e.thumbnail||e.background_image||"",coverAlt:e.title||e.name||"",platform:e.platforms?Array.isArray(e.platforms)?e.platforms[0]:e.platforms:"",developer:t,publisher:i,releaseYear:e.year||e.released?.substring(0,4)||"",gameUrl:e.url||"",bggId:"bgg"===e.source?String(e.id):"",rawgId:"rawg"===e.source?String(e.id):""}),v(!1)},A=e=>{e.stopPropagation(),a({cover:"",coverAlt:""})},B=(function(e){F.find(a=>a.value===e)||F[0]}(o),F.map(e=>({label:`${e.emoji} ${e.label}`,value:e.value})));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(f.InspectorControls,{children:[(0,i.jsxs)(y.PanelBody,{title:(0,j.__)("Find Game","reactions-for-indieweb"),initialOpen:!t,children:[(0,i.jsx)("p",{className:"components-base-control__help",style:{marginBottom:"12px"},children:(0,j.__)("Search for your game on these sites, then paste the URL below:","reactions-for-indieweb")}),(0,i.jsxs)("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[(0,i.jsx)(y.ExternalLink,{href:`https://boardgamegeek.com/geeksearch.php?action=search&objecttype=boardgame&q=${encodeURIComponent(t||"")}`,style:{display:"inline-flex",alignItems:"center",gap:"4px"},children:(0,j.__)("BoardGameGeek","reactions-for-indieweb")}),(0,i.jsx)(y.ExternalLink,{href:`https://videogamegeek.com/geeksearch.php?action=search&objecttype=videogame&q=${encodeURIComponent(t||"")}`,style:{display:"inline-flex",alignItems:"center",gap:"4px"},children:(0,j.__)("VideoGameGeek","reactions-for-indieweb")})]}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("Paste BGG/VGG URL","reactions-for-indieweb"),value:u||"",onChange:e=>{a({gameUrl:e});const t=e.match(/(?:boardgamegeek|videogamegeek)\.com\/(?:boardgame|videogame|thing)\/(\d+)/);t&&a({bggId:t[1]})},placeholder:"https://boardgamegeek.com/boardgame/13/catan",help:(0,j.__)("The game ID will be extracted automatically.","reactions-for-indieweb")}),m&&(0,i.jsxs)("p",{style:{marginTop:"4px",color:"var(--wp-components-color-accent, #007cba)"},children:[(0,j.__)("BGG ID:","reactions-for-indieweb")," ",m]}),(0,i.jsx)("hr",{style:{margin:"16px 0"}}),(0,i.jsx)("p",{className:"components-base-control__help",style:{marginBottom:"8px"},children:(0,j.__)("Or search directly (requires API token):","reactions-for-indieweb")}),(0,i.jsx)(S,{type:"game",placeholder:(0,j.__)("Search BoardGameGeek...","reactions-for-indieweb"),onSelect:D})]}),(0,i.jsxs)(y.PanelBody,{title:(0,j.__)("Game Details","reactions-for-indieweb"),initialOpen:!0,children:[(0,i.jsx)(y.TextControl,{label:(0,j.__)("Title","reactions-for-indieweb"),value:t||"",onChange:e=>a({title:e}),placeholder:(0,j.__)("Game title","reactions-for-indieweb")}),(0,i.jsx)(y.SelectControl,{label:(0,j.__)("Status","reactions-for-indieweb"),value:o||"playing",options:B,onChange:e=>a({status:e})}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("Platform","reactions-for-indieweb"),value:r||"",onChange:e=>a({platform:e}),placeholder:(0,j.__)("PC, Switch, PS5...","reactions-for-indieweb")}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("Developer","reactions-for-indieweb"),value:p||"",onChange:e=>a({developer:e})}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("Release Year","reactions-for-indieweb"),value:g||"",onChange:e=>a({releaseYear:e})}),(0,i.jsx)(y.RangeControl,{label:(0,j.__)("Hours Played","reactions-for-indieweb"),value:l||0,onChange:e=>a({hoursPlayed:e}),min:0,max:500,step:.5}),(0,i.jsx)(y.RangeControl,{label:(0,j.__)("Rating","reactions-for-indieweb"),value:c||0,onChange:e=>a({rating:e}),min:0,max:5,step:1})]}),(0,i.jsxs)(y.PanelBody,{title:(0,j.__)("Links & IDs","reactions-for-indieweb"),initialOpen:!1,children:[(0,i.jsx)(y.TextControl,{label:(0,j.__)("Game URL","reactions-for-indieweb"),value:u||"",onChange:e=>a({gameUrl:e}),type:"url"}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("BoardGameGeek ID","reactions-for-indieweb"),value:m||"",onChange:e=>a({bggId:e})}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("RAWG ID","reactions-for-indieweb"),value:h||"",onChange:e=>a({rawgId:e})}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("Steam App ID","reactions-for-indieweb"),value:_||"",onChange:e=>a({steamId:e})})]}),(0,i.jsx)(y.PanelBody,{title:(0,j.__)("Review","reactions-for-indieweb"),initialOpen:!1,children:(0,i.jsx)(y.TextControl,{label:(0,j.__)("Review","reactions-for-indieweb"),value:d||"",onChange:e=>a({review:e}),placeholder:(0,j.__)("Your thoughts...","reactions-for-indieweb")})})]}),(0,i.jsx)("div",{...w,children:(0,i.jsxs)("div",{className:"reactions-card-wrapper",children:[x&&(0,i.jsxs)("div",{className:"reactions-card__search-bar",children:[(0,i.jsx)(S,{type:"game",placeholder:(0,j.__)("Search for a game...","reactions-for-indieweb"),onSelect:D}),(0,i.jsx)("button",{type:"button",className:"reactions-card__search-close",onClick:()=>v(!1),children:"×"})]}),(0,i.jsxs)("div",{className:"reactions-card",children:[(0,i.jsx)("div",{className:"reactions-card__media",style:{width:"120px"},children:(0,i.jsx)(f.MediaUploadCheck,{children:(0,i.jsx)(f.MediaUpload,{onSelect:e=>{a({cover:e.url,coverAlt:e.alt||t||(0,j.__)("Game cover","reactions-for-indieweb")})},allowedTypes:["image"],render:({open:e})=>(0,i.jsx)("button",{type:"button",className:"reactions-card__media-button",onClick:e,style:{aspectRatio:"3/4"},children:n?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("img",{src:n,alt:s||t,className:"reactions-card__image"}),(0,i.jsx)("button",{type:"button",className:"reactions-card__media-remove",onClick:A,"aria-label":(0,j.__)("Remove cover","reactions-for-indieweb"),children:"×"})]}):(0,i.jsxs)("div",{className:"reactions-card__media-placeholder",children:[(0,i.jsx)("span",{className:"reactions-card__media-icon",children:"🎮"}),(0,i.jsx)("span",{className:"reactions-card__media-text",children:(0,j.__)("Add Cover","reactions-for-indieweb")})]})})})})}),(0,i.jsxs)("div",{className:"reactions-card__content",children:[(0,i.jsxs)("div",{className:"reactions-card__header-row",children:[(0,i.jsx)("div",{className:"reactions-card__badges-row",children:(0,i.jsx)("select",{className:"reactions-card__type-select",value:o||"playing",onChange:e=>a({status:e.target.value}),children:F.map(e=>(0,i.jsxs)("option",{value:e.value,children:[e.emoji," ",e.label]},e.value))})}),(0,i.jsx)("button",{type:"button",className:"reactions-card__action-button",onClick:()=>v(!0),title:(0,j.__)("Search for game","reactions-for-indieweb"),children:"🔍"})]}),(0,i.jsx)(f.RichText,{tagName:"h3",className:"reactions-card__title",value:t,onChange:e=>a({title:e}),placeholder:(0,j.__)("Game title...","reactions-for-indieweb")}),(0,i.jsx)(f.RichText,{tagName:"p",className:"reactions-card__subtitle",value:p,onChange:e=>a({developer:e}),placeholder:(0,j.__)("Developer","reactions-for-indieweb")}),(0,i.jsxs)("div",{className:"reactions-card__input-row",children:[(0,i.jsx)("span",{className:"reactions-card__input-icon",children:"🎮"}),(0,i.jsx)("input",{type:"text",className:"reactions-card__input",value:r||"",onChange:e=>a({platform:e.target.value}),placeholder:(0,j.__)("Platform (PC, Switch...)","reactions-for-indieweb")})]}),(0,i.jsxs)("div",{className:"reactions-card__input-row",children:[(0,i.jsx)("span",{className:"reactions-card__input-icon",children:"⏱️"}),(0,i.jsx)("input",{type:"number",className:"reactions-card__input",value:l||"",onChange:e=>a({hoursPlayed:parseFloat(e.target.value)||0}),placeholder:"0",min:"0",step:"0.5",style:{maxWidth:"80px"}}),(0,i.jsx)("span",{children:(0,j.__)("hours","reactions-for-indieweb")})]}),(0,i.jsx)("div",{className:"reactions-card__rating",children:(0,i.jsx)(k,{value:c,onChange:e=>a({rating:e}),max:5})}),(0,i.jsx)(f.RichText,{tagName:"p",className:"reactions-card__notes",value:d,onChange:e=>a({review:e}),placeholder:(0,j.__)("Your thoughts...","reactions-for-indieweb")})]})]})]})})]})},save:function({attributes:e}){const{title:a,platform:t,cover:r,coverAlt:n,status:s,hoursPlayed:o,rating:l,playedAt:c,review:d,gameUrl:u,bggId:m,rawgId:h,developer:_,publisher:p,releaseYear:b,layout:g}=e,x=f.useBlockProps.save({className:`play-card layout-${g}`});return(0,i.jsx)("div",{...x,children:(0,i.jsxs)("div",{className:"reactions-card h-cite",children:[r&&(0,i.jsx)("div",{className:"reactions-card__media",children:(0,i.jsx)("img",{src:r,alt:n||a,className:"reactions-card__image u-photo",loading:"lazy"})}),(0,i.jsxs)("div",{className:"reactions-card__content",children:[(0,i.jsxs)("div",{className:"reactions-card__badges",children:[s&&(0,i.jsx)("span",{className:`reactions-card__badge reactions-card__badge--${s}`,children:V[s]||s}),t&&(0,i.jsx)("span",{className:"reactions-card__badge",children:t})]}),a&&(0,i.jsx)("h3",{className:"reactions-card__title p-name",children:u?(0,i.jsx)("a",{href:u,className:"u-url",target:"_blank",rel:"noopener noreferrer",children:a}):a}),_&&(0,i.jsx)("p",{className:"reactions-card__subtitle",children:(0,i.jsx)("span",{className:"p-author h-card",children:(0,i.jsx)("span",{className:"p-name",children:_})})}),(p||b)&&(0,i.jsxs)("p",{className:"reactions-card__meta",children:[p,b&&(0,i.jsxs)("span",{children:[" (",b,")"]})]}),o>0&&(0,i.jsxs)("p",{className:"reactions-card__meta",children:[(0,i.jsx)("strong",{children:o})," hours played"]}),!l||l<=0?null:(0,i.jsxs)("div",{className:"reactions-card__rating p-rating","aria-label":`Rating: ${l} out of 5 stars`,children:[Array.from({length:5},(e,a)=>(0,i.jsx)("span",{className:"star "+(a<l?"filled":""),"aria-hidden":"true",children:"★"},a)),(0,i.jsxs)("span",{className:"reactions-card__rating-value",children:[l,"/5"]})]}),d&&(0,i.jsx)("p",{className:"reactions-card__notes p-content",children:d}),c&&(0,i.jsx)("time",{className:"reactions-card__timestamp dt-published",dateTime:new Date(c).toISOString(),children:new Date(c).toLocaleString()})]}),(0,i.jsx)("data",{className:"u-play-of",value:u||"",hidden:!0}),m&&(0,i.jsx)("data",{className:"u-uid",value:`https://boardgamegeek.com/boardgame/${m}`,hidden:!0}),h&&(0,i.jsx)("data",{className:"u-uid",value:`https://rawg.io/games/${h}`,hidden:!0})]})})}});const U=[{label:(0,j.__)("Select cuisine...","reactions-for-indieweb"),value:"",emoji:"🍽️"},{label:(0,j.__)("American","reactions-for-indieweb"),value:"american",emoji:"🍔"},{label:(0,j.__)("Chinese","reactions-for-indieweb"),value:"chinese",emoji:"🥡"},{label:(0,j.__)("French","reactions-for-indieweb"),value:"french",emoji:"🥐"},{label:(0,j.__)("Indian","reactions-for-indieweb"),value:"indian",emoji:"🍛"},{label:(0,j.__)("Italian","reactions-for-indieweb"),value:"italian",emoji:"🍝"},{label:(0,j.__)("Japanese","reactions-for-indieweb"),value:"japanese",emoji:"🍱"},{label:(0,j.__)("Korean","reactions-for-indieweb"),value:"korean",emoji:"🍜"},{label:(0,j.__)("Mexican","reactions-for-indieweb"),value:"mexican",emoji:"🌮"},{label:(0,j.__)("Thai","reactions-for-indieweb"),value:"thai",emoji:"🍲"},{label:(0,j.__)("Vietnamese","reactions-for-indieweb"),value:"vietnamese",emoji:"🍜"},{label:(0,j.__)("Mediterranean","reactions-for-indieweb"),value:"mediterranean",emoji:"🥙"},{label:(0,j.__)("Seafood","reactions-for-indieweb"),value:"seafood",emoji:"🦐"},{label:(0,j.__)("Breakfast","reactions-for-indieweb"),value:"breakfast",emoji:"🥞"},{label:(0,j.__)("Dessert","reactions-for-indieweb"),value:"dessert",emoji:"🍰"},{label:(0,j.__)("Other","reactions-for-indieweb"),value:"other",emoji:"🍽️"}],H=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"reactions-indieweb/eat-card","version":"1.0.0","title":"Eat Card","category":"reactions-indieweb","description":"Display a meal or food you ate with photo, restaurant, cuisine, and rating.","keywords":["eat","food","meal","restaurant","dining"],"textdomain":"reactions-indieweb","attributes":{"name":{"type":"string","source":"html","selector":".food-name"},"restaurant":{"type":"string"},"cuisine":{"type":"string"},"photo":{"type":"string","source":"attribute","selector":".food-photo img","attribute":"src"},"photoAlt":{"type":"string","source":"attribute","selector":".food-photo img","attribute":"alt"},"rating":{"type":"number","default":0},"ateAt":{"type":"string"},"notes":{"type":"string","source":"html","selector":".food-notes"},"restaurantUrl":{"type":"string"},"locality":{"type":"string"},"layout":{"type":"string","default":"horizontal"}},"supports":{"html":false,"align":["wide","full"],"color":{"background":true,"text":true,"gradients":true,"link":true},"spacing":{"margin":true,"padding":true,"blockGap":true},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontFamily":true,"__experimentalFontWeight":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true},"__experimentalBorder":{"color":true,"radius":true,"width":true,"style":true,"__experimentalDefaultControls":{"color":true,"radius":true,"width":true,"style":true}},"shadow":true,"dimensions":{"minHeight":true}},"example":{"attributes":{"name":"Margherita Pizza","restaurant":"Pizzeria Napoletana","cuisine":"Italian","rating":5}}}');(0,a.registerBlockType)(H.name,{...H,icon:_,edit:function({attributes:e,setAttributes:a}){const{name:t,restaurant:r,cuisine:n,photo:s,photoAlt:o,rating:l,notes:c,restaurantUrl:d,locality:u}=e,m=(0,f.useBlockProps)({className:"eat-card-block"}),{editPost:h}=(0,z.useDispatch)("core/editor"),_=(0,z.useSelect)(e=>{const a=e("core/editor").getEditedPostAttribute("indieblocks_kind");return a&&a.length>0?a[0]:null},[]);(0,N.useEffect)(()=>{_||wp.apiFetch({path:"/wp/v2/kind?slug=eat"}).then(e=>{e&&e.length>0&&h({indieblocks_kind:[e[0].id]})}).catch(()=>{})},[]),(0,N.useEffect)(()=>{const e={};void 0!==t&&(e._reactions_eat_name=t||""),void 0!==n&&(e._reactions_eat_cuisine=n||""),void 0!==r&&(e._reactions_eat_restaurant=r||""),void 0!==d&&(e._reactions_eat_restaurant_url=d||""),void 0!==s&&(e._reactions_eat_photo=s||""),void 0!==l&&(e._reactions_eat_rating=l||0),void 0!==u&&(e._reactions_eat_locality=u||""),Object.keys(e).length>0&&h({meta:e})},[t,n,r,d,s,l,u]);const p=e=>{e.stopPropagation(),a({photo:"",photoAlt:""})},b=(g=n,U.find(e=>e.value===g)||U[0]);var g;const x=U.map(e=>({label:`${e.emoji} ${e.label}`,value:e.value}));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(f.InspectorControls,{children:[(0,i.jsxs)(y.PanelBody,{title:(0,j.__)("Meal Details","reactions-for-indieweb"),initialOpen:!0,children:[(0,i.jsx)(y.TextControl,{label:(0,j.__)("Dish Name","reactions-for-indieweb"),value:t||"",onChange:e=>a({name:e}),placeholder:(0,j.__)("What did you eat?","reactions-for-indieweb")}),(0,i.jsx)(y.SelectControl,{label:(0,j.__)("Cuisine","reactions-for-indieweb"),value:n||"",options:x,onChange:e=>a({cuisine:e})}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("Restaurant","reactions-for-indieweb"),value:r||"",onChange:e=>a({restaurant:e})}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("Location","reactions-for-indieweb"),value:u||"",onChange:e=>a({locality:e}),placeholder:(0,j.__)("City or neighborhood","reactions-for-indieweb")}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("Restaurant URL","reactions-for-indieweb"),value:d||"",onChange:e=>a({restaurantUrl:e}),type:"url"}),(0,i.jsx)(y.RangeControl,{label:(0,j.__)("Rating","reactions-for-indieweb"),value:l||0,onChange:e=>a({rating:e}),min:0,max:5,step:1})]}),(0,i.jsx)(y.PanelBody,{title:(0,j.__)("Notes","reactions-for-indieweb"),initialOpen:!1,children:(0,i.jsx)(y.TextControl,{label:(0,j.__)("Notes","reactions-for-indieweb"),value:c||"",onChange:e=>a({notes:e}),placeholder:(0,j.__)("How was it?","reactions-for-indieweb")})})]}),(0,i.jsx)("div",{...m,children:(0,i.jsxs)("div",{className:"reactions-card",children:[(0,i.jsx)("div",{className:"reactions-card__media",children:(0,i.jsx)(f.MediaUploadCheck,{children:(0,i.jsx)(f.MediaUpload,{onSelect:e=>{a({photo:e.url,photoAlt:e.alt||t||(0,j.__)("Food photo","reactions-for-indieweb")})},allowedTypes:["image"],render:({open:e})=>(0,i.jsx)("button",{type:"button",className:"reactions-card__media-button",onClick:e,children:s?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("img",{src:s,alt:o||t,className:"reactions-card__image"}),(0,i.jsx)("button",{type:"button",className:"reactions-card__media-remove",onClick:p,"aria-label":(0,j.__)("Remove photo","reactions-for-indieweb"),children:"×"})]}):(0,i.jsxs)("div",{className:"reactions-card__media-placeholder",children:[(0,i.jsx)("span",{className:"reactions-card__media-icon",children:b.emoji}),(0,i.jsx)("span",{className:"reactions-card__media-text",children:(0,j.__)("Add Photo","reactions-for-indieweb")})]})})})})}),(0,i.jsxs)("div",{className:"reactions-card__content",children:[(0,i.jsx)("div",{className:"reactions-card__type-row",children:(0,i.jsx)("select",{className:"reactions-card__type-select",value:n||"",onChange:e=>a({cuisine:e.target.value}),children:U.map(e=>(0,i.jsxs)("option",{value:e.value,children:[e.emoji," ",e.label]},e.value))})}),(0,i.jsx)(f.RichText,{tagName:"h3",className:"reactions-card__title",value:t,onChange:e=>a({name:e}),placeholder:(0,j.__)("What did you eat?","reactions-for-indieweb")}),(0,i.jsx)(f.RichText,{tagName:"p",className:"reactions-card__subtitle",value:r,onChange:e=>a({restaurant:e}),placeholder:(0,j.__)("Restaurant name...","reactions-for-indieweb")}),(0,i.jsx)(f.RichText,{tagName:"p",className:"reactions-card__location",value:u,onChange:e=>a({locality:e}),placeholder:(0,j.__)("City or neighborhood...","reactions-for-indieweb")}),(0,i.jsx)("div",{className:"reactions-card__rating",children:(0,i.jsx)(k,{value:l,onChange:e=>a({rating:e}),max:5})}),(0,i.jsx)(f.RichText,{tagName:"p",className:"reactions-card__notes",value:c,onChange:e=>a({notes:e}),placeholder:(0,j.__)("How was it?","reactions-for-indieweb")})]})]})})]})},save:function({attributes:e}){const{name:a,restaurant:t,cuisine:r,photo:n,photoAlt:s,rating:o,ateAt:l,notes:c,restaurantUrl:d,locality:u,layout:m}=e,h=f.useBlockProps.save({className:`eat-card layout-${m}`});return(0,i.jsx)("div",{...h,children:(0,i.jsxs)("div",{className:"reactions-card h-food",children:[n&&(0,i.jsx)("div",{className:"reactions-card__media",children:(0,i.jsx)("img",{src:n,alt:s||a,className:"reactions-card__image u-photo",loading:"lazy"})}),(0,i.jsxs)("div",{className:"reactions-card__content",children:[r&&(0,i.jsx)("span",{className:"reactions-card__badge",children:r}),a&&(0,i.jsx)("h3",{className:"reactions-card__title p-name",children:d?(0,i.jsx)("a",{href:d,className:"u-url",target:"_blank",rel:"noopener noreferrer",children:a}):a}),t&&(0,i.jsxs)("p",{className:"reactions-card__subtitle p-location h-card",children:[(0,i.jsx)("span",{className:"p-name",children:t}),u&&(0,i.jsxs)("span",{className:"p-locality",children:[", ",u]})]}),!o||o<=0?null:(0,i.jsxs)("div",{className:"reactions-card__rating p-rating","aria-label":`Rating: ${o} out of 5`,children:[Array.from({length:5},(e,a)=>(0,i.jsx)("span",{className:"star "+(a<o?"filled":""),"aria-hidden":"true",children:"★"},a)),(0,i.jsxs)("span",{className:"reactions-card__rating-value",children:[o,"/5"]})]}),c&&(0,i.jsx)("p",{className:"reactions-card__notes p-content",children:c}),l&&(0,i.jsx)("time",{className:"reactions-card__timestamp dt-published",dateTime:new Date(l).toISOString(),children:new Date(l).toLocaleString()})]}),(0,i.jsx)("data",{className:"u-ate",value:a||"",hidden:!0})]})})}});const G=[{label:(0,j.__)("Select type...","reactions-for-indieweb"),value:"",emoji:"🥤"},{label:(0,j.__)("Coffee","reactions-for-indieweb"),value:"coffee",emoji:"☕"},{label:(0,j.__)("Tea","reactions-for-indieweb"),value:"tea",emoji:"🍵"},{label:(0,j.__)("Beer","reactions-for-indieweb"),value:"beer",emoji:"🍺"},{label:(0,j.__)("Wine","reactions-for-indieweb"),value:"wine",emoji:"🍷"},{label:(0,j.__)("Cocktail","reactions-for-indieweb"),value:"cocktail",emoji:"🍸"},{label:(0,j.__)("Juice","reactions-for-indieweb"),value:"juice",emoji:"🧃"},{label:(0,j.__)("Soda","reactions-for-indieweb"),value:"soda",emoji:"🥤"},{label:(0,j.__)("Smoothie","reactions-for-indieweb"),value:"smoothie",emoji:"🥤"},{label:(0,j.__)("Water","reactions-for-indieweb"),value:"water",emoji:"💧"},{label:(0,j.__)("Whiskey","reactions-for-indieweb"),value:"whiskey",emoji:"🥃"},{label:(0,j.__)("Other","reactions-for-indieweb"),value:"other",emoji:"🥤"}],E={coffee:"Coffee",tea:"Tea",beer:"Beer",wine:"Wine",cocktail:"Cocktail",juice:"Juice",soda:"Soda",smoothie:"Smoothie",water:"Water",other:"Drink"},W=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"reactions-indieweb/drink-card","version":"1.0.0","title":"Drink Card","category":"reactions-indieweb","description":"Display a drink you had with photo, type, brand, and rating.","keywords":["drink","beverage","coffee","beer","wine","cocktail"],"textdomain":"reactions-indieweb","attributes":{"name":{"type":"string","source":"html","selector":".drink-name"},"drinkType":{"type":"string","default":"coffee"},"brand":{"type":"string"},"photo":{"type":"string","source":"attribute","selector":".drink-photo img","attribute":"src"},"photoAlt":{"type":"string","source":"attribute","selector":".drink-photo img","attribute":"alt"},"rating":{"type":"number","default":0},"drankAt":{"type":"string"},"notes":{"type":"string","source":"html","selector":".drink-notes"},"venue":{"type":"string"},"venueUrl":{"type":"string"},"layout":{"type":"string","default":"horizontal"}},"supports":{"html":false,"align":["wide","full"],"color":{"background":true,"text":true,"gradients":true,"link":true},"spacing":{"margin":true,"padding":true,"blockGap":true},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontFamily":true,"__experimentalFontWeight":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true},"__experimentalBorder":{"color":true,"radius":true,"width":true,"style":true,"__experimentalDefaultControls":{"color":true,"radius":true,"width":true,"style":true}},"shadow":true,"dimensions":{"minHeight":true}},"example":{"attributes":{"name":"Flat White","drinkType":"coffee","brand":"Blue Bottle","rating":4}}}');(0,a.registerBlockType)(W.name,{...W,icon:p,edit:function({attributes:e,setAttributes:a}){const{name:t,drinkType:r,brand:n,photo:s,photoAlt:o,rating:l,notes:c,venue:d}=e,u=(0,f.useBlockProps)({className:"drink-card-block"}),{editPost:m}=(0,z.useDispatch)("core/editor"),h=(0,z.useSelect)(e=>{const a=e("core/editor").getEditedPostAttribute("indieblocks_kind");return a&&a.length>0?a[0]:null},[]);(0,N.useEffect)(()=>{h||wp.apiFetch({path:"/wp/v2/kind?slug=drink"}).then(e=>{e&&e.length>0&&m({indieblocks_kind:[e[0].id]})}).catch(()=>{})},[]),(0,N.useEffect)(()=>{const e={};void 0!==t&&(e._reactions_drink_name=t||""),void 0!==r&&(e._reactions_drink_type=r||""),void 0!==n&&(e._reactions_drink_brand=n||""),void 0!==s&&(e._reactions_drink_photo=s||""),void 0!==l&&(e._reactions_drink_rating=l||0),void 0!==d&&(e._reactions_drink_venue=d||""),Object.keys(e).length>0&&m({meta:e})},[t,r,n,s,l,d]);const _=e=>{e.stopPropagation(),a({photo:"",photoAlt:""})},p=(b=r,G.find(e=>e.value===b)||G[0]);var b;const g=G.map(e=>({label:`${e.emoji} ${e.label}`,value:e.value}));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(f.InspectorControls,{children:[(0,i.jsxs)(y.PanelBody,{title:(0,j.__)("Drink Details","reactions-for-indieweb"),initialOpen:!0,children:[(0,i.jsx)(y.TextControl,{label:(0,j.__)("Name","reactions-for-indieweb"),value:t||"",onChange:e=>a({name:e}),placeholder:(0,j.__)("What are you drinking?","reactions-for-indieweb")}),(0,i.jsx)(y.SelectControl,{label:(0,j.__)("Type","reactions-for-indieweb"),value:r||"",options:g,onChange:e=>a({drinkType:e})}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("Brand/Brewery","reactions-for-indieweb"),value:n||"",onChange:e=>a({brand:e})}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("Venue","reactions-for-indieweb"),value:d||"",onChange:e=>a({venue:e}),help:(0,j.__)("Where you had this drink","reactions-for-indieweb")}),(0,i.jsx)(y.RangeControl,{label:(0,j.__)("Rating","reactions-for-indieweb"),value:l||0,onChange:e=>a({rating:e}),min:0,max:5,step:1})]}),(0,i.jsx)(y.PanelBody,{title:(0,j.__)("Notes","reactions-for-indieweb"),initialOpen:!1,children:(0,i.jsx)(y.TextControl,{label:(0,j.__)("Tasting Notes","reactions-for-indieweb"),value:c||"",onChange:e=>a({notes:e}),placeholder:(0,j.__)("Your thoughts...","reactions-for-indieweb")})})]}),(0,i.jsx)("div",{...u,children:(0,i.jsxs)("div",{className:"reactions-card",children:[(0,i.jsx)("div",{className:"reactions-card__media",children:(0,i.jsx)(f.MediaUploadCheck,{children:(0,i.jsx)(f.MediaUpload,{onSelect:e=>{a({photo:e.url,photoAlt:e.alt||t||(0,j.__)("Drink photo","reactions-for-indieweb")})},allowedTypes:["image"],render:({open:e})=>(0,i.jsx)("button",{type:"button",className:"reactions-card__media-button",onClick:e,children:s?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("img",{src:s,alt:o||t,className:"reactions-card__image"}),(0,i.jsx)("button",{type:"button",className:"reactions-card__media-remove",onClick:_,"aria-label":(0,j.__)("Remove photo","reactions-for-indieweb"),children:"×"})]}):(0,i.jsxs)("div",{className:"reactions-card__media-placeholder",children:[(0,i.jsx)("span",{className:"reactions-card__media-icon",children:p.emoji}),(0,i.jsx)("span",{className:"reactions-card__media-text",children:(0,j.__)("Add Photo","reactions-for-indieweb")})]})})})})}),(0,i.jsxs)("div",{className:"reactions-card__content",children:[(0,i.jsx)("div",{className:"reactions-card__type-row",children:(0,i.jsx)("select",{className:"reactions-card__type-select",value:r||"",onChange:e=>a({drinkType:e.target.value}),children:G.map(e=>(0,i.jsxs)("option",{value:e.value,children:[e.emoji," ",e.label]},e.value))})}),(0,i.jsx)(f.RichText,{tagName:"h3",className:"reactions-card__title",value:t,onChange:e=>a({name:e}),placeholder:(0,j.__)("What are you drinking?","reactions-for-indieweb")}),(0,i.jsx)(f.RichText,{tagName:"p",className:"reactions-card__subtitle",value:n,onChange:e=>a({brand:e}),placeholder:(0,j.__)("Brand or brewery...","reactions-for-indieweb")}),(0,i.jsx)(f.RichText,{tagName:"p",className:"reactions-card__location",value:d,onChange:e=>a({venue:e}),placeholder:(0,j.__)("Where? (optional)","reactions-for-indieweb")}),(0,i.jsx)("div",{className:"reactions-card__rating",children:(0,i.jsx)(k,{value:l,onChange:e=>a({rating:e}),max:5})}),(0,i.jsx)(f.RichText,{tagName:"p",className:"reactions-card__notes",value:c,onChange:e=>a({notes:e}),placeholder:(0,j.__)("Tasting notes...","reactions-for-indieweb")})]})]})})]})},save:function({attributes:e}){const{name:a,drinkType:t,brand:r,photo:n,photoAlt:s,rating:o,drankAt:l,notes:c,venue:d,venueUrl:u,layout:m}=e,h=f.useBlockProps.save({className:`drink-card layout-${m}`});return(0,i.jsx)("div",{...h,children:(0,i.jsxs)("div",{className:"reactions-card h-food",children:[n&&(0,i.jsx)("div",{className:"reactions-card__media",children:(0,i.jsx)("img",{src:n,alt:s||a,className:"reactions-card__image u-photo",loading:"lazy"})}),(0,i.jsxs)("div",{className:"reactions-card__content",children:[(0,i.jsx)("span",{className:"reactions-card__badge",children:E[t]||t}),a&&(0,i.jsx)("h3",{className:"reactions-card__title p-name",children:u?(0,i.jsx)("a",{href:u,className:"u-url",target:"_blank",rel:"noopener noreferrer",children:a}):a}),r&&(0,i.jsx)("p",{className:"reactions-card__subtitle p-author h-card",children:(0,i.jsx)("span",{className:"p-name",children:r})}),d&&(0,i.jsx)("p",{className:"reactions-card__meta p-location",children:d}),!o||o<=0?null:(0,i.jsxs)("div",{className:"reactions-card__rating p-rating","aria-label":`Rating: ${o} out of 5`,children:[Array.from({length:5},(e,a)=>(0,i.jsx)("span",{className:"star "+(a<o?"filled":""),"aria-hidden":"true",children:"★"},a)),(0,i.jsxs)("span",{className:"reactions-card__rating-value",children:[o,"/5"]})]}),c&&(0,i.jsx)("p",{className:"reactions-card__notes p-content",children:c}),l&&(0,i.jsx)("time",{className:"reactions-card__timestamp dt-published",dateTime:new Date(l).toISOString(),children:new Date(l).toLocaleString()})]}),(0,i.jsx)("data",{className:"u-drank",value:a||"",hidden:!0})]})})}});const q=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"reactions-indieweb/favorite-card","version":"1.0.0","title":"Favorite Card","category":"reactions-indieweb","description":"Display something you favorited with title, URL, and description.","keywords":["favorite","star","like","bookmark"],"textdomain":"reactions-indieweb","attributes":{"title":{"type":"string","source":"html","selector":".favorite-title"},"url":{"type":"string"},"description":{"type":"string","source":"html","selector":".favorite-description"},"image":{"type":"string","source":"attribute","selector":".favorite-image img","attribute":"src"},"imageAlt":{"type":"string"},"author":{"type":"string"},"favoritedAt":{"type":"string"},"layout":{"type":"string","default":"horizontal"}},"supports":{"html":false,"align":["wide","full"],"color":{"background":true,"text":true,"gradients":true,"link":true},"spacing":{"margin":true,"padding":true,"blockGap":true},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontFamily":true,"__experimentalFontWeight":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true},"__experimentalBorder":{"color":true,"radius":true,"width":true,"style":true,"__experimentalDefaultControls":{"color":true,"radius":true,"width":true,"style":true}},"shadow":true,"dimensions":{"minHeight":true}},"example":{"attributes":{"title":"Amazing Blog Post","url":"https://example.com/post","author":"Jane Doe"}}}');(0,a.registerBlockType)(q.name,{...q,icon:b,edit:function({attributes:e,setAttributes:a}){const{title:t,url:r,description:n,image:s,imageAlt:o,author:l}=e,c=(0,f.useBlockProps)({className:"favorite-card-block"}),{editPost:d}=(0,z.useDispatch)("core/editor"),u=(0,z.useSelect)(e=>{const a=e("core/editor").getEditedPostAttribute("indieblocks_kind");return a&&a.length>0?a[0]:null},[]);(0,N.useEffect)(()=>{u||wp.apiFetch({path:"/wp/v2/kind?slug=favorite"}).then(e=>{e&&e.length>0&&d({indieblocks_kind:[e[0].id]})}).catch(()=>{})},[]),(0,N.useEffect)(()=>{const e={};void 0!==t&&(e._reactions_favorite_title=t||""),void 0!==r&&(e._reactions_favorite_url=r||""),void 0!==l&&(e._reactions_favorite_author=l||""),void 0!==s&&(e._reactions_favorite_image=s||""),Object.keys(e).length>0&&d({meta:e})},[t,r,l,s]);const m=e=>{e.stopPropagation(),a({image:"",imageAlt:""})};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(f.InspectorControls,{children:[(0,i.jsxs)(y.PanelBody,{title:(0,j.__)("Favorite Details","reactions-for-indieweb"),initialOpen:!0,children:[(0,i.jsx)(y.TextControl,{label:(0,j.__)("Title","reactions-for-indieweb"),value:t||"",onChange:e=>a({title:e}),placeholder:(0,j.__)("What did you favorite?","reactions-for-indieweb")}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("URL","reactions-for-indieweb"),value:r||"",onChange:e=>a({url:e}),type:"url",placeholder:(0,j.__)("https://...","reactions-for-indieweb")}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("Author","reactions-for-indieweb"),value:l||"",onChange:e=>a({author:e}),placeholder:(0,j.__)("Original author","reactions-for-indieweb")})]}),(0,i.jsx)(y.PanelBody,{title:(0,j.__)("Description","reactions-for-indieweb"),initialOpen:!1,children:(0,i.jsx)(y.TextControl,{label:(0,j.__)("Description","reactions-for-indieweb"),value:n||"",onChange:e=>a({description:e}),placeholder:(0,j.__)("Why did you favorite this?","reactions-for-indieweb")})})]}),(0,i.jsx)("div",{...c,children:(0,i.jsxs)("div",{className:"reactions-card",children:[(0,i.jsx)("div",{className:"reactions-card__media",children:(0,i.jsx)(f.MediaUploadCheck,{children:(0,i.jsx)(f.MediaUpload,{onSelect:e=>{a({image:e.url,imageAlt:e.alt||t||(0,j.__)("Favorite image","reactions-for-indieweb")})},allowedTypes:["image"],render:({open:e})=>(0,i.jsx)("button",{type:"button",className:"reactions-card__media-button",onClick:e,children:s?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("img",{src:s,alt:o||t,className:"reactions-card__image"}),(0,i.jsx)("button",{type:"button",className:"reactions-card__media-remove",onClick:m,"aria-label":(0,j.__)("Remove image","reactions-for-indieweb"),children:"×"})]}):(0,i.jsxs)("div",{className:"reactions-card__media-placeholder",children:[(0,i.jsx)("span",{className:"reactions-card__media-icon",children:"⭐"}),(0,i.jsx)("span",{className:"reactions-card__media-text",children:(0,j.__)("Add Image","reactions-for-indieweb")})]})})})})}),(0,i.jsxs)("div",{className:"reactions-card__content",children:[(0,i.jsxs)("span",{className:"reactions-card__badge",children:["★ ",(0,j.__)("Favorited","reactions-for-indieweb")]}),(0,i.jsx)(f.RichText,{tagName:"h3",className:"reactions-card__title",value:t,onChange:e=>a({title:e}),placeholder:(0,j.__)("What did you favorite?","reactions-for-indieweb")}),(0,i.jsxs)("div",{className:"reactions-card__input-row",children:[(0,i.jsx)("span",{className:"reactions-card__input-icon",children:"🔗"}),(0,i.jsx)("input",{type:"url",className:"reactions-card__input reactions-card__input--url",value:r||"",onChange:e=>a({url:e.target.value}),placeholder:(0,j.__)("https://example.com/...","reactions-for-indieweb")})]}),(0,i.jsx)(f.RichText,{tagName:"p",className:"reactions-card__subtitle",value:l,onChange:e=>a({author:e}),placeholder:(0,j.__)("By whom?","reactions-for-indieweb")}),(0,i.jsx)(f.RichText,{tagName:"p",className:"reactions-card__notes",value:n,onChange:e=>a({description:e}),placeholder:(0,j.__)("Why did you favorite this?","reactions-for-indieweb")})]})]})})]})},save:function({attributes:e}){const{title:a,url:t,description:r,image:n,imageAlt:s,author:o,favoritedAt:l,layout:c}=e,d=f.useBlockProps.save({className:`favorite-card layout-${c}`});return(0,i.jsx)("div",{...d,children:(0,i.jsxs)("div",{className:"reactions-card h-cite",children:[n&&(0,i.jsx)("div",{className:"reactions-card__media",children:(0,i.jsx)("img",{src:n,alt:s||a,className:"reactions-card__image u-photo",loading:"lazy"})}),(0,i.jsxs)("div",{className:"reactions-card__content",children:[(0,i.jsx)("span",{className:"reactions-card__badge",children:"★ Favorited"}),a&&(0,i.jsx)("h3",{className:"reactions-card__title p-name",children:t?(0,i.jsx)("a",{href:t,className:"u-url u-favorite-of",target:"_blank",rel:"noopener noreferrer",children:a}):a}),o&&(0,i.jsx)("p",{className:"reactions-card__subtitle p-author h-card",children:(0,i.jsx)("span",{className:"p-name",children:o})}),r&&(0,i.jsx)("p",{className:"reactions-card__notes p-content",children:r}),l&&(0,i.jsx)("time",{className:"reactions-card__timestamp dt-published",dateTime:new Date(l).toISOString(),children:new Date(l).toLocaleString()})]})]})})}});const Y=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"reactions-indieweb/jam-card","version":"1.0.0","title":"Jam Card","category":"reactions-indieweb","description":"Display a song you\'re jamming to with cover art and artist.","keywords":["jam","music","song","currently playing"],"textdomain":"reactions-indieweb","attributes":{"title":{"type":"string","source":"html","selector":".jam-title"},"artist":{"type":"string"},"album":{"type":"string"},"cover":{"type":"string","source":"attribute","selector":".jam-cover img","attribute":"src"},"coverAlt":{"type":"string"},"url":{"type":"string"},"note":{"type":"string","source":"html","selector":".jam-note"},"jammedAt":{"type":"string"},"layout":{"type":"string","default":"horizontal"}},"supports":{"html":false,"align":["wide","full"],"color":{"background":true,"text":true,"gradients":true,"link":true},"spacing":{"margin":true,"padding":true,"blockGap":true},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontFamily":true,"__experimentalFontWeight":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true},"__experimentalBorder":{"color":true,"radius":true,"width":true,"style":true,"__experimentalDefaultControls":{"color":true,"radius":true,"width":true,"style":true}},"shadow":true,"dimensions":{"minHeight":true}},"example":{"attributes":{"title":"Bohemian Rhapsody","artist":"Queen","album":"A Night at the Opera"}}}');(0,a.registerBlockType)(Y.name,{...Y,icon:g,edit:function({attributes:e,setAttributes:a}){const{title:t,artist:r,album:n,cover:s,coverAlt:o,url:l,note:c}=e,[d,u]=(0,N.useState)(!1),m=(0,f.useBlockProps)({className:"jam-card-block"}),{editPost:h}=(0,z.useDispatch)("core/editor"),_=(0,z.useSelect)(e=>{const a=e("core/editor").getEditedPostAttribute("indieblocks_kind");return a&&a.length>0?a[0]:null},[]);(0,N.useEffect)(()=>{_||wp.apiFetch({path:"/wp/v2/kind?slug=jam"}).then(e=>{e&&e.length>0&&h({indieblocks_kind:[e[0].id]})}).catch(()=>{})},[]),(0,N.useEffect)(()=>{const e={};void 0!==t&&(e._reactions_jam_title=t||""),void 0!==r&&(e._reactions_jam_artist=r||""),void 0!==n&&(e._reactions_jam_album=n||""),void 0!==s&&(e._reactions_jam_cover=s||""),void 0!==l&&(e._reactions_jam_url=l||""),Object.keys(e).length>0&&h({meta:e})},[t,r,n,s,l]);const p=e=>{const t=e.track||e.title||e.name||"";a({title:t,artist:e.artist||"",album:e.album||"",cover:e.cover||e.image||"",coverAlt:`${t} by ${e.artist||""}`}),u(!1)},b=e=>{e.stopPropagation(),a({cover:"",coverAlt:""})};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(f.InspectorControls,{children:[(0,i.jsxs)(y.PanelBody,{title:(0,j.__)("Search Music","reactions-for-indieweb"),initialOpen:!t,children:[(0,i.jsx)(S,{type:"music",placeholder:(0,j.__)("Search for a song...","reactions-for-indieweb"),onSelect:p}),(0,i.jsx)("p",{className:"components-base-control__help",style:{marginTop:"8px"},children:(0,j.__)("Search MusicBrainz to auto-fill song details.","reactions-for-indieweb")})]}),(0,i.jsxs)(y.PanelBody,{title:(0,j.__)("Song Details","reactions-for-indieweb"),initialOpen:!0,children:[(0,i.jsx)(y.TextControl,{label:(0,j.__)("Song Title","reactions-for-indieweb"),value:t||"",onChange:e=>a({title:e}),placeholder:(0,j.__)("Song name","reactions-for-indieweb")}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("Artist","reactions-for-indieweb"),value:r||"",onChange:e=>a({artist:e}),placeholder:(0,j.__)("Artist name","reactions-for-indieweb")}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("Album","reactions-for-indieweb"),value:n||"",onChange:e=>a({album:e}),placeholder:(0,j.__)("Album name","reactions-for-indieweb")}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("Listen URL","reactions-for-indieweb"),value:l||"",onChange:e=>a({url:e}),type:"url",help:(0,j.__)("Link to Spotify, Apple Music, etc.","reactions-for-indieweb")})]}),(0,i.jsx)(y.PanelBody,{title:(0,j.__)("Note","reactions-for-indieweb"),initialOpen:!1,children:(0,i.jsx)(y.TextControl,{label:(0,j.__)("Note","reactions-for-indieweb"),value:c||"",onChange:e=>a({note:e}),placeholder:(0,j.__)("Why are you jamming to this?","reactions-for-indieweb")})})]}),(0,i.jsx)("div",{...m,children:(0,i.jsxs)("div",{className:"reactions-card-wrapper",children:[d&&(0,i.jsxs)("div",{className:"reactions-card__search-bar",children:[(0,i.jsx)(S,{type:"music",placeholder:(0,j.__)("Search for a song...","reactions-for-indieweb"),onSelect:p}),(0,i.jsx)("button",{type:"button",className:"reactions-card__search-close",onClick:()=>u(!1),children:"×"})]}),(0,i.jsxs)("div",{className:"reactions-card",children:[(0,i.jsx)("div",{className:"reactions-card__media",children:(0,i.jsx)(f.MediaUploadCheck,{children:(0,i.jsx)(f.MediaUpload,{onSelect:e=>{a({cover:e.url,coverAlt:e.alt||`${t} by ${r}`})},allowedTypes:["image"],render:({open:e})=>(0,i.jsx)("button",{type:"button",className:"reactions-card__media-button",onClick:e,children:s?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("img",{src:s,alt:o||t,className:"reactions-card__image"}),(0,i.jsx)("button",{type:"button",className:"reactions-card__media-remove",onClick:b,"aria-label":(0,j.__)("Remove cover","reactions-for-indieweb"),children:"×"})]}):(0,i.jsxs)("div",{className:"reactions-card__media-placeholder",children:[(0,i.jsx)("span",{className:"reactions-card__media-icon",children:"🎵"}),(0,i.jsx)("span",{className:"reactions-card__media-text",children:(0,j.__)("Add Cover","reactions-for-indieweb")})]})})})})}),(0,i.jsxs)("div",{className:"reactions-card__content",children:[(0,i.jsxs)("div",{className:"reactions-card__header-row",children:[(0,i.jsxs)("span",{className:"reactions-card__badge",children:["🎵 ",(0,j.__)("Now Playing","reactions-for-indieweb")]}),(0,i.jsx)("button",{type:"button",className:"reactions-card__action-button",onClick:()=>u(!0),title:(0,j.__)("Search for music","reactions-for-indieweb"),children:"🔍"})]}),(0,i.jsx)(f.RichText,{tagName:"h3",className:"reactions-card__title",value:t,onChange:e=>a({title:e}),placeholder:(0,j.__)("What song are you jamming to?","reactions-for-indieweb")}),(0,i.jsx)(f.RichText,{tagName:"p",className:"reactions-card__subtitle",value:r,onChange:e=>a({artist:e}),placeholder:(0,j.__)("Artist name...","reactions-for-indieweb")}),(0,i.jsx)(f.RichText,{tagName:"p",className:"reactions-card__location",value:n,onChange:e=>a({album:e}),placeholder:(0,j.__)("Album name...","reactions-for-indieweb")}),(0,i.jsx)(f.RichText,{tagName:"p",className:"reactions-card__notes",value:c,onChange:e=>a({note:e}),placeholder:(0,j.__)("Why are you jamming to this?","reactions-for-indieweb")})]})]})]})})]})},save:function({attributes:e}){const{title:a,artist:t,album:r,cover:n,coverAlt:s,url:o,note:l,jammedAt:c,layout:d}=e,u=f.useBlockProps.save({className:`jam-card layout-${d}`});return(0,i.jsx)("div",{...u,children:(0,i.jsxs)("div",{className:"reactions-card h-cite",children:[n&&(0,i.jsx)("div",{className:"reactions-card__media",children:(0,i.jsx)("img",{src:n,alt:s||`${a} by ${t}`,className:"reactions-card__image u-photo",loading:"lazy"})}),(0,i.jsxs)("div",{className:"reactions-card__content",children:[(0,i.jsx)("span",{className:"reactions-card__badge",children:"🎵 Now Playing"}),a&&(0,i.jsx)("h3",{className:"reactions-card__title p-name",children:o?(0,i.jsx)("a",{href:o,className:"u-url u-jam-of",target:"_blank",rel:"noopener noreferrer",children:a}):a}),t&&(0,i.jsx)("p",{className:"reactions-card__subtitle p-author h-card",children:(0,i.jsx)("span",{className:"p-name",children:t})}),r&&(0,i.jsx)("p",{className:"reactions-card__meta",children:r}),l&&(0,i.jsx)("p",{className:"reactions-card__notes p-content",children:l}),c&&(0,i.jsx)("time",{className:"reactions-card__timestamp dt-published",dateTime:new Date(c).toISOString(),children:new Date(c).toLocaleString()})]})]})})}});const J=[{label:(0,j.__)("Item","reactions-for-indieweb"),value:"item",emoji:"🛍️"},{label:(0,j.__)("Experience","reactions-for-indieweb"),value:"experience",emoji:"✨"},{label:(0,j.__)("Book","reactions-for-indieweb"),value:"book",emoji:"📚"},{label:(0,j.__)("Game","reactions-for-indieweb"),value:"game",emoji:"🎮"},{label:(0,j.__)("Movie/Show","reactions-for-indieweb"),value:"media",emoji:"🎬"},{label:(0,j.__)("Travel","reactions-for-indieweb"),value:"travel",emoji:"✈️"},{label:(0,j.__)("Tech","reactions-for-indieweb"),value:"tech",emoji:"💻"},{label:(0,j.__)("Food","reactions-for-indieweb"),value:"food",emoji:"🍕"},{label:(0,j.__)("Other","reactions-for-indieweb"),value:"other",emoji:"🎁"}],K=[{label:(0,j.__)("Low","reactions-for-indieweb"),value:"low"},{label:(0,j.__)("Medium","reactions-for-indieweb"),value:"medium"},{label:(0,j.__)("High","reactions-for-indieweb"),value:"high"}],Q={item:"Item",experience:"Experience",book:"Book",game:"Game",media:"Media",travel:"Travel",other:"Other"},X={low:"Low",medium:"Medium",high:"High"},Z=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"reactions-indieweb/wish-card","version":"1.0.0","title":"Wish Card","category":"reactions-indieweb","description":"Display something you wish for or want with image and reason.","keywords":["wish","want","wishlist","gift"],"textdomain":"reactions-indieweb","attributes":{"title":{"type":"string","source":"html","selector":".wish-title"},"wishType":{"type":"string","default":"item"},"url":{"type":"string"},"image":{"type":"string","source":"attribute","selector":".wish-image img","attribute":"src"},"imageAlt":{"type":"string"},"price":{"type":"string"},"reason":{"type":"string","source":"html","selector":".wish-reason"},"priority":{"type":"string","default":"medium"},"wishedAt":{"type":"string"},"layout":{"type":"string","default":"horizontal"}},"supports":{"html":false,"align":["wide","full"],"color":{"background":true,"text":true,"gradients":true,"link":true},"spacing":{"margin":true,"padding":true,"blockGap":true},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontFamily":true,"__experimentalFontWeight":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true},"__experimentalBorder":{"color":true,"radius":true,"width":true,"style":true,"__experimentalDefaultControls":{"color":true,"radius":true,"width":true,"style":true}},"shadow":true,"dimensions":{"minHeight":true}},"example":{"attributes":{"title":"Mechanical Keyboard","wishType":"item","priority":"high"}}}');(0,a.registerBlockType)(Z.name,{...Z,icon:x,edit:function({attributes:e,setAttributes:a}){const{title:t,wishType:r,url:n,image:s,imageAlt:o,price:l,reason:c,priority:d}=e,u=(0,f.useBlockProps)({className:"wish-card-block"}),{editPost:m}=(0,z.useDispatch)("core/editor"),h=(0,z.useSelect)(e=>{const a=e("core/editor").getEditedPostAttribute("indieblocks_kind");return a&&a.length>0?a[0]:null},[]);(0,N.useEffect)(()=>{h||wp.apiFetch({path:"/wp/v2/kind?slug=wish"}).then(e=>{e&&e.length>0&&m({indieblocks_kind:[e[0].id]})}).catch(()=>{})},[]),(0,N.useEffect)(()=>{const e={};void 0!==t&&(e._reactions_wish_title=t||""),void 0!==r&&(e._reactions_wish_type=r||""),void 0!==n&&(e._reactions_wish_url=n||""),void 0!==l&&(e._reactions_wish_price=l||""),void 0!==d&&(e._reactions_wish_priority=d||""),void 0!==s&&(e._reactions_wish_image=s||""),Object.keys(e).length>0&&m({meta:e})},[t,r,n,l,d,s]);const _=e=>{e.stopPropagation(),a({image:"",imageAlt:""})},p=(b=r,J.find(e=>e.value===b)||J[0]);var b;const g=J.map(e=>({label:`${e.emoji} ${e.label}`,value:e.value})),x=K.map(e=>({label:e.label,value:e.value}));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(f.InspectorControls,{children:[(0,i.jsxs)(y.PanelBody,{title:(0,j.__)("Wish Details","reactions-for-indieweb"),initialOpen:!0,children:[(0,i.jsx)(y.TextControl,{label:(0,j.__)("Title","reactions-for-indieweb"),value:t||"",onChange:e=>a({title:e}),placeholder:(0,j.__)("What do you wish for?","reactions-for-indieweb")}),(0,i.jsx)(y.SelectControl,{label:(0,j.__)("Type","reactions-for-indieweb"),value:r||"item",options:g,onChange:e=>a({wishType:e})}),(0,i.jsx)(y.SelectControl,{label:(0,j.__)("Priority","reactions-for-indieweb"),value:d||"medium",options:x,onChange:e=>a({priority:e})}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("Price","reactions-for-indieweb"),value:l||"",onChange:e=>a({price:e}),placeholder:(0,j.__)("$0.00","reactions-for-indieweb")}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("Product URL","reactions-for-indieweb"),value:n||"",onChange:e=>a({url:e}),type:"url",help:(0,j.__)("Link to the product or item","reactions-for-indieweb")})]}),(0,i.jsx)(y.PanelBody,{title:(0,j.__)("Reason","reactions-for-indieweb"),initialOpen:!1,children:(0,i.jsx)(y.TextControl,{label:(0,j.__)("Reason","reactions-for-indieweb"),value:c||"",onChange:e=>a({reason:e}),placeholder:(0,j.__)("Why do you want this?","reactions-for-indieweb")})})]}),(0,i.jsx)("div",{...u,children:(0,i.jsxs)("div",{className:"reactions-card",children:[(0,i.jsx)("div",{className:"reactions-card__media",children:(0,i.jsx)(f.MediaUploadCheck,{children:(0,i.jsx)(f.MediaUpload,{onSelect:e=>{a({image:e.url,imageAlt:e.alt||t||(0,j.__)("Wish image","reactions-for-indieweb")})},allowedTypes:["image"],render:({open:e})=>(0,i.jsx)("button",{type:"button",className:"reactions-card__media-button",onClick:e,children:s?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("img",{src:s,alt:o||t,className:"reactions-card__image"}),(0,i.jsx)("button",{type:"button",className:"reactions-card__media-remove",onClick:_,"aria-label":(0,j.__)("Remove image","reactions-for-indieweb"),children:"×"})]}):(0,i.jsxs)("div",{className:"reactions-card__media-placeholder",children:[(0,i.jsx)("span",{className:"reactions-card__media-icon",children:p.emoji}),(0,i.jsx)("span",{className:"reactions-card__media-text",children:(0,j.__)("Add Image","reactions-for-indieweb")})]})})})})}),(0,i.jsxs)("div",{className:"reactions-card__content",children:[(0,i.jsxs)("div",{className:"reactions-card__badges-row",children:[(0,i.jsx)("select",{className:"reactions-card__type-select",value:r||"item",onChange:e=>a({wishType:e.target.value}),children:J.map(e=>(0,i.jsxs)("option",{value:e.value,children:[e.emoji," ",e.label]},e.value))}),(0,i.jsx)("select",{className:"reactions-card__type-select",value:d||"medium",onChange:e=>a({priority:e.target.value}),children:K.map(e=>(0,i.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,i.jsx)(f.RichText,{tagName:"h3",className:"reactions-card__title",value:t,onChange:e=>a({title:e}),placeholder:(0,j.__)("What do you wish for?","reactions-for-indieweb")}),(0,i.jsxs)("div",{className:"reactions-card__input-row",children:[(0,i.jsx)("span",{className:"reactions-card__input-icon",children:"💰"}),(0,i.jsx)("input",{type:"text",className:"reactions-card__input reactions-card__input--price",value:l||"",onChange:e=>a({price:e.target.value}),placeholder:(0,j.__)("$0.00","reactions-for-indieweb")})]}),(0,i.jsxs)("div",{className:"reactions-card__input-row",children:[(0,i.jsx)("span",{className:"reactions-card__input-icon",children:"🔗"}),(0,i.jsx)("input",{type:"url",className:"reactions-card__input reactions-card__input--url",value:n||"",onChange:e=>a({url:e.target.value}),placeholder:(0,j.__)("https://...","reactions-for-indieweb")})]}),(0,i.jsx)(f.RichText,{tagName:"p",className:"reactions-card__notes",value:c,onChange:e=>a({reason:e}),placeholder:(0,j.__)("Why do you want this?","reactions-for-indieweb")})]})]})})]})},save:function({attributes:e}){const{title:a,wishType:t,url:r,image:n,imageAlt:s,price:o,reason:l,priority:c,wishedAt:d,layout:u}=e,m=f.useBlockProps.save({className:`wish-card layout-${u} priority-${c}`});return(0,i.jsx)("div",{...m,children:(0,i.jsxs)("div",{className:"reactions-card h-cite",children:[n&&(0,i.jsx)("div",{className:"reactions-card__media",children:(0,i.jsx)("img",{src:n,alt:s||a,className:"reactions-card__image u-photo",loading:"lazy"})}),(0,i.jsxs)("div",{className:"reactions-card__content",children:[(0,i.jsxs)("div",{className:"reactions-card__badges",children:[(0,i.jsx)("span",{className:"reactions-card__badge",children:Q[t]||t}),(0,i.jsx)("span",{className:`reactions-card__badge reactions-card__badge--${c}`,children:X[c]})]}),a&&(0,i.jsx)("h3",{className:"reactions-card__title p-name",children:r?(0,i.jsx)("a",{href:r,className:"u-url u-wish-of",target:"_blank",rel:"noopener noreferrer",children:a}):a}),o&&(0,i.jsx)("p",{className:"reactions-card__subtitle",children:o}),l&&(0,i.jsx)("p",{className:"reactions-card__notes p-content",children:l}),d&&(0,i.jsx)("time",{className:"reactions-card__timestamp dt-published",dateTime:new Date(d).toISOString(),children:new Date(d).toLocaleString()})]})]})})}});const ee={"😊":(0,j.__)("smiling face with smiling eyes","reactions-for-indieweb"),"😃":(0,j.__)("grinning face with big eyes","reactions-for-indieweb"),"😄":(0,j.__)("grinning face with smiling eyes","reactions-for-indieweb"),"🥳":(0,j.__)("partying face","reactions-for-indieweb"),"😎":(0,j.__)("smiling face with sunglasses","reactions-for-indieweb"),"🤗":(0,j.__)("smiling face with open hands","reactions-for-indieweb"),"😌":(0,j.__)("relieved face","reactions-for-indieweb"),"🥰":(0,j.__)("smiling face with hearts","reactions-for-indieweb"),"😐":(0,j.__)("neutral face","reactions-for-indieweb"),"🤔":(0,j.__)("thinking face","reactions-for-indieweb"),"😑":(0,j.__)("expressionless face","reactions-for-indieweb"),"🙄":(0,j.__)("face with rolling eyes","reactions-for-indieweb"),"😶":(0,j.__)("face without mouth","reactions-for-indieweb"),"😏":(0,j.__)("smirking face","reactions-for-indieweb"),"😢":(0,j.__)("crying face","reactions-for-indieweb"),"😭":(0,j.__)("loudly crying face","reactions-for-indieweb"),"😔":(0,j.__)("pensive face","reactions-for-indieweb"),"😞":(0,j.__)("disappointed face","reactions-for-indieweb"),"🥺":(0,j.__)("pleading face","reactions-for-indieweb"),"😿":(0,j.__)("crying cat","reactions-for-indieweb"),"😡":(0,j.__)("enraged face","reactions-for-indieweb"),"😤":(0,j.__)("face with steam from nose","reactions-for-indieweb"),"🤬":(0,j.__)("face with symbols on mouth","reactions-for-indieweb"),"💢":(0,j.__)("anger symbol","reactions-for-indieweb"),"😠":(0,j.__)("angry face","reactions-for-indieweb"),"😴":(0,j.__)("sleeping face","reactions-for-indieweb"),"🥱":(0,j.__)("yawning face","reactions-for-indieweb"),"😪":(0,j.__)("sleepy face","reactions-for-indieweb"),"😩":(0,j.__)("weary face","reactions-for-indieweb"),"🤒":(0,j.__)("face with thermometer","reactions-for-indieweb"),"😰":(0,j.__)("anxious face with sweat","reactions-for-indieweb"),"😨":(0,j.__)("fearful face","reactions-for-indieweb"),"😱":(0,j.__)("face screaming in fear","reactions-for-indieweb"),"🫣":(0,j.__)("face with peeking eye","reactions-for-indieweb"),"😬":(0,j.__)("grimacing face","reactions-for-indieweb")},ae=[{name:(0,j.__)("Happy","reactions-for-indieweb"),emojis:["😊","😃","😄","🥳","😎","🤗","😌","🥰"]},{name:(0,j.__)("Neutral","reactions-for-indieweb"),emojis:["😐","🤔","😑","🙄","😶","😏"]},{name:(0,j.__)("Sad","reactions-for-indieweb"),emojis:["😢","😭","😔","😞","🥺","😿"]},{name:(0,j.__)("Angry","reactions-for-indieweb"),emojis:["😡","😤","🤬","💢","😠"]},{name:(0,j.__)("Tired","reactions-for-indieweb"),emojis:["😴","🥱","😪","😩","🤒"]},{name:(0,j.__)("Anxious","reactions-for-indieweb"),emojis:["😰","😨","😱","🫣","😬"]}],te=Object.entries(ee).map(([e,a])=>({label:`${e} ${a}`,value:e})),ie=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"reactions-indieweb/mood-card","version":"1.0.0","title":"Mood Card","category":"reactions-indieweb","description":"Display your current mood with emoji and note.","keywords":["mood","feeling","emotion","status"],"textdomain":"reactions-indieweb","attributes":{"mood":{"type":"string","source":"html","selector":".mood-text"},"emoji":{"type":"string","default":""},"note":{"type":"string","source":"html","selector":".mood-note"},"intensity":{"type":"number","default":3},"moodAt":{"type":"string"},"layout":{"type":"string","default":"compact"}},"supports":{"html":false,"align":["wide","full"],"color":{"background":true,"text":true,"gradients":true,"link":true},"spacing":{"margin":true,"padding":true,"blockGap":true},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontFamily":true,"__experimentalFontWeight":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true},"__experimentalBorder":{"color":true,"radius":true,"width":true,"style":true,"__experimentalDefaultControls":{"color":true,"radius":true,"width":true,"style":true}},"shadow":true,"dimensions":{"minHeight":true}},"example":{"attributes":{"mood":"Happy","emoji":"😊","intensity":4}}}');(0,a.registerBlockType)(ie.name,{...ie,icon:v,edit:function({attributes:e,setAttributes:a}){const{mood:t,emoji:r,note:n,intensity:s}=e,o=(0,f.useBlockProps)({className:"mood-card-block"}),{editPost:l}=(0,z.useDispatch)("core/editor"),{currentKind:c,postMeta:d}=(0,z.useSelect)(e=>{const a=e("core/editor").getEditedPostAttribute("indieblocks_kind"),t=e("core/editor").getEditedPostAttribute("meta")||{};return{currentKind:a&&a.length>0?a[0]:null,postMeta:t}},[]);return(0,N.useEffect)(()=>{c||wp.apiFetch({path:"/wp/v2/kind?slug=mood"}).then(e=>{e&&e.length>0&&l({indieblocks_kind:[e[0].id]})}).catch(()=>{})},[]),(0,N.useEffect)(()=>{var e,i,n;const o={},l=null!==(e=d._reactions_mood_label)&&void 0!==e?e:"",c=null!==(i=d._reactions_mood_emoji)&&void 0!==i?i:"",u=null!==(n=d._reactions_mood_rating)&&void 0!==n?n:3;l!==(t||"")&&(o.mood=l),c!==(r||"")&&(o.emoji=c),u!==(s||3)&&(o.intensity=u),Object.keys(o).length>0&&a(o)},[d._reactions_mood_label,d._reactions_mood_emoji,d._reactions_mood_rating]),(0,N.useEffect)(()=>{var e,a,i;const n={};(t||"")!==(null!==(e=d._reactions_mood_label)&&void 0!==e?e:"")&&(n._reactions_mood_label=t||""),(r||"")!==(null!==(a=d._reactions_mood_emoji)&&void 0!==a?a:"")&&(n._reactions_mood_emoji=r||""),(s||3)!==(null!==(i=d._reactions_mood_rating)&&void 0!==i?i:3)&&(n._reactions_mood_rating=s||3),Object.keys(n).length>0&&l({meta:n})},[t,r,s]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(f.InspectorControls,{children:[(0,i.jsxs)(y.PanelBody,{title:(0,j.__)("Mood Details","reactions-for-indieweb"),initialOpen:!0,children:[(0,i.jsx)(y.TextControl,{label:(0,j.__)("Mood","reactions-for-indieweb"),value:t||"",onChange:e=>a({mood:e}),placeholder:(0,j.__)("How are you feeling?","reactions-for-indieweb")}),(0,i.jsx)(y.SelectControl,{label:(0,j.__)("Emoji","reactions-for-indieweb"),value:r||"😊",options:te,onChange:e=>a({emoji:e})}),(0,i.jsx)(y.RangeControl,{label:(0,j.__)("Intensity","reactions-for-indieweb"),value:s||3,onChange:e=>a({intensity:e}),min:1,max:5,marks:[{value:1,label:"1"},{value:3,label:"3"},{value:5,label:"5"}]})]}),(0,i.jsx)(y.PanelBody,{title:(0,j.__)("Note","reactions-for-indieweb"),initialOpen:!1,children:(0,i.jsx)(y.TextControl,{label:(0,j.__)("Note","reactions-for-indieweb"),value:n||"",onChange:e=>a({note:e}),placeholder:(0,j.__)("What's on your mind?","reactions-for-indieweb")})})]}),(0,i.jsx)("div",{...o,children:(0,i.jsxs)("div",{className:"reactions-card reactions-card--mood",children:[(0,i.jsxs)("div",{className:"reactions-card__emoji-section",children:[(0,i.jsx)("div",{className:"reactions-card__emoji-display",children:(0,i.jsx)("span",{className:"reactions-card__emoji-large",children:r||"😊"})}),(0,i.jsx)("div",{className:"reactions-card__intensity-dots",children:Array.from({length:5},(e,t)=>(0,i.jsx)("button",{type:"button",className:"reactions-card__intensity-dot "+(t<(s||3)?"filled":""),onClick:()=>a({intensity:t+1}),"aria-label":`${(0,j.__)("Set intensity to","reactions-for-indieweb")} ${t+1}`},t))}),(0,i.jsx)("div",{className:"reactions-card__emoji-picker",children:ae.map(e=>(0,i.jsx)("div",{className:"reactions-card__emoji-category",children:e.emojis.map(e=>(0,i.jsx)("button",{type:"button",className:"reactions-card__emoji-btn "+(r===e?"selected":""),onClick:()=>{a({emoji:e})},children:e},e))},e.name))})]}),(0,i.jsxs)("div",{className:"reactions-card__content",children:[(0,i.jsxs)("span",{className:"reactions-card__badge",children:["😊 ",(0,j.__)("Feeling","reactions-for-indieweb")]}),(0,i.jsx)(f.RichText,{tagName:"h3",className:"reactions-card__title",value:t,onChange:e=>a({mood:e}),placeholder:(0,j.__)("How are you feeling?","reactions-for-indieweb")}),(0,i.jsx)(f.RichText,{tagName:"p",className:"reactions-card__notes",value:n,onChange:e=>a({note:e}),placeholder:(0,j.__)("What's on your mind?","reactions-for-indieweb")})]})]})})]})},save:function({attributes:e}){const{mood:a,emoji:t,note:r,intensity:n,moodAt:s,layout:o}=e,l=f.useBlockProps.save({className:`mood-card layout-${o}`});return(0,i.jsx)("div",{...l,children:(0,i.jsxs)("div",{className:"reactions-card reactions-card--mood h-entry",children:[(0,i.jsxs)("div",{className:"reactions-card__emoji-section",children:[(0,i.jsx)("div",{className:"reactions-card__emoji-display",children:(0,i.jsx)("span",{className:"reactions-card__emoji-large",role:"img","aria-label":a||"mood",children:t||"😊"})}),(0,i.jsx)("div",{className:"reactions-card__intensity-dots","aria-label":`Intensity: ${n} out of 5`,children:Array.from({length:5},(e,a)=>(0,i.jsx)("span",{className:"reactions-card__intensity-dot "+(a<n?"filled":"")},a))})]}),(0,i.jsxs)("div",{className:"reactions-card__content",children:[a&&(0,i.jsx)("h3",{className:"reactions-card__title p-name",children:a}),r&&(0,i.jsx)("p",{className:"reactions-card__notes p-content",children:r}),s&&(0,i.jsx)("time",{className:"reactions-card__timestamp dt-published",dateTime:new Date(s).toISOString(),children:new Date(s).toLocaleString()})]})]})})}});const re=[{label:(0,j.__)("Purchase","reactions-for-indieweb"),value:"purchase",emoji:"🛒"},{label:(0,j.__)("Gift","reactions-for-indieweb"),value:"gift",emoji:"🎁"},{label:(0,j.__)("Found","reactions-for-indieweb"),value:"found",emoji:"🔍"},{label:(0,j.__)("Won","reactions-for-indieweb"),value:"won",emoji:"🏆"},{label:(0,j.__)("Trade","reactions-for-indieweb"),value:"trade",emoji:"🔄"},{label:(0,j.__)("Free","reactions-for-indieweb"),value:"free",emoji:"✨"},{label:(0,j.__)("Inherited","reactions-for-indieweb"),value:"inherited",emoji:"📜"},{label:(0,j.__)("Other","reactions-for-indieweb"),value:"other",emoji:"📦"}],ne={purchase:"Purchase",gift:"Gift",found:"Found",won:"Won",trade:"Trade",free:"Free",other:"Other"},se=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"reactions-indieweb/acquisition-card","version":"1.0.0","title":"Acquisition Card","category":"reactions-indieweb","description":"Display something you acquired or purchased with photo and details.","keywords":["acquisition","purchase","bought","got","haul"],"textdomain":"reactions-indieweb","attributes":{"title":{"type":"string","source":"html","selector":".acquisition-title"},"acquisitionType":{"type":"string","default":"purchase"},"cost":{"type":"string"},"where":{"type":"string"},"whereUrl":{"type":"string"},"photo":{"type":"string","source":"attribute","selector":".acquisition-photo img","attribute":"src"},"photoAlt":{"type":"string"},"notes":{"type":"string","source":"html","selector":".acquisition-notes"},"acquiredAt":{"type":"string"},"layout":{"type":"string","default":"horizontal"}},"supports":{"html":false,"align":["wide","full"],"color":{"background":true,"text":true,"gradients":true,"link":true},"spacing":{"margin":true,"padding":true,"blockGap":true},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontFamily":true,"__experimentalFontWeight":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true},"__experimentalBorder":{"color":true,"radius":true,"width":true,"style":true,"__experimentalDefaultControls":{"color":true,"radius":true,"width":true,"style":true}},"shadow":true,"dimensions":{"minHeight":true}},"example":{"attributes":{"title":"New Headphones","acquisitionType":"purchase","cost":"$150","where":"Amazon"}}}');(0,a.registerBlockType)(se.name,{...se,icon:w,edit:function({attributes:e,setAttributes:a}){const{title:t,acquisitionType:r,cost:n,where:s,whereUrl:o,photo:l,photoAlt:c,notes:d}=e,u=(0,f.useBlockProps)({className:"acquisition-card-block"}),{editPost:m}=(0,z.useDispatch)("core/editor"),h=(0,z.useSelect)(e=>{const a=e("core/editor").getEditedPostAttribute("indieblocks_kind");return a&&a.length>0?a[0]:null},[]);(0,N.useEffect)(()=>{h||wp.apiFetch({path:"/wp/v2/kind?slug=acquisition"}).then(e=>{e&&e.length>0&&m({indieblocks_kind:[e[0].id]})}).catch(()=>{})},[]),(0,N.useEffect)(()=>{const e={};void 0!==t&&(e._reactions_acquisition_title=t||""),void 0!==r&&(e._reactions_acquisition_type=r||""),void 0!==n&&(e._reactions_acquisition_cost=n||""),void 0!==s&&(e._reactions_acquisition_where=s||""),void 0!==o&&(e._reactions_acquisition_where_url=o||""),void 0!==l&&(e._reactions_acquisition_photo=l||""),Object.keys(e).length>0&&m({meta:e})},[t,r,n,s,o,l]);const _=e=>{e.stopPropagation(),a({photo:"",photoAlt:""})},p=(b=r,re.find(e=>e.value===b)||re[0]);var b;const g=re.map(e=>({label:`${e.emoji} ${e.label}`,value:e.value}));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(f.InspectorControls,{children:[(0,i.jsxs)(y.PanelBody,{title:(0,j.__)("Acquisition Details","reactions-for-indieweb"),initialOpen:!0,children:[(0,i.jsx)(y.TextControl,{label:(0,j.__)("Title","reactions-for-indieweb"),value:t||"",onChange:e=>a({title:e}),placeholder:(0,j.__)("What did you get?","reactions-for-indieweb")}),(0,i.jsx)(y.SelectControl,{label:(0,j.__)("Type","reactions-for-indieweb"),value:r||"purchase",options:g,onChange:e=>a({acquisitionType:e})}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("Cost","reactions-for-indieweb"),value:n||"",onChange:e=>a({cost:e}),placeholder:(0,j.__)("$0.00","reactions-for-indieweb")}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("From Where","reactions-for-indieweb"),value:s||"",onChange:e=>a({where:e}),placeholder:(0,j.__)("Store or source","reactions-for-indieweb")}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("Store/Source URL","reactions-for-indieweb"),value:o||"",onChange:e=>a({whereUrl:e}),type:"url",help:(0,j.__)("Link to where you got it","reactions-for-indieweb")})]}),(0,i.jsx)(y.PanelBody,{title:(0,j.__)("Notes","reactions-for-indieweb"),initialOpen:!1,children:(0,i.jsx)(y.TextControl,{label:(0,j.__)("Notes","reactions-for-indieweb"),value:d||"",onChange:e=>a({notes:e}),placeholder:(0,j.__)("Notes about this...","reactions-for-indieweb")})})]}),(0,i.jsx)("div",{...u,children:(0,i.jsxs)("div",{className:"reactions-card",children:[(0,i.jsx)("div",{className:"reactions-card__media",style:{width:"120px"},children:(0,i.jsx)(f.MediaUploadCheck,{children:(0,i.jsx)(f.MediaUpload,{onSelect:e=>{a({photo:e.url,photoAlt:e.alt||t||(0,j.__)("Acquisition photo","reactions-for-indieweb")})},allowedTypes:["image"],render:({open:e})=>(0,i.jsx)("button",{type:"button",className:"reactions-card__media-button",onClick:e,children:l?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("img",{src:l,alt:c||t,className:"reactions-card__image"}),(0,i.jsx)("button",{type:"button",className:"reactions-card__media-remove",onClick:_,"aria-label":(0,j.__)("Remove photo","reactions-for-indieweb"),children:"×"})]}):(0,i.jsxs)("div",{className:"reactions-card__media-placeholder",children:[(0,i.jsx)("span",{className:"reactions-card__media-icon",children:p.emoji}),(0,i.jsx)("span",{className:"reactions-card__media-text",children:(0,j.__)("Add Photo","reactions-for-indieweb")})]})})})})}),(0,i.jsxs)("div",{className:"reactions-card__content",children:[(0,i.jsx)("div",{className:"reactions-card__type-row",children:(0,i.jsx)("select",{className:"reactions-card__type-select",value:r||"purchase",onChange:e=>a({acquisitionType:e.target.value}),children:re.map(e=>(0,i.jsxs)("option",{value:e.value,children:[e.emoji," ",e.label]},e.value))})}),(0,i.jsx)(f.RichText,{tagName:"h3",className:"reactions-card__title",value:t,onChange:e=>a({title:e}),placeholder:(0,j.__)("What did you get?","reactions-for-indieweb")}),(0,i.jsxs)("div",{className:"reactions-card__input-row",children:[(0,i.jsx)("span",{className:"reactions-card__input-icon",children:"💰"}),(0,i.jsx)("input",{type:"text",className:"reactions-card__input reactions-card__input--price",value:n||"",onChange:e=>a({cost:e.target.value}),placeholder:"gift"===r||"free"===r?(0,j.__)("Free!","reactions-for-indieweb"):(0,j.__)("$0.00","reactions-for-indieweb")})]}),(0,i.jsx)(f.RichText,{tagName:"p",className:"reactions-card__location",value:s,onChange:e=>a({where:e}),placeholder:(0,j.__)("From where?","reactions-for-indieweb")}),(0,i.jsx)(f.RichText,{tagName:"p",className:"reactions-card__notes",value:d,onChange:e=>a({notes:e}),placeholder:(0,j.__)("Notes about this...","reactions-for-indieweb")})]})]})})]})},save:function({attributes:e}){const{title:a,acquisitionType:t,cost:r,where:n,whereUrl:s,photo:o,photoAlt:l,notes:c,acquiredAt:d,layout:u}=e,m=f.useBlockProps.save({className:`acquisition-card layout-${u}`});return(0,i.jsx)("div",{...m,children:(0,i.jsxs)("div",{className:"reactions-card h-cite",children:[o&&(0,i.jsx)("div",{className:"reactions-card__media",children:(0,i.jsx)("img",{src:o,alt:l||a,className:"reactions-card__image u-photo",loading:"lazy"})}),(0,i.jsxs)("div",{className:"reactions-card__content",children:[(0,i.jsx)("span",{className:"reactions-card__badge",children:ne[t]||t}),a&&(0,i.jsx)("h3",{className:"reactions-card__title p-name",children:s?(0,i.jsx)("a",{href:s,className:"u-url",target:"_blank",rel:"noopener noreferrer",children:a}):a}),r&&(0,i.jsx)("p",{className:"reactions-card__subtitle",children:r}),n&&(0,i.jsxs)("p",{className:"reactions-card__meta p-location",children:["from ",n]}),c&&(0,i.jsx)("p",{className:"reactions-card__notes p-content",children:c}),d&&(0,i.jsx)("time",{className:"reactions-card__timestamp dt-published",dateTime:new Date(d).toISOString(),children:new Date(d).toLocaleString()})]}),(0,i.jsx)("data",{className:"u-acquired",value:a||"",hidden:!0})]})})}});const oe=JSON.parse('{"UU":"reactions-indieweb/checkin-dashboard"}');(0,a.registerBlockType)(oe.UU,{edit:function({attributes:e,setAttributes:a}){const{layout:t,showMap:r,showStats:n,limit:s,showFilters:o}=e,[l,c]=(0,N.useState)([]),[d,u]=(0,N.useState)({}),[m,h]=(0,N.useState)(!0),_=(0,f.useBlockProps)({className:`checkin-dashboard-block layout-${t}`});return(0,N.useEffect)(()=>{h(!0),Promise.all([R()({path:`/reactions-indieweb/v1/checkins?per_page=${s}`}),R()({path:"/reactions-indieweb/v1/checkins/stats"})]).then(([e,a])=>{c(e||[]),u(a||{}),h(!1)}).catch(()=>{h(!1)})},[s]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.InspectorControls,{children:(0,i.jsxs)(y.PanelBody,{title:(0,j.__)("Display Settings","reactions-for-indieweb"),children:[(0,i.jsx)(y.SelectControl,{label:(0,j.__)("Default Layout","reactions-for-indieweb"),value:t,options:[{label:(0,j.__)("Grid","reactions-for-indieweb"),value:"grid"},{label:(0,j.__)("Map","reactions-for-indieweb"),value:"map"},{label:(0,j.__)("Timeline","reactions-for-indieweb"),value:"timeline"}],onChange:e=>a({layout:e})}),(0,i.jsx)(y.RangeControl,{label:(0,j.__)("Number of Check-ins","reactions-for-indieweb"),value:s,onChange:e=>a({limit:e}),min:4,max:50}),(0,i.jsx)(y.ToggleControl,{label:(0,j.__)("Show Map View","reactions-for-indieweb"),checked:r,onChange:e=>a({showMap:e})}),(0,i.jsx)(y.ToggleControl,{label:(0,j.__)("Show Statistics","reactions-for-indieweb"),checked:n,onChange:e=>a({showStats:e})}),(0,i.jsx)(y.ToggleControl,{label:(0,j.__)("Show Filters","reactions-for-indieweb"),checked:o,onChange:e=>a({showFilters:e})})]})}),(0,i.jsx)("div",{..._,children:(0,i.jsxs)("div",{className:"checkin-dashboard-preview",children:[n&&(0,i.jsxs)("div",{className:"checkin-stats-preview",children:[(0,i.jsxs)("div",{className:"stat-item",children:[(0,i.jsx)("span",{className:"stat-value",children:d.total||0}),(0,i.jsx)("span",{className:"stat-label",children:(0,j.__)("Check-ins","reactions-for-indieweb")})]}),(0,i.jsxs)("div",{className:"stat-item",children:[(0,i.jsx)("span",{className:"stat-value",children:d.unique_venues||0}),(0,i.jsx)("span",{className:"stat-label",children:(0,j.__)("Venues","reactions-for-indieweb")})]}),(0,i.jsxs)("div",{className:"stat-item",children:[(0,i.jsx)("span",{className:"stat-value",children:d.countries?.length||0}),(0,i.jsx)("span",{className:"stat-label",children:(0,j.__)("Countries","reactions-for-indieweb")})]})]}),m?(0,i.jsxs)("div",{className:"checkin-loading",children:[(0,i.jsx)("span",{className:"spinner is-active"}),(0,j.__)("Loading check-ins...","reactions-for-indieweb")]}):0===l.length?(0,i.jsxs)("div",{className:"checkin-empty",children:[(0,i.jsx)("span",{className:"dashicons dashicons-location"}),(0,i.jsx)("p",{children:(0,j.__)("No check-ins found. Create check-in posts to see them here.","reactions-for-indieweb")})]}):(0,i.jsx)("div",{className:"checkin-grid-preview",children:l.slice(0,6).map((e,a)=>(0,i.jsxs)("div",{className:"checkin-card-preview",children:[e.photo?(0,i.jsx)("img",{src:e.photo,alt:e.venue_name}):(0,i.jsx)("div",{className:"no-photo",children:(0,i.jsx)("span",{className:"dashicons dashicons-location"})}),(0,i.jsxs)("div",{className:"checkin-card-info",children:[(0,i.jsx)("strong",{children:e.venue_name}),(0,i.jsx)("span",{children:e.address})]})]},a))}),l.length>6&&(0,i.jsx)("p",{className:"checkin-more",children:(0,j.__)("+ more check-ins will be shown on the frontend","reactions-for-indieweb")})]})})]})},save:()=>null});const le=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"reactions-indieweb/star-rating","version":"1.0.0","title":"Star Rating","category":"reactions-indieweb","description":"Add an interactive star rating to any content with customizable scale and style.","keywords":["rating","stars","review","score","feedback"],"textdomain":"reactions-indieweb","attributes":{"rating":{"type":"number","default":0},"maxRating":{"type":"number","default":5},"showLabel":{"type":"boolean","default":true},"label":{"type":"string","default":"Rating"},"showValue":{"type":"boolean","default":true},"size":{"type":"string","default":"medium"},"style":{"type":"string","default":"stars"},"allowHalf":{"type":"boolean","default":false},"itemUrl":{"type":"string"},"itemName":{"type":"string"}},"supports":{"html":false,"align":["left","center","right"],"color":{"text":true},"spacing":{"margin":true,"padding":true},"typography":{"fontSize":true}},"example":{"attributes":{"rating":4,"maxRating":5,"label":"My Rating"}},"editorStyle":"file:./editor.css","style":"file:./style.css"}');(0,a.registerBlockType)(le.name,{...le,icon:c,edit:function({attributes:e,setAttributes:a}){const{rating:t,maxRating:r,showLabel:n,label:s,showValue:o,size:l,style:c,allowHalf:d,itemUrl:u,itemName:m}=e,h=(0,f.useBlockProps)({className:`star-rating-block size-${l} style-${c}`}),_=[{label:(0,j.__)("Small","reactions-for-indieweb"),value:"small"},{label:(0,j.__)("Medium","reactions-for-indieweb"),value:"medium"},{label:(0,j.__)("Large","reactions-for-indieweb"),value:"large"}],p=[{label:(0,j.__)("Stars","reactions-for-indieweb"),value:"stars"},{label:(0,j.__)("Hearts","reactions-for-indieweb"),value:"hearts"},{label:(0,j.__)("Circles","reactions-for-indieweb"),value:"circles"},{label:(0,j.__)("Numeric","reactions-for-indieweb"),value:"numeric"}],b=e=>{const a={stars:{filled:"★",empty:"☆"},hearts:{filled:"❤️",empty:"🤍"},circles:{filled:"●",empty:"○"},numeric:{filled:null,empty:null}};return e?a[c]?.filled:a[c]?.empty},g=e=>{a(e===t?{rating:0}:{rating:e})};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(f.InspectorControls,{children:[(0,i.jsxs)(y.PanelBody,{title:(0,j.__)("Rating Settings","reactions-for-indieweb"),children:[(0,i.jsx)(y.RangeControl,{label:(0,j.__)("Current Rating","reactions-for-indieweb"),value:t,onChange:e=>a({rating:e}),min:0,max:r,step:d?.5:1}),(0,i.jsx)(y.RangeControl,{label:(0,j.__)("Maximum Rating","reactions-for-indieweb"),value:r,onChange:e=>a({maxRating:e}),min:3,max:10}),(0,i.jsx)(y.ToggleControl,{label:(0,j.__)("Allow Half Stars","reactions-for-indieweb"),checked:d,onChange:e=>a({allowHalf:e})})]}),(0,i.jsxs)(y.PanelBody,{title:(0,j.__)("Display Options","reactions-for-indieweb"),children:[(0,i.jsx)(y.SelectControl,{label:(0,j.__)("Style","reactions-for-indieweb"),value:c,options:p,onChange:e=>a({style:e})}),(0,i.jsx)(y.SelectControl,{label:(0,j.__)("Size","reactions-for-indieweb"),value:l,options:_,onChange:e=>a({size:e})}),(0,i.jsx)(y.ToggleControl,{label:(0,j.__)("Show Label","reactions-for-indieweb"),checked:n,onChange:e=>a({showLabel:e})}),n&&(0,i.jsx)(y.TextControl,{label:(0,j.__)("Label Text","reactions-for-indieweb"),value:s,onChange:e=>a({label:e})}),(0,i.jsx)(y.ToggleControl,{label:(0,j.__)("Show Value","reactions-for-indieweb"),checked:o,onChange:e=>a({showValue:e})})]}),(0,i.jsxs)(y.PanelBody,{title:(0,j.__)("Rated Item","reactions-for-indieweb"),initialOpen:!1,children:[(0,i.jsx)(y.TextControl,{label:(0,j.__)("Item Name","reactions-for-indieweb"),value:m||"",onChange:e=>a({itemName:e}),help:(0,j.__)("What are you rating?","reactions-for-indieweb")}),(0,i.jsx)(y.TextControl,{label:(0,j.__)("Item URL","reactions-for-indieweb"),value:u||"",onChange:e=>a({itemUrl:e}),type:"url"})]})]}),(0,i.jsx)("div",{...h,children:(0,i.jsxs)("div",{className:"star-rating-inner",children:[n&&s&&(0,i.jsx)("span",{className:"rating-label",children:s}),"numeric"===c?(0,i.jsxs)("div",{className:"rating-numeric",children:[(0,i.jsx)(y.RangeControl,{value:t,onChange:e=>a({rating:e}),min:0,max:r,step:d?.5:1,withInputField:!0}),(0,i.jsxs)("span",{className:"rating-display",children:[t," / ",r]})]}):(0,i.jsx)("div",{className:"rating-icons",role:"radiogroup","aria-label":s||(0,j.__)("Rating","reactions-for-indieweb"),children:Array.from({length:r},(e,n)=>{const s=n+1,o=s<=t,l=d&&s-.5===t;return(0,i.jsx)("button",{type:"button",className:`rating-icon ${o?"filled":""} ${l?"half-filled":""}`,onClick:()=>g(s),onKeyDown:e=>((e,i)=>{const n=i+1;"Enter"===e.key||" "===e.key?(e.preventDefault(),g(n)):"ArrowRight"===e.key||"ArrowUp"===e.key?(e.preventDefault(),t<r&&a({rating:t+(d?.5:1)})):"ArrowLeft"!==e.key&&"ArrowDown"!==e.key||(e.preventDefault(),t>0&&a({rating:t-(d?.5:1)}))})(e,n),role:"radio","aria-checked":o,"aria-label":`${s} ${1===s?(0,j.__)("star","reactions-for-indieweb"):(0,j.__)("stars","reactions-for-indieweb")}`,tabIndex:0===n?0:-1,children:l?(0,i.jsxs)("span",{className:"half-star",children:[(0,i.jsx)("span",{className:"half-filled-part",children:b(!0)}),(0,i.jsx)("span",{className:"half-empty-part",children:b(!1)})]}):(0,i.jsx)("span",{children:b(o)})},n)})}),o&&"numeric"!==c&&(0,i.jsxs)("span",{className:"rating-value",children:[t," / ",r]})]})})]})},save:function({attributes:e}){const{rating:a,maxRating:t,showLabel:r,label:n,showValue:s,size:o,style:l,allowHalf:c,itemUrl:d,itemName:u}=e,m=f.useBlockProps.save({className:`star-rating-block size-${o} style-${l}`}),h=e=>{const a={stars:{filled:"★",empty:"☆"},hearts:{filled:"❤️",empty:"🤍"},circles:{filled:"●",empty:"○"},numeric:{filled:null,empty:null}};return e?a[l]?.filled:a[l]?.empty};return Math.round(a/t*100),(0,i.jsx)("div",{...m,children:(0,i.jsxs)("div",{className:"star-rating-inner h-review","aria-label":`Rating: ${a} out of ${t}`,children:[r&&n&&(0,i.jsx)("span",{className:"rating-label",children:n}),(0,i.jsx)("div",{className:"rating-display",children:"numeric"===l?(0,i.jsxs)("span",{className:"rating-numeric-display",children:[a," / ",t]}):(()=>{const e=[];for(let r=0;r<t;r++){const t=r+1,n=t<=a,s=c&&t-.5===a;e.push((0,i.jsx)("span",{className:`rating-icon ${n?"filled":""} ${s?"half-filled":""}`,"aria-hidden":"true",children:s?(0,i.jsxs)("span",{className:"half-star",children:[(0,i.jsx)("span",{className:"half-filled-part",children:h(!0)}),(0,i.jsx)("span",{className:"half-empty-part",children:h(!1)})]}):h(n)},r))}return e})()}),s&&"numeric"!==l&&(0,i.jsxs)("span",{className:"rating-value",children:[a," / ",t]}),(0,i.jsxs)("data",{className:"p-rating",value:a,children:[(0,i.jsx)("data",{className:"p-best",value:t,hidden:!0}),(0,i.jsx)("data",{className:"p-worst",value:"0",hidden:!0})]}),u&&(0,i.jsx)("span",{className:"p-item h-product",hidden:!0,children:d?(0,i.jsx)("a",{href:d,className:"p-name u-url",children:u}):(0,i.jsx)("span",{className:"p-name",children:u})}),(0,i.jsxs)("span",{itemProp:"reviewRating",itemScope:!0,itemType:"https://schema.org/Rating",hidden:!0,children:[(0,i.jsx)("meta",{itemProp:"worstRating",content:"0"}),(0,i.jsx)("meta",{itemProp:"ratingValue",content:a.toString()}),(0,i.jsx)("meta",{itemProp:"bestRating",content:t.toString()})]})]})})}});const ce=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"reactions-indieweb/media-lookup","version":"1.0.0","title":"Media Lookup","category":"reactions-indieweb","description":"Search and embed media info from external APIs (books, movies, music).","keywords":["lookup","search","media","book","movie","music","api"],"textdomain":"reactions-indieweb","attributes":{"mediaType":{"type":"string","default":"book"},"searchQuery":{"type":"string"},"selectedItem":{"type":"object"},"displayStyle":{"type":"string","default":"card"},"showImage":{"type":"boolean","default":true},"showDescription":{"type":"boolean","default":true},"linkToSource":{"type":"boolean","default":true}},"supports":{"html":false,"align":["wide","full"],"color":{"background":true,"text":true},"spacing":{"margin":true,"padding":true},"typography":{"fontSize":true},"__experimentalBorder":{"color":true,"radius":true,"width":true}},"example":{"attributes":{"mediaType":"book","selectedItem":{"title":"The Great Gatsby","author":"F. Scott Fitzgerald","year":"1925"}}},"editorStyle":"file:./editor.css","style":"file:./style.css"}');(0,a.registerBlockType)(ce.name,{...ce,icon:u,edit:function({attributes:e,setAttributes:a}){const{mediaType:t,searchQuery:r,selectedItem:n,displayStyle:s,showImage:o,showDescription:l,linkToSource:c}=e,[d,u]=(0,N.useState)(!1),m=(0,f.useBlockProps)({className:`media-lookup-block type-${t} style-${s}`}),h=[{label:(0,j.__)("Book","reactions-for-indieweb"),value:"book"},{label:(0,j.__)("Movie/TV","reactions-for-indieweb"),value:"movie"},{label:(0,j.__)("Music","reactions-for-indieweb"),value:"music"}],_=[{label:(0,j.__)("Card","reactions-for-indieweb"),value:"card"},{label:(0,j.__)("Inline","reactions-for-indieweb"),value:"inline"},{label:(0,j.__)("Compact","reactions-for-indieweb"),value:"compact"}],p=()=>({book:"Open Library",movie:"TMDB",music:"MusicBrainz"}[t]||"External API"),b=()=>{a({selectedItem:null,searchQuery:""})};return n?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(f.InspectorControls,{children:[(0,i.jsxs)(y.PanelBody,{title:(0,j.__)("Display Settings","reactions-for-indieweb"),children:[(0,i.jsx)(y.SelectControl,{label:(0,j.__)("Display Style","reactions-for-indieweb"),value:s,options:_,onChange:e=>a({displayStyle:e})}),(0,i.jsx)(y.ToggleControl,{label:(0,j.__)("Show Image","reactions-for-indieweb"),checked:o,onChange:e=>a({showImage:e})}),(0,i.jsx)(y.ToggleControl,{label:(0,j.__)("Show Description","reactions-for-indieweb"),checked:l,onChange:e=>a({showDescription:e})}),(0,i.jsx)(y.ToggleControl,{label:(0,j.__)("Link to Source","reactions-for-indieweb"),checked:c,onChange:e=>a({linkToSource:e})})]}),(0,i.jsxs)(y.PanelBody,{title:(0,j.__)("Media Info","reactions-for-indieweb"),initialOpen:!1,children:[(0,i.jsxs)("p",{className:"components-base-control__help",children:[(0,j.__)("Data fetched from","reactions-for-indieweb")," ",p()]}),n&&(0,i.jsxs)("div",{className:"selected-item-details",children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:(0,j.__)("Title:","reactions-for-indieweb")})," ",n.title||n.name]}),n.id&&(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:(0,j.__)("ID:","reactions-for-indieweb")})," ",n.id]})]}),(0,i.jsx)(y.Button,{variant:"secondary",onClick:b,isDestructive:!0,children:(0,j.__)("Remove & Search Again","reactions-for-indieweb")})]})]}),(0,i.jsx)("div",{...m,children:(0,i.jsx)("div",{className:"media-lookup-inner h-cite",children:(()=>{if(!n)return null;const e=n.title||n.name||"",a=n.author||n.artist||n.director||"",t=n.year||n.release_year||n.first_publish_year||"",r=n.cover||n.image||n.poster||"",d=n.description||n.overview||"",u=n.url||n.link||"";return(0,i.jsxs)("div",{className:`media-item-preview style-${s}`,children:[o&&r&&(0,i.jsx)("div",{className:"media-image",children:(0,i.jsx)(C,{src:r,alt:e,size:"compact"===s?"small":"medium"})}),(0,i.jsxs)("div",{className:"media-info",children:[(0,i.jsx)("h3",{className:"media-title",children:c&&u?(0,i.jsx)("a",{href:u,target:"_blank",rel:"noopener noreferrer",children:e}):e}),a&&(0,i.jsx)("p",{className:"media-subtitle",children:a}),t&&(0,i.jsx)("span",{className:"media-year",children:t}),l&&d&&"compact"!==s&&(0,i.jsx)("p",{className:"media-description",children:d.length>200?`${d.substring(0,200)}...`:d}),(0,i.jsx)("div",{className:"media-source",children:(0,i.jsxs)("span",{className:"source-label",children:[(0,j.__)("via","reactions-for-indieweb")," ",p()]})})]}),(0,i.jsx)(y.Button,{variant:"secondary",onClick:b,className:"clear-selection",isSmall:!0,children:(0,j.__)("Change","reactions-for-indieweb")})]})})()})})]}):(0,i.jsxs)("div",{...m,children:[(0,i.jsx)(f.InspectorControls,{children:(0,i.jsx)(y.PanelBody,{title:(0,j.__)("Media Type","reactions-for-indieweb"),children:(0,i.jsx)(y.SelectControl,{label:(0,j.__)("Type","reactions-for-indieweb"),value:t,options:h,onChange:e=>a({mediaType:e})})})}),(0,i.jsx)(P,{icon:(0,i.jsx)("span",{className:"media-type-icon",children:{book:"📚",movie:"🎬",music:"🎵"}[t]||"📦"}),label:(0,j.__)("Media Lookup","reactions-for-indieweb"),instructions:(0,j.__)("Search for media to embed information about a book, movie, or music.","reactions-for-indieweb"),children:(0,i.jsxs)("div",{className:"media-lookup-search",children:[(0,i.jsx)("div",{className:"media-type-selector",children:h.map(e=>(0,i.jsx)(y.Button,{variant:t===e.value?"primary":"secondary",onClick:()=>a({mediaType:e.value}),isSmall:!0,children:e.label},e.value))}),(0,i.jsx)(S,{type:t,placeholder:{book:(0,j.__)("Search by title, author, or ISBN...","reactions-for-indieweb"),movie:(0,j.__)("Search by title, year, or actor...","reactions-for-indieweb"),music:(0,j.__)("Search by song, artist, or album...","reactions-for-indieweb")}[t]||(0,j.__)("Search...","reactions-for-indieweb"),onSelect:e=>{a({selectedItem:e,searchQuery:""}),u(!1)}})]})})]})},save:function({attributes:e}){const{mediaType:a,selectedItem:t,displayStyle:r,showImage:n,showDescription:s,linkToSource:o}=e;if(!t)return null;const l=f.useBlockProps.save({className:`media-lookup-block type-${a} style-${r}`}),c=t.title||t.name||"",d=t.author||t.artist||t.director||"",u=t.year||t.release_year||t.first_publish_year||"",m=t.cover||t.image||t.poster||"",h=t.description||t.overview||"",_=t.url||t.link||"",p=t.id||t.key||"",b=(()=>{if(_)return _;switch(a){case"book":if(t.key)return`https://openlibrary.org${t.key}`;if(t.isbn)return`https://openlibrary.org/isbn/${t.isbn}`;break;case"movie":if(t.tmdb_id)return`https://www.themoviedb.org/${"tv"===t.media_type?"tv":"movie"}/${t.tmdb_id}`;if(t.imdb_id)return`https://www.imdb.com/title/${t.imdb_id}`;break;case"music":if(t.musicbrainz_id)return`https://musicbrainz.org/recording/${t.musicbrainz_id}`}return null})();return(0,i.jsx)("div",{...l,children:(0,i.jsxs)("div",{className:`media-lookup-inner ${(()=>{switch(a){case"book":return"h-cite p-read-of";case"movie":return"h-cite p-watch-of";case"music":return"h-cite p-listen-of";default:return"h-cite"}})()}`,children:[n&&m&&(0,i.jsx)("div",{className:"media-image",children:(0,i.jsx)("img",{src:m,alt:c,className:"u-photo",loading:"lazy"})}),(0,i.jsxs)("div",{className:"media-info",children:[(0,i.jsx)("h3",{className:"media-title p-name",children:o&&b?(0,i.jsx)("a",{href:b,className:"u-url",target:"_blank",rel:"noopener noreferrer",children:c}):c}),d&&(0,i.jsx)("p",{className:"media-subtitle p-author h-card",children:(0,i.jsx)("span",{className:"p-name",children:d})}),u&&(0,i.jsx)("span",{className:"media-year",children:(0,i.jsx)("time",{className:"dt-published",children:u})}),s&&h&&"compact"!==r&&(0,i.jsx)("p",{className:"media-description p-summary",children:h.length>200?`${h.substring(0,200)}...`:h}),(0,i.jsxs)("div",{className:"media-meta",children:["book"===a&&t.isbn&&(0,i.jsx)("data",{className:"p-isbn",value:t.isbn,hidden:!0}),"book"===a&&t.publisher&&(0,i.jsx)("span",{className:"p-publisher",children:t.publisher}),"movie"===a&&t.runtime&&(0,i.jsxs)("span",{className:"runtime",children:[t.runtime," min"]}),"music"===a&&t.album&&(0,i.jsx)("span",{className:"album",children:t.album})]})]}),b&&(0,i.jsx)("data",{className:"u-uid",value:b,hidden:!0}),p&&(0,i.jsx)("data",{className:"p-uid",value:p,hidden:!0})]})})}});const de=(0,i.jsx)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),ue=(0,a.getCategories)();ue.some(e=>"reactions-indieweb"===e.slug)||(0,a.setCategories)([{slug:"reactions-indieweb",title:"Reactions for IndieWeb",icon:de},...ue]),(0,a.registerBlockCollection)("reactions-indieweb",{title:"Reactions for IndieWeb",icon:de})})();